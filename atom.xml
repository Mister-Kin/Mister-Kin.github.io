<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Mr. Kin&#39;s Blog</title>
  <icon>https://mister-kin.github.io/images-public/favicon/logo.svg</icon>
  <subtitle>计算机知识分享/软件应用讲解</subtitle>
  <link href="https://mister-kin.github.io/atom.xml" rel="self"/>
  
  <link href="https://mister-kin.github.io/"/>
  <updated>2025-12-04T23:37:25.000Z</updated>
  <id>https://mister-kin.github.io/</id>
  
  <author>
    <name>Mr. Kin</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>WinPE系统封装排障总结</title>
    <link href="https://mister-kin.github.io/troubleshooting/winpe-troubleshooting/"/>
    <id>https://mister-kin.github.io/troubleshooting/winpe-troubleshooting/</id>
    <published>2025-12-04T01:19:02.000Z</published>
    <updated>2025-12-04T23:37:25.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="安装系统">1 &nbsp&nbsp<a href="#安装系统" class="headerlink" title="安装系统"></a>安装系统</h1><h2 id="虚拟机将gho，esd、wim等系统镜像文件加载进pe">1.1 &nbsp&nbsp<a href="#虚拟机将gho，esd、wim等系统镜像文件加载进pe" class="headerlink" title="虚拟机将gho，esd、wim等系统镜像文件加载进pe"></a>虚拟机将gho，esd、wim等系统镜像文件加载进pe</h2><p>虚拟机中，pe系统无法安装扩展工具，因此无法通过启用共享文件夹功能和宿主机传递文件。以下方法可以给pe系统中传递文件</p><ul><li>将gho、esd、wim文件打包封装成iso文件，通过CD&#x2F;DVD虚拟机硬件加载iso文件</li><li>映射虚拟磁盘</li></ul><h2 id="使用系统镜像内部自带的Setup-exe安装">1.2 &nbsp&nbsp<a href="#使用系统镜像内部自带的Setup-exe安装" class="headerlink" title="使用系统镜像内部自带的Setup.exe安装"></a>使用系统镜像内部自带的Setup.exe安装</h2><div class="note danger no-icon"><p>WinPE不推荐用这个方法，既然都在pe中，有其他方能够更好实现，没必要使用这个。</p></div><p>一般常见于将镜像作为PE启动盘或者直接在系统内运行。</p><p>P.S.在win7-win11系统上都可以直接运行安装（一般我都是用这个方法进行大版本的更新），只不过在WinPE中我们可以删除和格式化系统分区。如果WinPE中无法运行Setup.exe，换一个未深度精简过的PE再尝试。</p><div class="note info no-icon"><p>注意：在WinPE中或者直接作为启动盘，GPT分区注意要启用BIOS的UEFI启动模式，MBR分区启用BIOS的Legacy启动模式。</p></div><h2 id="PE中使用Dism安装系统镜像">1.3 &nbsp&nbsp<a href="#PE中使用Dism安装系统镜像" class="headerlink" title="PE中使用Dism安装系统镜像"></a>PE中使用Dism安装系统镜像</h2><ol><li>使用分区工具分好区</li><li>查看镜像中专业版所对应的索引index：<code>Dism /Get-ImageInfo /ImageFile:H:\sources\install.wim</code></li><li>安装镜像：<code>Dism /apply-image /imagefile:H:\sources\install.wim /index:8 /ApplyDir:W:\</code></li><li>配置启动文件：<code>bcdboot W:\Windows /s S: /f ALL</code>。MBR分区使用这条命令安装bootmgr和更新mbr：<code>bootsect /nt60 W: /mbr</code></li><li>重启机器</li></ol><h2 id="win11-OOBE安装跳过强制登录帐号">1.4 &nbsp&nbsp<a href="#win11-OOBE安装跳过强制登录帐号" class="headerlink" title="win11 OOBE安装跳过强制登录帐号"></a>win11 OOBE安装跳过强制登录帐号</h2><ul><li>方案1：拔掉网线，Shift+F10调出cmd窗口，运行：<code>oobe\BypassNRO.cmd</code>，重启继续走OOBE流程，到登录账户页面时会多出一个暂时跳过的选项。<ul><li>bypassnro.cmd在26200.5516预览版更新已确认被移除，该方法在后期正式版将无法使用。</li></ul></li><li>方案2：方案1的衍生方法，通过注册表修改BypassNRO的值以激活方案1的功能。Shift+F10调出cmd窗口，运行：<code>reg add HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\OOBE /v BypassNRO /t REG_DWORD /d 1 /f shutdown /r /t 0</code>。</li><li>方案3：输入<a href="mailto:&#110;&#x6f;&#64;&#116;&#x68;&#97;&#110;&#107;&#x79;&#111;&#117;&#x2e;&#x63;&#x6f;&#x6d;">no@thankyou.com</a>触发账户锁定，在登录里输入此账户然后随便输入个字符当做密码点登录，此时系统会弹出错误提醒，然后点击下一步，创建本地账户。其他类似的账户有如下：<ul><li><a href="mailto:&#49;&#x40;&#x31;&#x2e;&#x63;&#111;&#109;">1@1.com</a></li><li><a href="mailto:&#x38;&#64;&#56;&#46;&#x63;&#111;&#x6d;">8@8.com</a></li><li><a href="mailto:&#x6e;&#x6f;&#64;&#x74;&#104;&#97;&#110;&#107;&#x73;&#46;&#x63;&#x6f;&#x6d;">no@thanks.com</a></li><li><a href="mailto:&#x6e;&#111;&#64;&#116;&#x68;&#97;&#110;&#x6b;&#121;&#111;&#x75;&#x2e;&#99;&#111;&#109;">no@thankyou.com</a></li><li><a href="mailto:&#x65;&#x78;&#x61;&#109;&#112;&#108;&#x65;&#64;&#101;&#120;&#x61;&#x6d;&#112;&#x6c;&#x65;&#x2e;&#99;&#111;&#109;">example@example.com</a></li></ul></li><li>方案4：拔掉网线，Shift+F10调出cmd窗口，运行<code>start ms-cxh:localonly</code>。系统会自动打开微软账户管理的窗口，在此窗口输入帐号的用户名称和密码即可。<ul><li>适用系统范围：Windows 11 家庭版和专业版系列 (包括专业版、专业工作站版和专业教育版)</li></ul></li><li>方案5：无人值守文件unattended.xml自动化脚本。</li></ul><h2 id="新主板安装win7启动报错蓝屏0x000000a5">1.5 &nbsp&nbsp<a href="#新主板安装win7启动报错蓝屏0x000000a5" class="headerlink" title="新主板安装win7启动报错蓝屏0x000000a5"></a>新主板安装win7启动报错蓝屏0x000000a5</h2><p>问题：理论上1-13代酷睿都可以安装，本质上就是驱动的支持问题（锐龙芯片也是一样）。intel酷睿芯片原生支持win7的是6代，789代可通过注入驱动方式安装（可稳定用），10代及10代以后的也可以装，十分麻烦，需要特别处理BIOS和驱动问题（否则就是无限的a5蓝屏），而且不知道能否稳定用。一般导致a5蓝屏常见也是acpi.sys驱动问题。</p><h2 id="WinNTSetup安装系统ESD镜像报错0x25D：指定的缓冲区中包含类型错误的数据">1.6 &nbsp&nbsp<a href="#WinNTSetup安装系统ESD镜像报错0x25D：指定的缓冲区中包含类型错误的数据" class="headerlink" title="WinNTSetup安装系统ESD镜像报错0x25D：指定的缓冲区中包含类型错误的数据"></a>WinNTSetup安装系统ESD镜像报错0x25D：指定的缓冲区中包含类型错误的数据</h2><p>问题现象：在使用WinNTSetup安装Windows系统时，安装进度达到17%~18%时，WinNTSetup会卡住，弹出报错弹窗：<code>wimhost wimgapi error 0x25D：指定的缓冲区中包含类型错误的数据</code>。</p><p>原因：未查明，该平台尝试更换同型号内存&#x2F;CPU&#x2F;硬盘，测试均能复现该报错，并且只出现Win11 23H2版本（UUP合成的ESD镜像），同为ESD版本的Win11 24H2版本却是安装正常。</p><p>解决方法：使用wim类型的镜像可以规避该问题。</p><h1 id="系统启动项">2 &nbsp&nbsp<a href="#系统启动项" class="headerlink" title="系统启动项"></a>系统启动项</h1><h2 id="EFI-NVRAM启动项">2.1 &nbsp&nbsp<a href="#EFI-NVRAM启动项" class="headerlink" title="EFI NVRAM启动项"></a>EFI NVRAM启动项</h2><p>具有EFI的硬件，启动项是存储在NVRAM介质中的，EFI固件类似于BIOS固件。在UEFI v2.3.1及之后的版本，可以使用这些工具编辑EFI启动项：</p><ul><li>EFI version 2 shell: 提供<code>bcfg</code>的命令</li><li>Windows<ul><li><a href="https://www.easyuefi.com/index-us.html">EasyUEFI</a>：支持GUI和<a href="https://www.easyuefi.com/faq/en-US/EasyUEFI-Command-Line.html">命令行操作</a></li><li><a href="http://bbs.wuyou.net/forum.php?mod=viewthread&tid=57675">Bootice</a></li><li><a href="https://www.diskgenius.cn/">DiskGenius</a>：<a href="https://www.diskgenius.cn/help/set-uefi-bios-options.php">设置UEFI BIOS启动项</a></li></ul></li><li>Linux: efibootmgr</li></ul><h2 id="Windows-Boot-Manager启动失败，硬盘Disk-0启动成功">2.2 &nbsp&nbsp<a href="#Windows-Boot-Manager启动失败，硬盘Disk-0启动成功" class="headerlink" title="Windows Boot Manager启动失败，硬盘Disk 0启动成功"></a>Windows Boot Manager启动失败，硬盘Disk 0启动成功</h2><p>故障原因：在操作重装uEFI系统之后，BCD（引导配置数据）条目未正确修改引起的故障。比如，重装系统之后，Windows Boot Manager中的&quot;device&quot;相关参数被删除，因此无法正确启动。</p><p>解决方法，有两种：</p><ul><li>重建引导：PE系统中，运行<code>%win_drive_letter%:\Windows\System32\bcdboot %win_drive_letter%:\Windows /s %efi_drive_letter%: /f BIOS /l zh-cn</code><ul><li><a href="https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/bcdboot-command-line-options-techref-di?view=windows-11"><code>BCDBoot</code>命令行参数选项</a></li></ul></li><li>CSM模式下，设置第一启动项为硬盘启动项，而不是windows boot manager启动项。</li></ul><h2 id="多系统引导项的默认值设置">2.3 &nbsp&nbsp<a href="#多系统引导项的默认值设置" class="headerlink" title="多系统引导项的默认值设置"></a>多系统引导项的默认值设置</h2><ol><li>WIN+R：msconfig-&gt;「引导」-&gt;选中我们需要默认启动的操作系统-&gt;「设为默认值」</li><li>高级系统设置-&gt;高级-&gt;启动和故障恢复-&gt;设置-&gt;默认操作系统</li></ol><h1 id="无人值守部署系统">3 &nbsp&nbsp<a href="#无人值守部署系统" class="headerlink" title="无人值守部署系统"></a>无人值守部署系统</h1><h2 id="自动分区硬盘部署镜像">3.1 &nbsp&nbsp<a href="#自动分区硬盘部署镜像" class="headerlink" title="自动分区硬盘部署镜像"></a>自动分区硬盘部署镜像</h2><p><a href="https://www.tenforums.com/installation-upgrade/182945-automate-diskpart-clean-install.html">https://www.tenforums.com/installation-upgrade/182945-automate-diskpart-clean-install.html</a></p><h1 id="封装系统">4 &nbsp&nbsp<a href="#封装系统" class="headerlink" title="封装系统"></a>封装系统</h1><h2 id="关于IT天空论坛工具的锁定主页的行为">4.1 &nbsp&nbsp<a href="#关于IT天空论坛工具的锁定主页的行为" class="headerlink" title="关于IT天空论坛工具的锁定主页的行为"></a>关于IT天空论坛工具的锁定主页的行为</h2><p>锁定情况：EasyImageX2是优启通里面的系统安装器，在优启通里面是去广告的，但是换到另一个pe运行它又是带广告的；万能驱动用it天空的系统封装软件封装后可以去广告，移出来运行又会有广告。</p><p>实现原理：优启通启动的时候会在注册表生产一个当前机器的密钥字符串，然后EasyImageX2去解密判断，判断正确就免广告。同理万能驱动也是。注册表位置：<code>HKEY_LOCAL_MACHINE\SOFTWARE\EasyDrv7\</code>，但是仍然无法通过预先在系统中写入该注册表内容来去除推广包软件和主页绑定，因为是根据当前硬件信息生成一个key的。</p><h2 id="万能驱动的精简">4.2 &nbsp&nbsp<a href="#万能驱动的精简" class="headerlink" title="万能驱动的精简"></a>万能驱动的精简</h2><p>精简思路：softext文件夹内的几个安装包和驱动的压缩包是可删的，但所有e7e文件不可删（softext的e7e若删除，则会报错篡改；驱动压缩包对应的e7e若删除，则会导致卡100%的问题）。一般，驱动文件删除显卡驱动即可，oem和通用的。这种精简方式只适合在部署阶段中调用，无法在桌面环境下运行（会报错文件不完整或者软件被篡改）。如果想要精简并同时可以在桌面环境中运行的话，需要用老版的主程序替代。</p><h2 id="DISM的系统打包（备份）">4.3 &nbsp&nbsp<a href="#DISM的系统打包（备份）" class="headerlink" title="DISM的系统打包（备份）"></a>DISM的系统打包（备份）</h2><p>备份操作，会将驱动器的映像捕获到新的 .wim 文件中：</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Dism /Capture-Image /ImageFile:D:\Windows10Pro-<span class="number">2024</span>-<span class="number">04</span>-<span class="number">13</span>.wim /CaptureDir:C:\ /Name:Windows10Pro-<span class="number">2024</span>-<span class="number">04</span>-<span class="number">13</span> /compress:max</span><br></pre></td></tr></table></figure><p>可以同时指定使用配置文件来打包wim镜像，比如捕获文件时排除休眠文件<code>hiberfil.sys</code>等，参见「<a href="https://learn.microsoft.com/zh-cn/windows-hardware/manufacture/desktop/dism-configuration-list-and-wimscriptini-files-winnext?view=windows-11">DISM 配置列表文件</a>」：</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Dism /Capture-Image /ImageFile:D:\Windows10Pro-<span class="number">2024</span>-<span class="number">04</span>-<span class="number">13</span>.wim /CaptureDir:C:\ /Name:Windows10Pro-<span class="number">2024</span>-<span class="number">04</span>-<span class="number">13</span> /ConfigFile:config_list.ini /compress:max</span><br></pre></td></tr></table></figure><p>config_list.ini文件内容</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[ExclusionList]</span></span><br><span class="line">\$ntfs.log</span><br><span class="line">\hiberfil.sys</span><br><span class="line">\pagefile.sys</span><br><span class="line">\swapfile.sys</span><br><span class="line">\System Volume Information</span><br><span class="line">\RECYCLER</span><br><span class="line">\Windows\CSC</span><br><span class="line"></span><br><span class="line"><span class="section">[CompressionExclusionList]</span></span><br><span class="line">*.mp3</span><br><span class="line">*.zip</span><br><span class="line">*.cab</span><br><span class="line">\WINDOWS\inf\*.pnf</span><br></pre></td></tr></table></figure><h2 id="DISM的系统恢复（应用）">4.4 &nbsp&nbsp<a href="#DISM的系统恢复（应用）" class="headerlink" title="DISM的系统恢复（应用）"></a>DISM的系统恢复（应用）</h2><p>关于使用系统自带命令工具来操作格式化硬盘，恢复镜像等操作，实际用法可参见「<a href="https://learn.microsoft.com/zh-cn/windows-hardware/manufacture/desktop/oem-deployment-of-windows-desktop-editions-sample-scripts?view=windows-11">部署实验室示例脚本</a>」</p><p>恢复操作，此命令将对指定的分区应用 Windows 映像文件 (.wim)：</p><blockquote><p>一般推荐同时使用<code>/Verify</code>和<code>/NoRpFix</code>参数，但在我实际应用中，wim镜像打包都OK，但是还原会有概率导致出问题（<code>/NoRpFix</code>还没测试过，也可能是因为中文字符的缘故，以往测试时<code>/Name</code>参数使用中文字符<code>专业版</code>，而非<code>Pro</code>）。</p></blockquote><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dism /apply-image /imagefile:<span class="variable">%image_path%</span> /index:<span class="number">1</span> /applydir:<span class="variable">%win_drive_letter%</span>:\</span><br></pre></td></tr></table></figure><p>bcdboot重建系统引导（UEFI）：</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">%win_drive_letter%</span>:\Windows\System32\bcdboot <span class="variable">%win_drive_letter%</span>:\Windows /s <span class="variable">%efi_drive_letter%</span>: /f UEFI /l zh-cn</span><br></pre></td></tr></table></figure><h1 id="WinPE">5 &nbsp&nbsp<a href="#WinPE" class="headerlink" title="WinPE"></a>WinPE</h1><h2 id="WinPE的二次修改封装">5.1 &nbsp&nbsp<a href="#WinPE的二次修改封装" class="headerlink" title="WinPE的二次修改封装"></a>WinPE的二次修改封装</h2><h3 id="ISO镜像">5.1.1 &nbsp&nbsp<a href="#ISO镜像" class="headerlink" title="ISO镜像"></a>ISO镜像</h3><p>ISO镜像的二次修改和打包工具：<a href="http://www.anyburn.com/">AnyBurn</a>，使用软件中的「编辑镜像文件」功能即可，这样就可以完美保留原镜像的引导启动数据。（不推荐用UltraISO，界面老旧且难用，主要是ISO的引导信息不好弄）</p><h3 id="WIM镜像">5.1.2 &nbsp&nbsp<a href="#WIM镜像" class="headerlink" title="WIM镜像"></a>WIM镜像</h3><p>wim镜像的二次修改，dism使用命令参见「<a href="https://learn.microsoft.com/zh-cn/windows-hardware/manufacture/desktop/dism-image-management-command-line-options-s14?view=windows-11">DISM 映像管理命令行选项</a>」：</p><ul><li>单版本：解压后就是系统本身，这种直接解压进行二次修改，然后dism++重新打包即可，记得勾选「可启动镜像」的选项。</li><li>多版本（dism如何一直提示镜像已经被加载过，使用<code>dism /cleanup-wim</code>命令强制卸载所有镜像）<ol><li>加载wim镜像到特定的路径空文件夹：<code>dism /mount-wim /wimfile:G:\11pex64.wim /index:1 /mountdir:D:\GOF\mount</code></li><li>卸载镜像并保存更改到镜像中：<code>dism /unmount-wim /mountdir:D:\GOF\mount /commit</code></li><li>导出wim以优化镜像（如果修改映像，DISM将存储额外的资源文件，比如wim文件内新增一个目录<code>[DELETE]</code>，这会增大映像的总体大小。可以通过将映像导出到新的映像文件，实现优化该映像，即删除掉目录<code>[DELETE]</code>。）</li></ol>  <figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Dism /Export-Image /SourceImageFile:<span class="number">11</span>pex64.wim /SourceIndex:<span class="number">1</span> /DestinationImageFile:<span class="number">11</span>pex64.wim</span><br><span class="line">Dism /Export-Image /SourceImageFile:<span class="number">11</span>pex64.wim /SourceIndex:<span class="number">2</span> /DestinationImageFile:<span class="number">11</span>pex64.wim</span><br></pre></td></tr></table></figure></li></ul><h2 id="关于加载PE后出现「-windows-system32-drivers-cdrom-sys」驱动加载错误的分析">5.2 &nbsp&nbsp<a href="#关于加载PE后出现「-windows-system32-drivers-cdrom-sys」驱动加载错误的分析" class="headerlink" title="关于加载PE后出现「\windows\system32\drivers\cdrom.sys」驱动加载错误的分析"></a>关于加载PE后出现「\windows\system32\drivers\cdrom.sys」驱动加载错误的分析</h2><p>问题现象：无论是更换pe版本或者更换U盘亦或是用其他分区方案制作PE，当选择U盘PE引导项加载时，都会出现这个「\windows\system32\drivers\cdrom.sys」报错提示，无法进入系统。</p><p>问题原因：硬件稳定性引起系统层面的问题，一般是内存多一些，CPU或者硬盘有小概率可能会导致这样。</p><p>解决方法：从硬件排障手段入手排查，尝试拔插内存或者单根内存测试下是否会这样。</p><h2 id="PE内引导到特定设备">5.3 &nbsp&nbsp<a href="#PE内引导到特定设备" class="headerlink" title="PE内引导到特定设备"></a>PE内引导到特定设备</h2><p>关于自动化分区和还原系统之后，若想自动引导到硬盘系统，而非USB的PE系统，一般有如下几个方案：</p><ul><li>BIOS设置硬盘启动项：华硕主板实测无效，即使设置了BBS硬盘启动项（BBS还需要开启CSM选项保存重启），仍然是会引导至USB设备上。若设置关闭了USB的BBS，即使可以实现，但首次启动会报错提示找不到合适的启动设备。</li><li>PE通过BOOTICE工具的UEFI功能引导至BIOS界面或者修改<code>UEFI OS</code>指定为硬盘系统和引导位置（默认是指定到U盘的）</li><li>bcdedit修改引导启动项（BOOTICE好像也是通过bcdedit修改的）</li></ul><h2 id="获取特定硬盘分区的GUID">5.4 &nbsp&nbsp<a href="#获取特定硬盘分区的GUID" class="headerlink" title="获取特定硬盘分区的GUID"></a>获取特定硬盘分区的GUID</h2><ul><li>命令行程序：<code>mountvol</code></li><li>分区工具：<code>DiskGenius</code>，选择特定分区查看GUID（非分区类型GUID）</li></ul><h1 id="应答文件-unattend-xml-系统部署">6 &nbsp&nbsp<a href="#应答文件-unattend-xml-系统部署" class="headerlink" title="应答文件 (unattend.xml)系统部署"></a>应答文件 (unattend.xml)系统部署</h1><p>使用应答文件自动完成安装和部署系统，在联网的情况下，因为存在联网服务器检测系统版本和更新状态，因此比拔掉网线断网的情况会会多占用2-3分钟左右的时间。（倘若插上网线联网状态一直卡在这个阶段的话，即可能由于连接服务器失败，需手动拔掉网线，让它检测判断并跳过该阶段）</p><h1 id="参考文献">7 &nbsp&nbsp<a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>[1] 支持win7的最后一代CPU?支持win7系统推荐(支持8&#x2F;9&#x2F;10&#x2F;11&#x2F;12&#x2F;13代cpu)[EB&#x2F;OL]. <a href="http://w7.dnxtc.net/zixun/zuzhuangjiaocheng/2023-04-16/11866.html">http://w7.dnxtc.net/zixun/zuzhuangjiaocheng/2023-04-16/11866.html</a>.<br>[2] 10代11代主板装win7开机蓝屏A5解决办法[EB&#x2F;OL]. <a href="https://www.yweihu.com/post/242.html">https://www.yweihu.com/post/242.html</a>.<br>[3] 微软又给Windows11增加了限制？[EB&#x2F;OL]. <a href="https://zhuanlan.zhihu.com/p/514063607">https://zhuanlan.zhihu.com/p/514063607</a>.<br>[4] 在虚拟机上安装gho、esd（wim）系统镜像文件[EB&#x2F;OL]. <a href="https://www.cnblogs.com/-mrl/p/9634227.html">https://www.cnblogs.com/-mrl/p/9634227.html</a>.<br>[5] Methods to install Windows from WinPE[EB&#x2F;OL]. <a href="https://www.aioboot.com/en/install-windows/">https://www.aioboot.com/en/install-windows/</a>.<br>[6] 万能驱动 v7.23.925.3（2023.11.08 发布）[EB&#x2F;OL]. <a href="https://www.puresys.net/1147.html">https://www.puresys.net/1147.html</a>.<br>[7] easyImageX2和万能驱动有种奇特的现象[EB&#x2F;OL]. <a href="http://wuyou.net/forum.php?mod=viewthread&tid=422066">http://wuyou.net/forum.php?mod=viewthread&amp;tid=422066</a>.<br>[8] Force DISM to unmount&#x2F;delete a mounted Windows WIM[EB&#x2F;OL]. <a href="https://superuser.com/questions/1091544/force-dism-to-unmount-delete-a-mounted-windows-wim">https://superuser.com/questions/1091544/force-dism-to-unmount-delete-a-mounted-windows-wim</a>.<br>[9] All In One 把该用到的都封到安装镜像中！[EB&#x2F;OL]. <a href="http://m.cfan.com.cn/pcarticle/128008">http://m.cfan.com.cn/pcarticle/128008</a>.<br>[10] Booting is unsuccessful from &quot;Windows Boot Manager&quot; on the top of boot order in EFI setup. The booting is successful from Disk 0.[EB&#x2F;OL]. <a href="https://www.veritas.com/support/en_US/article.100015603">https://www.veritas.com/support/en_US/article.100015603</a>.<br>[11] BOOTICE -&gt; UEFI -&gt; UEFI boot entry configuration file ? (management of UEFI startup items)[EB&#x2F;OL]. <a href="http://reboot.pro/index.php?showtopic=21508">http://reboot.pro/index.php?showtopic=21508</a>.</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;安装系统&quot;&gt;1 &amp;nbsp&amp;nbsp&lt;a href=&quot;#安装系统&quot; class=&quot;headerlink&quot; title=&quot;安装系统&quot;&gt;&lt;/a&gt;安装系统&lt;/h1&gt;&lt;h2 id=&quot;虚拟机将gho，esd、wim等系统镜像文件加载进pe&quot;&gt;1.1</summary>
        
      
    
    
    
    <category term="troubleshooting" scheme="https://mister-kin.github.io/categories/troubleshooting/"/>
    
    
    <category term="总结" scheme="https://mister-kin.github.io/tags/%E6%80%BB%E7%BB%93/"/>
    
    <category term="windows" scheme="https://mister-kin.github.io/tags/windows/"/>
    
    <category term="排障" scheme="https://mister-kin.github.io/tags/%E6%8E%92%E9%9A%9C/"/>
    
    <category term="winpe" scheme="https://mister-kin.github.io/tags/winpe/"/>
    
    <category term="系统封装" scheme="https://mister-kin.github.io/tags/%E7%B3%BB%E7%BB%9F%E5%B0%81%E8%A3%85/"/>
    
    <category term="系统安装" scheme="https://mister-kin.github.io/tags/%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/"/>
    
  </entry>
  
  <entry>
    <title>网络排障总结</title>
    <link href="https://mister-kin.github.io/troubleshooting/network-troubleshooting/"/>
    <id>https://mister-kin.github.io/troubleshooting/network-troubleshooting/</id>
    <published>2025-11-25T19:28:14.000Z</published>
    <updated>2025-12-04T03:41:49.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="网络IP地址划分（IPv4）">1 &nbsp&nbsp<a href="#网络IP地址划分（IPv4）" class="headerlink" title="网络IP地址划分（IPv4）"></a>网络IP地址划分（IPv4）</h1><ul><li>私有地址<ul><li>A类 10.0.0.1 ~ 10.255.255.254</li><li>B类 172.16.0.1 ~ 172.31.255.254</li><li>C类 192.168.0.1 ~ 192.168.255.254</li></ul></li><li>默认子网掩码<ul><li>A 类 255.0.0.0</li><li>B类 255.255.0.0</li><li>C 类 255.255.255.0</li></ul></li><li>ip地址划分<ul><li>A 1 ~ 127 网+主+主+主</li><li>B 128 ~ 191 网+网+主+主</li><li>C 192 ~ 223 网+网+网+主</li><li>D 224 ~ 239 组播(多播)</li><li>E 240 ~ 254 科研</li></ul></li></ul><h1 id="ping工具">2 &nbsp&nbsp<a href="#ping工具" class="headerlink" title="ping工具"></a>ping工具</h1><p>ping命令是属于网络层的ICMP协议的，用于检查IP的连通性或网络连接速度，是无法用于检测IP的端口状态。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  验证本地计算机上TCP/IP协议栈是否正常工作，TCP/IP协议栈是一个整体基础套件，并非指单个协议</span></span><br><span class="line"><span class="comment"># localhost 是一个域名，在过去它指向 127.0.0.1 这个 IP 地址。在操作系统支持 ipv6 后，它同时还指向 ipv6 的地址 [::1]</span></span><br><span class="line">ping 127.0.0.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证本机 IP 地址是否配置完成或者网卡物理属性是否完好，本机IP地址：192.168.1.55</span></span><br><span class="line">ping 192.168.1.55</span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证从本机到网关的物理线路是否连通，网关地址：192.168.1.1</span></span><br><span class="line">ping 192.168.1.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以用于测试特定时长的网络连通性，例如是否存在网卡断流</span></span><br><span class="line"><span class="comment"># ping 1800次，ping每秒进行一次，1800次相当于30分钟</span></span><br><span class="line">ping qq.com -n 1800</span><br><span class="line"></span><br><span class="line"><span class="comment"># -t 持续发送Ping请求</span></span><br><span class="line"><span class="comment"># -l 1400，设置发送的 ICMP 回显请求数据包的大小 为 1400 字节。Windows 默认发送 32 字节</span></span><br><span class="line"><span class="comment"># -f，在数据包中设置 &quot;不分段&quot;（Don&#x27;t Fragment）标志。这指示数据包在传输路径中不允许被路由器分片。若路由器的MTU为1500字节，则不分段能设置最大数据为1472字节数据（1500-20字节IP头-8字节ICMP头）</span></span><br><span class="line">ping qq.com -t -l 1400 -f</span><br></pre></td></tr></table></figure><h1 id="tracert工具">3 &nbsp&nbsp<a href="#tracert工具" class="headerlink" title="tracert工具"></a>tracert工具</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示从本机到目标主机的路由信息</span></span><br><span class="line"><span class="comment"># 目标地址跟踪数据包到达目的主机的路径，可以探测网络故障是发生在哪一个位置</span></span><br><span class="line">tracert qq.com</span><br></pre></td></tr></table></figure><h1 id="telnet工具">4 &nbsp&nbsp<a href="#telnet工具" class="headerlink" title="telnet工具"></a>telnet工具</h1><ul><li>应用层协议命令，用于远程登录，也可用于检测IP的端口状态，但无法查看ping值和实现监控。</li><li>Windows系统有自带，但默认未启用，需要在「启用或关闭Windows功能」中勾选启用<code>Telnet Client</code>。</li></ul><h1 id="tcping工具">5 &nbsp&nbsp<a href="#tcping工具" class="headerlink" title="tcping工具"></a>tcping工具</h1><p>传输层协议命令。通过TCP的握手和挥手的时间差来判断端口的打开与延迟），可用于检测IP端口状态和查看ping值，即使源地址禁用ICMP协议的ping，也可以通过tcping来监控网络状态。</p><p>如下有一些三方实现的tcping仓库链接：</p><ul><li><a href="https://github.com/pouriyajamshidi/tcping">pouriyajamshidi&#x2F;tcping</a></li><li><a href="https://github.com/cloverstd/tcping">cloverstd&#x2F;tcping</a></li><li><a href="https://elifulkerson.com/projects/tcping.php">elifulkerson&#x2F;tcping</a></li></ul><h1 id="ipconfig工具（Windows）">6 &nbsp&nbsp<a href="#ipconfig工具（Windows）" class="headerlink" title="ipconfig工具（Windows）"></a>ipconfig工具（Windows）</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示本机网卡IP地址</span></span><br><span class="line">ipconfig</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示所有网络接口的配置参数</span></span><br><span class="line">ipconfig /all</span><br><span class="line"></span><br><span class="line"><span class="comment"># 刷新DNS缓存</span></span><br><span class="line">ipconfig /flushdns</span><br></pre></td></tr></table></figure><h1 id="ifconfig工具（Linux）">7 &nbsp&nbsp<a href="#ifconfig工具（Linux）" class="headerlink" title="ifconfig工具（Linux）"></a>ifconfig工具（Linux）</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示本机网卡IP地址</span></span><br><span class="line">ifconfig</span><br><span class="line">ip addr show</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示所有网络接口的配置参数</span></span><br><span class="line">ifconfig -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 刷新DNS缓存</span></span><br><span class="line"><span class="built_in">sudo</span> systemd-resolve --flush-caches</span><br></pre></td></tr></table></figure><h1 id="nslookup工具">8 &nbsp&nbsp<a href="#nslookup工具" class="headerlink" title="nslookup工具"></a>nslookup工具</h1><p>查询域名系统（DNS）记录，该工具也会自动显示出当前系统的DNS服务器地址。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询qq.com的DNS记录的IP地址</span></span><br><span class="line">nslookup qq.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># 反查IP对应的域名，该用法不常用</span></span><br><span class="line">nslookup 1.1.1.1</span><br></pre></td></tr></table></figure><h1 id="iperf3工具">9 &nbsp&nbsp<a href="#iperf3工具" class="headerlink" title="iperf3工具"></a>iperf3工具</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -c 以客户端模式运行，后面接服务端地址，-p 指定端口，-n 指定传输数据量，1T代表1TB数据</span></span><br><span class="line">iperf3 -c 192.168.1.1 -p 5201 -n 1tb</span><br><span class="line"></span><br><span class="line"><span class="comment"># -s 以服务端模式运行，-p 指定端口</span></span><br><span class="line">iperf3 -s -p 5201</span><br></pre></td></tr></table></figure><h1 id="Windows常用重置网络命令">10 &nbsp&nbsp<a href="#Windows常用重置网络命令" class="headerlink" title="Windows常用重置网络命令"></a>Windows常用重置网络命令</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重置 Windows 的网络核心组件（Winsock 目录）到初始纯净状态</span></span><br><span class="line">netsh winsock reset</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;网络IP地址划分（IPv4）&quot;&gt;1 &amp;nbsp&amp;nbsp&lt;a href=&quot;#网络IP地址划分（IPv4）&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="troubleshooting" scheme="https://mister-kin.github.io/categories/troubleshooting/"/>
    
    
    <category term="总结" scheme="https://mister-kin.github.io/tags/%E6%80%BB%E7%BB%93/"/>
    
    <category term="故障" scheme="https://mister-kin.github.io/tags/%E6%95%85%E9%9A%9C/"/>
    
    <category term="网络" scheme="https://mister-kin.github.io/tags/%E7%BD%91%E7%BB%9C/"/>
    
    <category term="排障" scheme="https://mister-kin.github.io/tags/%E6%8E%92%E9%9A%9C/"/>
    
    <category term="调试" scheme="https://mister-kin.github.io/tags/%E8%B0%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>飞牛fnOS | 二次修改AutoBangumi的RSS条目名称和URL</title>
    <link href="https://mister-kin.github.io/post-articles/2025-11/modify-autobangumi-rss-item-for-fnos/"/>
    <id>https://mister-kin.github.io/post-articles/2025-11/modify-autobangumi-rss-item-for-fnos/</id>
    <published>2025-11-24T12:30:32.000Z</published>
    <updated>2025-11-30T17:19:56.000Z</updated>
    
    <content type="html"><![CDATA[<p>一般RSS订阅链接导入到AutoBangumi之后，是无法二次修改RSS条目名称和URL的，正如AutoBangumi软件界面上没有任何UI可供用户操作修改。</p><p>但是某些情况下是想要实现二次修改，而非删除并重新导入。</p><p>以我的一个使用场景为例，以前在下载《仙逆》剧集时，使用的RSS订阅链接是基于mikan搜索结果的RSS链接<code>https://mikanime.tv/RSS/Search?searchstr=%E4%BB%99%E9%80%86</code>。因此<br>AutoBangumi自动识别该RSS条目的名称为「国漫」，而AutoBangumi会根据该名称创建创建对应名称的文件夹。</p><p>而我一直想要重命名这条RSS条目的名称和重新修改对应URL，如果考虑删除并重新导入RSS链接的话，后台qBittorrent需要重新同时接收处理一百多个下载任务。这么大量的处理任务，意味着qBittorrent将一段时间内都无法正常响应，这显然是不可接受的。</p><p>那还有没有其他办法能实现二次修改呢？其实有，从数据库角度入手即可。AutoBangumi数据库是基于SQLite，因此可以通过修改SQLite数据库文件来实现二次修改。</p><div class="flex-row"><div class="flex-column"><img data-src="/images/post-articles/2025-11/modify-autobangumi-rss-item-for-fnos/bangumi-list.webp">bangumi列表</div><div class="flex-column"><img data-src="/images/post-articles/2025-11/modify-autobangumi-rss-item-for-fnos/rss-item-change-before.webp">RSS条目</div></div><h1 id="测试平台">1 &nbsp&nbsp<a href="#测试平台" class="headerlink" title="测试平台"></a>测试平台</h1><ul><li>飞牛: fnOS 1.0.0</li><li>AutoBangumi: 3.1.18</li></ul><h1 id="准备工作">2 &nbsp&nbsp<a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><blockquote><p>当然，你也可以选择使用Navicat这类可视化工具来操作修改数据库，GUI操作比较简单，这里不再展开叙述。</p></blockquote><h2 id="SQLite命令行操作工具">2.1 &nbsp&nbsp<a href="#SQLite命令行操作工具" class="headerlink" title="SQLite命令行操作工具"></a>SQLite命令行操作工具</h2><p><code>sqlite-tools-win-x64</code>下载地址：<a href="https://www.sqlite.org/download.html">https://www.sqlite.org/download.html</a></p><p>解压<code>sqlite-tools-win-x64-3510000.zip</code>，其中的<code>sqlite3.exe</code>程序就是SQLite命令行操作工具。</p><h2 id="AutoBangumi的数据库文件">2.2 &nbsp&nbsp<a href="#AutoBangumi的数据库文件" class="headerlink" title="AutoBangumi的数据库文件"></a>AutoBangumi的数据库文件</h2><p>AutoBangumi数据库文件路径如下：</p><ul><li>文件管理路径：<code>应用文件-&gt;AutoBangumi-&gt;data-&gt;data.db</code></li><li>对应的系统原始路径：<code>/vol1/@appshare/AutoBangumi/data/data.db</code></li></ul><div class="flex-column"><img data-src="/images/post-articles/2025-11/modify-autobangumi-rss-item-for-fnos/database-path.webp">数据库文件路径</div><h2 id="AutoBangumi数据库的表结构">2.3 &nbsp&nbsp<a href="#AutoBangumi数据库的表结构" class="headerlink" title="AutoBangumi数据库的表结构"></a>AutoBangumi数据库的表结构</h2><p><code>bangumi</code>表结构和<code>rssitem</code>表结构如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">sqlite&gt; .schema bangumi</span><br><span class="line"><span class="comment"># bangumi表结构</span></span><br><span class="line">CREATE TABLE bangumi (</span><br><span class="line">        <span class="built_in">id</span> INTEGER NOT NULL,</span><br><span class="line">        official_title VARCHAR NOT NULL,</span><br><span class="line">        year VARCHAR,</span><br><span class="line">        title_raw VARCHAR NOT NULL,</span><br><span class="line">        season INTEGER NOT NULL,</span><br><span class="line">        season_raw VARCHAR,</span><br><span class="line">        group_name VARCHAR,</span><br><span class="line">        dpi VARCHAR,</span><br><span class="line">        <span class="built_in">source</span> VARCHAR,</span><br><span class="line">        subtitle VARCHAR,</span><br><span class="line">        eps_collect BOOLEAN NOT NULL,</span><br><span class="line">        <span class="string">&quot;offset&quot;</span> INTEGER NOT NULL,</span><br><span class="line">        filter VARCHAR NOT NULL,</span><br><span class="line">        rss_link VARCHAR NOT NULL,</span><br><span class="line">        poster_link VARCHAR,</span><br><span class="line">        added BOOLEAN NOT NULL,</span><br><span class="line">        rule_name VARCHAR,</span><br><span class="line">        save_path VARCHAR,</span><br><span class="line">        deleted BOOLEAN NOT NULL,</span><br><span class="line">        PRIMARY KEY (<span class="built_in">id</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">sqlite&gt; .schema rssitem</span><br><span class="line"><span class="comment"># rssitem表结构</span></span><br><span class="line">CREATE TABLE rssitem (</span><br><span class="line">        <span class="built_in">id</span> INTEGER NOT NULL,</span><br><span class="line">        name VARCHAR,</span><br><span class="line">        url VARCHAR NOT NULL,</span><br><span class="line">        aggregate BOOLEAN NOT NULL,</span><br><span class="line">        parser VARCHAR NOT NULL,</span><br><span class="line">        enabled BOOLEAN NOT NULL,</span><br><span class="line">        PRIMARY KEY (<span class="built_in">id</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h1 id="实操演示：修改RSS条目名称和URL">3 &nbsp&nbsp<a href="#实操演示：修改RSS条目名称和URL" class="headerlink" title="实操演示：修改RSS条目名称和URL"></a>实操演示：修改RSS条目名称和URL</h1><h2 id="停用应用并下载数据库文件">3.1 &nbsp&nbsp<a href="#停用应用并下载数据库文件" class="headerlink" title="停用应用并下载数据库文件"></a>停用应用并下载数据库文件</h2><p>在下载<code>data.db</code>文件之前，需要先在「应用中心」停用AutoBangumi应用，避免有新数据写入。</p><h2 id="修改数据库中的数据">3.2 &nbsp&nbsp<a href="#修改数据库中的数据" class="headerlink" title="修改数据库中的数据"></a>修改数据库中的数据</h2><blockquote><p>以下操作均为在Windows系统中使用Git Bash终端执行。</p></blockquote><p>接下来，以修改一条RSS条目的名称和URL为例，具体操作步骤：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打开data.db数据库文件</span></span><br><span class="line">./sqlite3 data.db</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列举所有表名</span></span><br><span class="line">sqlite&gt; .tables</span><br><span class="line">bangumi  rssitem  torrent  user</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询bangumi表中数据</span></span><br><span class="line">sqlite&gt; <span class="keyword">select</span> * from bangumi;</span><br><span class="line">3|仙逆||Renegade Immortal|1||GM-Team|1080P||GB|1|0|720,\d+-\d|https://mikanime.tv/RSS/Search?searchstr=%E4%BB%99%E9%80%86|posters/d7bfd97a.jpg|1||/vol1/1000/下载/仙逆/Season 1|0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询rssitem表中数据</span></span><br><span class="line">sqlite&gt; <span class="keyword">select</span> * from rssitem;</span><br><span class="line">3|国漫|https://mikanime.tv/RSS/Search?searchstr=%E4%BB%99%E9%80%86|0|mikan|1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改数据库中的数据</span></span><br><span class="line">sqlite&gt; update rssitem <span class="built_in">set</span> name=<span class="string">&#x27;仙逆&#x27;</span> <span class="built_in">where</span> <span class="built_in">id</span>=3;</span><br><span class="line">sqlite&gt; update rssitem <span class="built_in">set</span> url=<span class="string">&#x27;https://mikanime.tv/RSS/Search?searchstr=GM-Team+%E4%BB%99%E9%80%86&#x27;</span> <span class="built_in">where</span> <span class="built_in">id</span>=3;</span><br><span class="line">sqlite&gt; update bangumi <span class="built_in">set</span> rss_link =<span class="string">&#x27;https://mikanime.tv/RSS/Search?searchstr=GM-Team+%E4%BB%99%E9%80%86&#x27;</span> <span class="built_in">where</span> <span class="built_in">id</span>=3;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 二次查询表中数据，以确认查案最新数据</span></span><br><span class="line">sqlite&gt; <span class="keyword">select</span> * from bangumi;</span><br><span class="line">3|仙逆||Renegade Immortal|1||GM-Team|1080P||GB|1|0|720,\d+-\d|https://mikanime.tv/RSS/Search?searchstr=GM-Team+%E4%BB%99%E9%80%86|posters/d7bfd97a.jpg|1||/vol1/1000/下载/仙逆/Season 1|0</span><br><span class="line"></span><br><span class="line">sqlite&gt; <span class="keyword">select</span> * from rssitem;</span><br><span class="line">3|仙逆|https://mikanime.tv/RSS/Search?searchstr=GM-Team+%E4%BB%99%E9%80%86|0|mikan|1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 退出sqlite提示符</span></span><br><span class="line">sqlite&gt; .quit</span><br></pre></td></tr></table></figure><p>注：如果修改RSS条目中的URL字段的话，建议同时更新<code>rssitem</code>和<code>bangumi</code>两个表的对应数据，避免出现潜在问题。</p><h2 id="上传覆盖数据库文件并重启应用">3.3 &nbsp&nbsp<a href="#上传覆盖数据库文件并重启应用" class="headerlink" title="上传覆盖数据库文件并重启应用"></a>上传覆盖数据库文件并重启应用</h2><p>修改完成后，将修改后的<code>data.db</code>文件上传到<code>应用文件-&gt;AutoBangumi-&gt;data-&gt;data.db</code>，覆盖原始的<code>data.db</code>文件。</p><p>然后重新启用AutoBangumi应用，即可看到修改后的RSS条目名称和URL。</p><div class="flex-column"><img data-src="/images/post-articles/2025-11/modify-autobangumi-rss-item-for-fnos/rss-item-change-after.webp">修改后的RSS条目</div>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;一般RSS订阅链接导入到AutoBangumi之后，是无法二次修改RSS条目名称和URL的，正如AutoBangumi软件界面上没有任何UI可供用户操作修改。&lt;/p&gt;
&lt;p&gt;但是某些情况下是想要实现二次修改，而非删除并重新导入。&lt;/p&gt;
&lt;p&gt;以我的一个使用场景为例，以前在</summary>
        
      
    
    
    
    <category term="post-articles" scheme="https://mister-kin.github.io/categories/post-articles/"/>
    
    <category term="2025-11" scheme="https://mister-kin.github.io/categories/post-articles/2025-11/"/>
    
    
    <category term="fnOS" scheme="https://mister-kin.github.io/tags/fnOS/"/>
    
    <category term="飞牛" scheme="https://mister-kin.github.io/tags/%E9%A3%9E%E7%89%9B/"/>
    
    <category term="HomeLab" scheme="https://mister-kin.github.io/tags/HomeLab/"/>
    
    <category term="AutoBangumi" scheme="https://mister-kin.github.io/tags/AutoBangumi/"/>
    
    <category term="mikan" scheme="https://mister-kin.github.io/tags/mikan/"/>
    
    <category term="NAS" scheme="https://mister-kin.github.io/tags/NAS/"/>
    
  </entry>
  
  <entry>
    <title>三种方法屏蔽PVE虚拟化系统无有效订阅提示弹窗</title>
    <link href="https://mister-kin.github.io/post-articles/2025-11/three-ways-disable-subscribe-for-pve/"/>
    <id>https://mister-kin.github.io/post-articles/2025-11/three-ways-disable-subscribe-for-pve/</id>
    <published>2025-11-22T14:13:13.000Z</published>
    <updated>2025-11-23T16:19:04.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言">1 &nbsp&nbsp<a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>之前在探索<a href="/post-articles/2025-11/correct-way-disable-subscribe-for-pve9x/">正确屏蔽PVE 9.x版本系统无有效订阅提示弹窗的方法</a>时，浏览了网络上不少相关技术帖子，累计总结记录了三种方法。今天来聊聊这三种方法的原理和不同点。</p><h1 id="方法一：修改订阅状态检测逻辑">2 &nbsp&nbsp<a href="#方法一：修改订阅状态检测逻辑" class="headerlink" title="方法一：修改订阅状态检测逻辑"></a>方法一：修改订阅状态检测逻辑</h1><p>这是笔者自行探索总结出来的方法。</p><ul><li>原理：通过修改订阅状态检测的条件判断，将严格不等于<code>!==</code>改为严格等于<code>===</code>，本质上仅替换一个字符。当系统检测订阅状态时，原本需要状态为&quot;active&quot;才不显示警告，修改后只要状态不是&quot;active&quot;就不会触发警告弹窗，从而实现屏蔽了未订阅提示。</li><li>优缺点：<strong>完美适配PVE 9.x版本</strong>，不会导致PVE的WEB后台「软件包版本」按钮无法响应。</li><li>适用PVE版本范围：经测试PVE 8.x和PVE 9.x版本有效，理论上兼容PVE 7.x及以前版本。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js.bak</span><br><span class="line"></span><br><span class="line">line_num=$(grep -n <span class="string">&quot;res.data.status.toLowerCase() !== &#x27;active&#x27;&quot;</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js | <span class="built_in">head</span> -1 | <span class="built_in">cut</span> -d: -f1)</span><br><span class="line">sed -i <span class="string">&quot;<span class="variable">$&#123;line_num&#125;</span>s/!==/===/&quot;</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js</span><br><span class="line"></span><br><span class="line">systemctl restart pveproxy</span><br></pre></td></tr></table></figure><h1 id="方法二：禁用弹窗显示函数">3 &nbsp&nbsp<a href="#方法二：禁用弹窗显示函数" class="headerlink" title="方法二：禁用弹窗显示函数"></a>方法二：禁用弹窗显示函数</h1><p>该方法是从Github上<a href="https://github.com/Mapleawaa/PVE-Tools-9">PVE-Tools-9</a>项目中找到的。</p><ul><li>原理：通过将Ext.Msg.show函数调用替换为void表达式，使弹窗显示函数失效。void操作符会计算表达式但返回undefined，从而阻止了弹窗的实际显示。</li><li>优缺点：<strong>不能完美适配PVE 9.x版本</strong>，导致PVE的WEB后台「软件包版本」按钮无法响应。</li><li>适用PVE版本范围：理论上兼容所有版本。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js.bak</span><br><span class="line"></span><br><span class="line">sed -Ezi <span class="string">&quot;s/(Ext.Msg.show\(\&#123;\s+title: gettext\(&#x27;No valid sub)/void\(\&#123; \/\/\1/g&quot;</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js</span><br><span class="line"></span><br><span class="line">systemctl restart pveproxy</span><br></pre></td></tr></table></figure><h1 id="方法三：重写条件判断表达式">4 &nbsp&nbsp<a href="#方法三：重写条件判断表达式" class="headerlink" title="方法三：重写条件判断表达式"></a>方法三：重写条件判断表达式</h1><p>这是网络上流传最广的方法，绝大部分教程都是基于此方法。</p><ul><li>原理：彻底重写订阅检测的条件判断逻辑，将复杂的条件检查替换为简单的false值。通过两个sed命令分别处理条件语句的起始部分和状态检测部分，使整个条件判断永远返回false，从而跳过弹窗显示代码。</li><li>优缺点：<strong>同方法二，不能完美适配PVE 9.x版本</strong>，会导致「软件包版本」按钮无法响应。</li><li>适用PVE版本范围：理论上兼容所有版本。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js.bak</span><br><span class="line"></span><br><span class="line">sed -i <span class="string">&quot;s/if (res === null || res === undefined || \!res || res/if(/g&quot;</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js</span><br><span class="line">sed -i <span class="string">&quot;s/.data.status.toLowerCase() !== &#x27;active&#x27;/false/g&quot;</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js</span><br><span class="line"></span><br><span class="line">systemctl restart pveproxy</span><br></pre></td></tr></table></figure><h1 id="后记">5 &nbsp&nbsp<a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>上述三种方法同样适用于屏蔽PBS备份系统的无有效订阅提示弹窗，即<code>Proxmox Backup Server</code>，修改文件操作完成之后重启PBS代理服务即可。</p><p>此外，对于PBS系统来说，这三种方法均能正确实现屏蔽作用，无其他影响。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart proxmox-backup-proxy</span><br></pre></td></tr></table></figure><h1 id="参考文献">6 &nbsp&nbsp<a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>[1] PVE-Tools[EB&#x2F;OL]. <a href="https://github.com/Mapleawaa/PVE-Tools-9/blob/main/PVE-Tools.sh">https://github.com/Mapleawaa/PVE-Tools-9/blob/main/PVE-Tools.sh</a>.</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;1 &amp;nbsp&amp;nbsp&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;之前在探索&lt;a</summary>
        
      
    
    
    
    <category term="post-articles" scheme="https://mister-kin.github.io/categories/post-articles/"/>
    
    <category term="2025-11" scheme="https://mister-kin.github.io/categories/post-articles/2025-11/"/>
    
    
    <category term="虚拟化系统" scheme="https://mister-kin.github.io/tags/%E8%99%9A%E6%8B%9F%E5%8C%96%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="HomeLab" scheme="https://mister-kin.github.io/tags/HomeLab/"/>
    
    <category term="PVE" scheme="https://mister-kin.github.io/tags/PVE/"/>
    
    <category term="Proxmox" scheme="https://mister-kin.github.io/tags/Proxmox/"/>
    
    <category term="服务器" scheme="https://mister-kin.github.io/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    <category term="屏蔽订阅弹窗" scheme="https://mister-kin.github.io/tags/%E5%B1%8F%E8%94%BD%E8%AE%A2%E9%98%85%E5%BC%B9%E7%AA%97/"/>
    
    <category term="PBS" scheme="https://mister-kin.github.io/tags/PBS/"/>
    
  </entry>
  
  <entry>
    <title>正确屏蔽PVE 9.x版本系统无有效订阅提示弹窗的方法</title>
    <link href="https://mister-kin.github.io/post-articles/2025-11/correct-way-disable-subscribe-for-pve9x/"/>
    <id>https://mister-kin.github.io/post-articles/2025-11/correct-way-disable-subscribe-for-pve9x/</id>
    <published>2025-11-22T04:52:00.000Z</published>
    <updated>2025-11-23T16:19:04.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言">1 &nbsp&nbsp<a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>之前在<a href="/post-articles/2025-10/pve8to9/">PVE虚拟化系统升级小记（8.x-&gt;9.x）</a>中有提到过，PVE 9.x版本执行屏蔽无有效订阅提示弹窗的老方法之后，会导致PVE的WEB后台「软件包版本」按钮无法响应。</p><p>经过重新对<code>/usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js</code>文件代码的分析和修改测试，笔者总结出另一种可行的新方法。</p><h1 id="问题分析">2 &nbsp&nbsp<a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h1><p>PVE 9.x的版本，除了每次登录WEB后台会显示无有效订阅提示弹窗之外，在点击「软件包版本」按钮时，首先也会弹出「无有效订阅」的提示弹窗，然后再跳转到软件包版本页面。</p><p>以前版本没有这种逻辑。笔者推测应该是这个原因导致旧方法不能完美适配PVE 9.x版本。</p><div class="flex-column"><img data-src="/images/software/pve/pve9x-check-package-version.webp">PVE 9.x版本「软件包版本」按钮的逻辑</div><p>旧方法的命令操作步骤：该方法核心原理修改替换关系表达式条件，但无法完美适配PVE 9.x版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js.bak</span><br><span class="line"></span><br><span class="line">sed -i <span class="string">&quot;s/if (res === null || res === undefined || \!res || res/if(/g&quot;</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js</span><br><span class="line">sed -i <span class="string">&quot;s/.data.status.toLowerCase() !== &#x27;active&#x27;/false/g&quot;</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js</span><br><span class="line"></span><br><span class="line">systemctl restart pveproxy</span><br></pre></td></tr></table></figure><h1 id="新方法：完美适配PVE-9-x版本">3 &nbsp&nbsp<a href="#新方法：完美适配PVE-9-x版本" class="headerlink" title="新方法：完美适配PVE 9.x版本"></a>新方法：完美适配PVE 9.x版本</h1><p>新方法的核心原理是替换关系表达式符号，其本质仅仅是替换一个字符而已，即将<code>!==</code>替换为<code>===</code>，不同于旧方法原理的修改替换关系表达式条件。</p><p>新方法的命令操作步骤：新方法完美适配PVE 9.x版本，不会导致PVE的WEB后台「软件包版本」按钮无法响应。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js.bak</span><br><span class="line"></span><br><span class="line">line_num=$(grep -n <span class="string">&quot;res.data.status.toLowerCase() !== &#x27;active&#x27;&quot;</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js | <span class="built_in">head</span> -1 | <span class="built_in">cut</span> -d: -f1)</span><br><span class="line">sed -i <span class="string">&quot;<span class="variable">$&#123;line_num&#125;</span>s/!==/===/&quot;</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js</span><br><span class="line"></span><br><span class="line">systemctl restart pveproxy</span><br></pre></td></tr></table></figure><div class="flex-column"><img data-src="/images/software/pve/pve9x-check-package-version-no-popup.webp">新方法的效果：完美适配PVE 9.x版本</div><h1 id="后记">4 &nbsp&nbsp<a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>这个新方法同样适用于屏蔽PBS备份系统的无有效订阅提示弹窗，即<code>Proxmox Backup Server</code>，修改文件操作完成之后重启PBS代理服务即可。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart proxmox-backup-proxy</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;1 &amp;nbsp&amp;nbsp&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;之前在&lt;a</summary>
        
      
    
    
    
    <category term="post-articles" scheme="https://mister-kin.github.io/categories/post-articles/"/>
    
    <category term="2025-11" scheme="https://mister-kin.github.io/categories/post-articles/2025-11/"/>
    
    
    <category term="虚拟化系统" scheme="https://mister-kin.github.io/tags/%E8%99%9A%E6%8B%9F%E5%8C%96%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="HomeLab" scheme="https://mister-kin.github.io/tags/HomeLab/"/>
    
    <category term="PVE" scheme="https://mister-kin.github.io/tags/PVE/"/>
    
    <category term="Proxmox" scheme="https://mister-kin.github.io/tags/Proxmox/"/>
    
    <category term="服务器" scheme="https://mister-kin.github.io/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    <category term="屏蔽订阅弹窗" scheme="https://mister-kin.github.io/tags/%E5%B1%8F%E8%94%BD%E8%AE%A2%E9%98%85%E5%BC%B9%E7%AA%97/"/>
    
    <category term="PBS" scheme="https://mister-kin.github.io/tags/PBS/"/>
    
  </entry>
  
  <entry>
    <title>著名激活工具MAS更新v3.8</title>
    <link href="https://mister-kin.github.io/post-articles/2025-11/mas-38/"/>
    <id>https://mister-kin.github.io/post-articles/2025-11/mas-38/</id>
    <published>2025-11-12T11:47:31.000Z</published>
    <updated>2025-11-12T15:26:54.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言">1 &nbsp&nbsp<a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Gtihub上著名的Windows和Office激活工具Microsoft Activation Scripts (MAS)，最近更新到了v3.8版本。</p><p>本次更新移除了KMS38激活的功能，主要原因是26100.7019内部版本号开始，该激活方式已失效。推荐用户改用HWID或TSforge方式激活。</p><p>最新版MAS激活脚本文件获取方式见文章末尾。</p><h1 id="v3-8版本更新内容">2 &nbsp&nbsp<a href="#v3-8版本更新内容" class="headerlink" title="v3.8版本更新内容"></a>v3.8版本更新内容</h1><ul><li>HWID<ul><li>为WNC版本添加了激活支持。</li></ul></li><li>KMS38<ul><li>从内部版本26100.7019开始，Microsoft完全弃用了clip-based的KMS许可证迁移功能。结论是KMS38已失效。详细信息参阅「<a href="https://massgrave.dev/kms38">kms38</a>」。</li><li>KMS38现已从MAS脚本中删除。建议用户改用HWID或TSforge激活。</li><li>如果仍希望在旧的Windows版本上使用它或将其保留用于存档目的，可以从<a href="https://github.com/massgravel/Microsoft-Activation-Scripts/blob/ab6b572af940fa0ea4255b327eb6f69a274d6725/MAS/Separate-Files-Version/Activators/KMS38_Activation.cmd">此处</a>下载脚本。</li></ul></li><li>TSforge<ul><li>从内部版本26100.7019开始，如果实际的期限更长，Windows将始终显示并保持在180天剩余的KMS宽限期。KMS4k信息将根据此更改进行更新。</li><li>添加了对PPIPro的ESU支持（在19045.6388中添加）。</li><li>修复了筛选中ESUID未显示在手动选项中的问题。</li><li>添加了刷新ESU状态的命令。</li></ul></li><li>更改Windows版本<ul><li>更改了密钥首选项顺序，以便可以安装HWID密钥。</li><li>为“IoTEnterprise”版本添加了[GAC,notLTSC]信息，以避免与其LTSC版本“IoTEnterpriseS”混淆。</li></ul></li><li>解决问题<ul><li>该脚本现在将自动选择Office16.0C2R的“快速修复”选项。</li><li>在重建ClipSVC许可证之前添加了更多条件。</li></ul></li><li>检查激活状态<ul><li>修复了CAS中的一个问题，即当ADBA处于活动状态时，会显示KMS客户端信息。</li></ul></li><li>其他<ul><li>错误处理和信息方面的其他一些小改进。</li></ul></li></ul><h1 id="最新版MAS下载地址">3 &nbsp&nbsp<a href="#最新版MAS下载地址" class="headerlink" title="最新版MAS下载地址"></a>最新版MAS下载地址</h1><h2 id="PowerShell获取">3.1 &nbsp&nbsp<a href="#PowerShell获取" class="headerlink" title="PowerShell获取"></a>PowerShell获取</h2><ul><li>Windows 8, 10, 11：<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">irm</span> https://get.activated.win | <span class="built_in">iex</span></span><br></pre></td></tr></table></figure></li><li>如果上面一条的命令不生效，例如网络被阻断，可以尝试这条命令（适用于Windows10或者11）：<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">iex</span> (curl.exe <span class="literal">-s</span> <span class="literal">--doh-url</span> https://<span class="number">1.1</span>.<span class="number">1.1</span>/dns<span class="literal">-query</span> https://get.activated.win | <span class="built_in">Out-String</span>)</span><br></pre></td></tr></table></figure></li><li>Windows 7及之后版本：<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">iex</span> ((<span class="built_in">New-Object</span> Net.WebClient).DownloadString(<span class="string">&#x27;https://get.activated.win&#x27;</span>))</span><br></pre></td></tr></table></figure></li></ul><h2 id="传统下载方式">3.2 &nbsp&nbsp<a href="#传统下载方式" class="headerlink" title="传统下载方式"></a>传统下载方式</h2><ul><li><a href="https://dev.azure.com/massgrave/Microsoft-Activation-Scripts/_apis/git/repositories/Microsoft-Activation-Scripts/items?path=/MAS/All-In-One-Version-KL/MAS_AIO.cmd&download=true">MAS_AIO.cmd</a></li><li><a href="https://dev.azure.com/massgrave/Microsoft-Activation-Scripts/_apis/git/repositories/Microsoft-Activation-Scripts/items?format=zip">full ZIP</a></li></ul><h1 id="参考文献">4 &nbsp&nbsp<a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>[1] v3.8 R.I.P. KMS38[EB&#x2F;OL]. <a href="https://github.com/massgravel/Microsoft-Activation-Scripts/releases/tag/3.8">https://github.com/massgravel/Microsoft-Activation-Scripts/releases/tag/3.8</a>.</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;1 &amp;nbsp&amp;nbsp&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;Gtihub上著名的Windows和Office激活工具Microsoft Activation Scripts</summary>
        
      
    
    
    
    <category term="post-articles" scheme="https://mister-kin.github.io/categories/post-articles/"/>
    
    <category term="2025-11" scheme="https://mister-kin.github.io/categories/post-articles/2025-11/"/>
    
    
    <category term="脚本" scheme="https://mister-kin.github.io/tags/%E8%84%9A%E6%9C%AC/"/>
    
    <category term="Windows" scheme="https://mister-kin.github.io/tags/Windows/"/>
    
    <category term="激活工具" scheme="https://mister-kin.github.io/tags/%E6%BF%80%E6%B4%BB%E5%B7%A5%E5%85%B7/"/>
    
    <category term="Office" scheme="https://mister-kin.github.io/tags/Office/"/>
    
    <category term="MAS" scheme="https://mister-kin.github.io/tags/MAS/"/>
    
    <category term="免费" scheme="https://mister-kin.github.io/tags/%E5%85%8D%E8%B4%B9/"/>
    
    <category term="开源" scheme="https://mister-kin.github.io/tags/%E5%BC%80%E6%BA%90/"/>
    
  </entry>
  
  <entry>
    <title>Windows累积更新KB5068861发布推送：修复「任务管理器」无法正常结束的BUG</title>
    <link href="https://mister-kin.github.io/post-articles/2025-11/windows-kb5068861/"/>
    <id>https://mister-kin.github.io/post-articles/2025-11/windows-kb5068861/</id>
    <published>2025-11-12T09:14:06.000Z</published>
    <updated>2025-11-12T10:32:16.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言">1 &nbsp&nbsp<a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>上月末，微软推送KB5067036累积更新后，引入了一个新BUG会导致「关闭任务管理器后，任务管理器进程可能会继续在后台运行」。</p><p>该KB5067036累积更新，适用于系统内部版本号26x00.7019，详细对应系统内部版本号26200.7019（即Windows 11 25H2）和26100.7019（即Windows 11 24H2）。</p><p>这些未能正确关闭的进程每个会占用系统内存资源，长期使用的情况下会导致整体系统性能受到影响，对于那些习惯使用睡眠或者休眠模式的用户来说，尤为明显。系统在长期未重启的情况下，日常使用任务管理器的过程中，累积了很多后台任务管理器进程，导致用户的内存资源在不知不觉中被吃掉。</p><h1 id="BUG确认被修复">2 &nbsp&nbsp<a href="#BUG确认被修复" class="headerlink" title="BUG确认被修复"></a>BUG确认被修复</h1><p>今日早些时候，微软终于推送了KB5068861累积更新，修复了这个BUG。</p><p><strong>笔者安装该累积更新后实测，确认该BUG确实已被修复了。强烈推荐26x00.7019版本的用户下载安装该累积更新。</strong></p><p>通过反复打开并关闭任务管理器，然后通过终端尝试查找关闭<code>taskmgr.exe</code>进程：</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">taskkill</span> /f /im taskmgr.exe</span><br></pre></td></tr></table></figure><p>系统提示无法找到<code>taskmgr.exe</code>进程：</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ERROR: <span class="title">The</span> <span class="title">process</span> &quot;<span class="title">taskmgr.exe</span>&quot; <span class="title">not</span> <span class="title">found</span>.</span></span><br></pre></td></tr></table></figure><h1 id="KB5068861累积更新内容">3 &nbsp&nbsp<a href="#KB5068861累积更新内容" class="headerlink" title="KB5068861累积更新内容"></a>KB5068861累积更新内容</h1><p>KB5068861累积更新，适用于系统内部版本号26x00.7171，详细对应系统内部版本号26200.7171（即Windows 11 25H2）和26100.7171（即Windows 11 24H2）。该版本大致更新内容如下：</p><ul><li>[游戏]<ul><li>已修复：此更新解决了影响游戏手持设备的问题。 这些设备无法保持低功耗状态，这导致电池消耗得更快。</li><li>已修复：此更新解决了某些手持游戏设备上的问题，即使用内置游戏板登录后，控制器可能在大约五秒钟内在应用中不响应，从而导致延迟。 提交密码或 PIN 后，登录屏幕上的触摸键盘会自动隐藏。</li></ul></li><li>[存储] 已修复：此更新解决了创建存储群集时可能导致某些存储空间不可访问或存储空间直通失败的问题。</li><li>[系统实用工具 (已知问题)] 已修复：此更新解决了以下问题：使用“关闭”按钮关闭任务管理器不会完全结束该过程，从而留下可能会随时间推移降低性能的后台实例。  安装 KB5067036 后可能会发生这种情况。</li><li>[语音访问] 已修复：此更新解决了未连接麦克风且未安装语音模型时，语音 访问 在初始设置期间失败的问题。</li><li>[窗口管理] 已修复：此更新解决了选择桌面可能会意外打开 任务视图的问题。</li><li>[网络]已修复：此更新修复了 HTTP.sys 请求分析器中的问题，这是一个读取和处理 HTTP 请求的 Windows 组件。 分析程序允许在 HTTP&#x2F;1.1 区块扩展内单行中断，其中 RFC 9112 标准要求回车和换行符 (CRLF) 序列终止每个区块。 当前端代理是设置的一部分时，这可能会导致分析差异。<br>若要关闭严格分析，请使用以下注册表项：<br>注册表项： [HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Http\Parameters]<br>注册表值： &quot;HttpAllowLenientChunkExtParsing&quot;&#x3D;dword:00000001<br>要设置的数据：1</li></ul><h1 id="参考文献">4 &nbsp&nbsp<a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>[1] November 11, 2025—KB5068861 (OS Builds 26200.7171 and 26100.7171)[EB&#x2F;OL]. <a href="https://support.microsoft.com/en-us/topic/november-11-2025-kb5068861-os-builds-26200-7171-and-26100-7171-2e0512e4-3ad4-4da6-958c-a468a1af949e">https://support.microsoft.com/en-us/topic/november-11-2025-kb5068861-os-builds-26200-7171-and-26100-7171-2e0512e4-3ad4-4da6-958c-a468a1af949e</a>.</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;1 &amp;nbsp&amp;nbsp&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="post-articles" scheme="https://mister-kin.github.io/categories/post-articles/"/>
    
    <category term="2025-11" scheme="https://mister-kin.github.io/categories/post-articles/2025-11/"/>
    
    
    <category term="Windows" scheme="https://mister-kin.github.io/tags/Windows/"/>
    
    <category term="KB5068861" scheme="https://mister-kin.github.io/tags/KB5068861/"/>
    
    <category term="累积更新" scheme="https://mister-kin.github.io/tags/%E7%B4%AF%E7%A7%AF%E6%9B%B4%E6%96%B0/"/>
    
  </entry>
  
  <entry>
    <title>PVE清理旧内核</title>
    <link href="https://mister-kin.github.io/post-articles/2025-11/pve-kernel-cleaner/"/>
    <id>https://mister-kin.github.io/post-articles/2025-11/pve-kernel-cleaner/</id>
    <published>2025-11-11T12:08:55.000Z</published>
    <updated>2025-11-11T14:15:49.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言">1 &nbsp&nbsp<a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>家里HomeLab的PVE虚拟化系统服务器，历经几次小版本升级和一次大版本更新，系统上已经有不少个内核。</p><p>一般来说，<code>apt autoremove</code>命令可以完成清理卸载内核相关的文件，但dpkg数据库一般仍有保留相关包的记录。</p><p>今天来聊聊如何彻底清除PVE系统上的旧内核，包括从dpkg数据库中移除记录。</p><h1 id="查看PVE现有的内核">2 &nbsp&nbsp<a href="#查看PVE现有的内核" class="headerlink" title="查看PVE现有的内核"></a>查看PVE现有的内核</h1><p><code>proxmox-boot-tool</code>工具默认会配置当前运行的内核以及两个最新安装的内核，因此在保留最新两个内核的情况下，清理剩余的旧内核即可。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前内核版本</span></span><br><span class="line"><span class="built_in">uname</span> -r</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看proxmox-boot-tool工具配置选择的用于启动booting的内核</span></span><br><span class="line">proxmox-boot-tool kernel list</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询所有包含kernel关键词的包名及其状态（已安装/已卸载），输出格式为：&lt;包名&gt; &lt;状态&gt;</span></span><br><span class="line">dpkg --get-selections | grep kernel</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询PVE内核包并自动排序，排除当前内核版本，输出格式为：&lt;内核版本&gt;</span></span><br><span class="line">dpkg --list | grep <span class="string">&#x27;kernel-.*-pve&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | grep -v <span class="string">&quot;6.14.11-4-pve&quot;</span> | <span class="built_in">sort</span> -V</span><br></pre></td></tr></table></figure><p>以笔者的情况为例（上述命令输出如下结果），因此后续清理步骤中，保留输出结果中两个内核版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当前内核版本</span></span><br><span class="line">6.14.11-4-pve</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用于启动booting的内核</span></span><br><span class="line">Manually selected kernels:</span><br><span class="line">None.</span><br><span class="line"></span><br><span class="line">Automatically selected kernels:</span><br><span class="line">6.14.11-4-pve</span><br><span class="line">6.8.12-16-pve</span><br><span class="line"></span><br><span class="line"><span class="comment"># 所有kernel包名及其状态</span></span><br><span class="line"><span class="comment"># 有些包状态显示为已卸载，像apt autoremove卸载清理之后就会这样，但dpkg数据库中还存在包的记录，dpkg会标记为已卸载</span></span><br><span class="line">proxmox-default-kernel                          install</span><br><span class="line">proxmox-kernel-6.14                             install</span><br><span class="line">proxmox-kernel-6.14.11-4-pve-signed             install</span><br><span class="line">proxmox-kernel-6.8                              install</span><br><span class="line">proxmox-kernel-6.8.12-10-pve-signed             deinstall</span><br><span class="line">proxmox-kernel-6.8.12-11-pve-signed             deinstall</span><br><span class="line">proxmox-kernel-6.8.12-16-pve-signed             install</span><br><span class="line">proxmox-kernel-6.8.12-9-pve-signed              deinstall</span><br><span class="line">proxmox-kernel-helper                           install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 排除当前内核版本的所有内核包的排序结果</span></span><br><span class="line">proxmox-kernel-6.8.12-9-pve-signed</span><br><span class="line">proxmox-kernel-6.8.12-10-pve-signed</span><br><span class="line">proxmox-kernel-6.8.12-11-pve-signed</span><br><span class="line">proxmox-kernel-6.8.12-16-pve-signed</span><br></pre></td></tr></table></figure><h1 id="清理内核的方法">3 &nbsp&nbsp<a href="#清理内核的方法" class="headerlink" title="清理内核的方法"></a>清理内核的方法</h1><h2 id="方法一：使用社区的内核清理脚本kernel-clean-sh">3.1 &nbsp&nbsp<a href="#方法一：使用社区的内核清理脚本kernel-clean-sh" class="headerlink" title="方法一：使用社区的内核清理脚本kernel-clean.sh"></a>方法一：使用社区的内核清理脚本<code>kernel-clean.sh</code></h2><p>下载执行脚本<code>kernel-clean.sh</code>，输入想要卸载的内核版本序列号，有多个则用英文逗号<code>,</code>间隔</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://raw.githubusercontent.com/community-scripts/ProxmoxVE/main/tools/pve/kernel-clean.sh</span><br><span class="line"><span class="built_in">chmod</span> +x kernel-clean.sh</span><br><span class="line">./kernel-clean.sh</span><br></pre></td></tr></table></figure><div class="flex-column"><img data-src="/images/software/pve/kernel-cleaner.webp">kernel-clean.sh清理过程</div><h2 id="方法二：手动清理内核">3.2 &nbsp&nbsp<a href="#方法二：手动清理内核" class="headerlink" title="方法二：手动清理内核"></a>方法二：手动清理内核</h2><p>以卸载<code>proxmox-kernel-6.8.12-11-pve-signed</code>内核包为例，执行如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt purge -y proxmox-kernel-6.8.12-11-pve-signed</span><br><span class="line">apt autoremove -y</span><br><span class="line">update-grub</span><br></pre></td></tr></table></figure><div class="flex-column"><img data-src="/images/software/pve/kernel-cleaner-manual.webp">手动清理内核过程</div>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;1 &amp;nbsp&amp;nbsp&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="post-articles" scheme="https://mister-kin.github.io/categories/post-articles/"/>
    
    <category term="2025-11" scheme="https://mister-kin.github.io/categories/post-articles/2025-11/"/>
    
    
    <category term="虚拟化系统" scheme="https://mister-kin.github.io/tags/%E8%99%9A%E6%8B%9F%E5%8C%96%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="HomeLab" scheme="https://mister-kin.github.io/tags/HomeLab/"/>
    
    <category term="PVE" scheme="https://mister-kin.github.io/tags/PVE/"/>
    
    <category term="Proxmox" scheme="https://mister-kin.github.io/tags/Proxmox/"/>
    
    <category term="服务器" scheme="https://mister-kin.github.io/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    <category term="清理旧内核" scheme="https://mister-kin.github.io/tags/%E6%B8%85%E7%90%86%E6%97%A7%E5%86%85%E6%A0%B8/"/>
    
  </entry>
  
  <entry>
    <title>PVE备份服务器PBS升级小记（3.x-&gt;4.x）</title>
    <link href="https://mister-kin.github.io/post-articles/2025-11/pve-pbs3to4/"/>
    <id>https://mister-kin.github.io/post-articles/2025-11/pve-pbs3to4/</id>
    <published>2025-11-07T21:59:26.000Z</published>
    <updated>2025-11-09T14:48:13.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言">1 &nbsp&nbsp<a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>之前顺利完成了升级虚拟化系统<code>Proxmox VE</code>9.0版本及其相关的虚拟机LXC容器的系统版本，详情可参阅「<a href="/post-articles/2025-10/pve8to9">PVE虚拟化系统升级小记（8.x-&gt;9.x）</a>」和「<a href="/post-articles/2025-11/pve-lxc-debian12to13">PVE虚拟机LXC容器升级小记(Debian12-&gt;13)</a>」。</p><p>正巧企业软件开发商<code>Proxmox Server Solutions GmbH</code>在2025年8月6日发布了<code>Proxmox Backup Server</code>4.0版本，因此今天来聊聊如何将PVE的备份服务器<code>Proxmox Backup Server</code>从3.x版本升级到4.x版本。以下将<code>Proxmox Backup Server</code>简称为<code>PBS</code>。</p><h1 id="升级到PBS-3-x最新的版本">2 &nbsp&nbsp<a href="#升级到PBS-3-x最新的版本" class="headerlink" title="升级到PBS 3.x最新的版本"></a>升级到PBS 3.x最新的版本</h1><blockquote><p>开始正式升级前，请记得将PBS的部署机器环境的Debian系统也升级到Debian13（即<code>Trixie</code>），这里不再赘述，详情可参阅「<a href="/post-articles/2025-11/pve-lxc-debian12to13">PVE虚拟机LXC容器升级小记(Debian12-&gt;13)</a>」。</p></blockquote><p>输入如下命令完成升级并查看当前PBS版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update &amp;&amp; apt dist-upgrade -y</span><br><span class="line">proxmox-backup-manager versions</span><br></pre></td></tr></table></figure><h1 id="检查版本升级的兼容性">3 &nbsp&nbsp<a href="#检查版本升级的兼容性" class="headerlink" title="检查版本升级的兼容性"></a>检查版本升级的兼容性</h1><p>输入如下命令检查PBS版本的兼容性，如果存在ERROR报错，解决报错信息再重新运行检查命令，直到没有报错为止：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pbs3to4</span><br></pre></td></tr></table></figure><h1 id="替换PBS-4-x的软件源">4 &nbsp&nbsp<a href="#替换PBS-4-x的软件源" class="headerlink" title="替换PBS 4.x的软件源"></a>替换PBS 4.x的软件源</h1><p>执行如下命令完成替换成中科大镜像源：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> deb http://mirrors.ustc.edu.cn/proxmox/debian/pbs trixie pbs-no-subscription &gt; /etc/apt/sources.list.d/pbs-enterprise.list</span><br></pre></td></tr></table></figure><h1 id="开始正式升级（3-x-4-x）">5 &nbsp&nbsp<a href="#开始正式升级（3-x-4-x）" class="headerlink" title="开始正式升级（3.x-&gt;4.x）"></a>开始正式升级（3.x-&gt;4.x）</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update &amp;&amp; apt dist-upgrade -y</span><br></pre></td></tr></table></figure><p>升级中会出现一些交互界面，以下是实操选择的参数：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Configuration file <span class="string">&#x27;/etc/issue&#x27;</span></span><br><span class="line">==&gt; Modified (by you or by a script) since installation.</span><br><span class="line">==&gt; Package distributor has shipped an updated version.</span><br><span class="line">What would you like to <span class="keyword">do</span> about it ?  Your options are:</span><br><span class="line">    Y or I  : install the package maintainer<span class="string">&#x27;s version</span></span><br><span class="line"><span class="string">    N or O  : keep your currently-installed version</span></span><br><span class="line"><span class="string">    D     : show the differences between the versions</span></span><br><span class="line"><span class="string">    Z     : start a shell to examine the situation</span></span><br><span class="line"><span class="string">The default action is to keep your current version.</span></span><br><span class="line"><span class="string">*** issue (Y/I/N/O/D/Z) [default=N] ?</span></span><br><span class="line"><span class="string">输入N回车</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">┌────────────────────────────────────────────┤ Configuring libc6:amd64 ├────────────────────────────────────────────┐</span></span><br><span class="line"><span class="string">│                                                                                                                   │</span></span><br><span class="line"><span class="string">│ There are services installed on your system which need to be restarted when certain libraries, such as libpam,    │</span></span><br><span class="line"><span class="string">│ libc, and libssl, are upgraded. Since these restarts may cause interruptions of service for the system, you will  │</span></span><br><span class="line"><span class="string">│ normally be prompted on each upgrade for the list of services you wish to restart.  You can choose this option    │</span></span><br><span class="line"><span class="string">│ to avoid being prompted; instead, all necessary restarts will be done for you automatically so you can avoid      │</span></span><br><span class="line"><span class="string">│ being asked questions on each library upgrade.                                                                    │</span></span><br><span class="line"><span class="string">│                                                                                                                   │</span></span><br><span class="line"><span class="string">│ Restart services during package upgrades without asking?                                                          │</span></span><br><span class="line"><span class="string">│                                                                                                                   │</span></span><br><span class="line"><span class="string">│                                  &lt;Yes&gt;                                     &lt;No&gt;                                   │</span></span><br><span class="line"><span class="string">│                                                                                                                   │</span></span><br><span class="line"><span class="string">└───────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘</span></span><br><span class="line"><span class="string">选择Yes回车</span></span><br></pre></td></tr></table></figure><h1 id="屏蔽PBS-4-x企业源pbs-enterprise-sources">6 &nbsp&nbsp<a href="#屏蔽PBS-4-x企业源pbs-enterprise-sources" class="headerlink" title="屏蔽PBS 4.x企业源pbs-enterprise.sources"></a>屏蔽PBS 4.x企业源<code>pbs-enterprise.sources</code></h1><p>成功升级至PBS 4.x之后，会自动生成一个<code>DEB822</code>格式的企业源<code>pbs-enterprise.sources</code>文件，需要手动屏蔽它，否则WEB后台和<code>apt update</code>会有提示。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> /etc/apt/sources.list.d/pbs-enterprise.sources /etc/apt/sources.list.d/pbs-enterprise.sources.bak</span><br><span class="line">apt update</span><br></pre></td></tr></table></figure><h1 id="去除PBS未订阅提示">7 &nbsp&nbsp<a href="#去除PBS未订阅提示" class="headerlink" title="去除PBS未订阅提示"></a>去除PBS未订阅提示</h1><p>Proxmox Backup Server和PVE操作类似，修改<code>/usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js</code>文件。</p><p>注销浏览器当前的PBS登录信息，并重新登录就没有提示弹窗了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js.bak</span><br><span class="line"></span><br><span class="line">sed -i <span class="string">&quot;s/if (res === null || res === undefined || \!res || res/if(/g&quot;</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js</span><br><span class="line">sed -i <span class="string">&quot;s/.data.status.toLowerCase() !== &#x27;active&#x27;/false/g&quot;</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js</span><br><span class="line"></span><br><span class="line">systemctl restart proxmox-backup</span><br></pre></td></tr></table></figure><div class="flex-column"><img data-src="/images/software/pve/pbs-no-subscribe.webp">PBS「无有效订阅」的提示弹窗</div><h1 id="成功升级PBS-4-x">8 &nbsp&nbsp<a href="#成功升级PBS-4-x" class="headerlink" title="成功升级PBS 4.x"></a>成功升级PBS 4.x</h1><p>以下就是升级到最新的PBS 4.x版本的WEB后台界面了。</p><div class="flex-column"><img data-src="/images/software/pve/pbs4x-web-control.webp">PBS 4.x的WEB后台界面</div><h1 id="参考文献">9 &nbsp&nbsp<a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>[1] Upgrade from 3 to 4[EB&#x2F;OL]. <a href="https://pbs.proxmox.com/wiki/Upgrade_from_3_to_4">https://pbs.proxmox.com/wiki/Upgrade_from_3_to_4</a>.</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;1 &amp;nbsp&amp;nbsp&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;之前顺利完成了升级虚拟化系统&lt;code&gt;Proxmox</summary>
        
      
    
    
    
    <category term="post-articles" scheme="https://mister-kin.github.io/categories/post-articles/"/>
    
    <category term="2025-11" scheme="https://mister-kin.github.io/categories/post-articles/2025-11/"/>
    
    
    <category term="虚拟化系统" scheme="https://mister-kin.github.io/tags/%E8%99%9A%E6%8B%9F%E5%8C%96%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="HomeLab" scheme="https://mister-kin.github.io/tags/HomeLab/"/>
    
    <category term="PVE" scheme="https://mister-kin.github.io/tags/PVE/"/>
    
    <category term="升级" scheme="https://mister-kin.github.io/tags/%E5%8D%87%E7%BA%A7/"/>
    
    <category term="Proxmox" scheme="https://mister-kin.github.io/tags/Proxmox/"/>
    
    <category term="服务器" scheme="https://mister-kin.github.io/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    <category term="PBS" scheme="https://mister-kin.github.io/tags/PBS/"/>
    
    <category term="备份服务器" scheme="https://mister-kin.github.io/tags/%E5%A4%87%E4%BB%BD%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>禁用飞牛fnOS的SSH密码登录，避免被爆破登录入侵</title>
    <link href="https://mister-kin.github.io/post-articles/2025-11/disable-ssh-password-for-fnos/"/>
    <id>https://mister-kin.github.io/post-articles/2025-11/disable-ssh-password-for-fnos/</id>
    <published>2025-11-06T14:56:24.000Z</published>
    <updated>2025-11-07T15:47:15.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言">1 &nbsp&nbsp<a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>之前写过一篇文章，介绍禁用Debian系统SSH服务端的密码登录功能，以防被不法分子爆破登录入侵。详情可以参阅「<a href="/post-articles/2025-10/disable-ssh-password">禁用SSH服务的密码登录功能以防被爆破</a>」</p><p>今天来介绍讲解一下如何为飞牛fnOS系统禁用SSH服务端的密码登录功能，改用SSH密钥登录方式，这样即使长期保持开启SSH服务，也不用害怕被爆破登录入侵。</p><p>如果飞牛fnOS系统是部署暴露在公网的话，推荐是禁用密码登录功能，改用密钥登录。如果仅部署在家里局域网的话，那可以不用担心这个问题。</p><h1 id="开启飞牛SSH服务端功能">2 &nbsp&nbsp<a href="#开启飞牛SSH服务端功能" class="headerlink" title="开启飞牛SSH服务端功能"></a>开启飞牛SSH服务端功能</h1><p>首先需要做的第一步，自然是打开飞牛fnOS的SSH服务端功能。</p><div class="flex-column"><img data-src="/images/post-articles/2025-10/auto-emtpy-bin-for-fnos/enable-ssh.webp">启用飞牛fnOS的SSH功能</div><h1 id="生成SSH密钥和公钥">3 &nbsp&nbsp<a href="#生成SSH密钥和公钥" class="headerlink" title="生成SSH密钥和公钥"></a>生成SSH密钥和公钥</h1><p>在任意机器上生成SSH密钥和公钥（若已有密钥可以跳过该步骤）：<code>-C</code>参数是设置密钥注释，就是备注字眼方便辨识，<code>outside</code>是代表在家庭局域网之外使用的含义，读者可以自定义其他注释;<code>-f</code>参数是将密钥和公钥生成到特定路径下的文件中，<code>~/.ssh/outside_id_ed25519</code>是代表是生成在<code>~/.ssh/</code>路径下。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建密钥和公钥时，若不输入密码直接回车创建的话，代表无密码。</span></span><br><span class="line">ssh-keygen -t ed25519 -C <span class="string">&quot;outside&quot;</span> -f ~/.ssh/outside_id_ed25519</span><br></pre></td></tr></table></figure><p>然后获取前面生成的密钥文件<code>outside_id_ed25519</code>和公钥文件<code>outside_id_ed25519.pub</code>。不同系统下<code>~/.ssh/</code>对应的路径如下：</p><ul><li>Windows：<code>%USERPROFILE%/.ssh</code>或者<code>C:/Users/[系统用户名]/.ssh</code></li><li>Linux：<code>~/</code>对应的是当前登录用户家目录的路径，如果是<code>root</code>用户就是在<code>/root/.ssh</code>中；普通用户就是在<code>/home/[系统用户名]/.ssh</code>，直接<code>cd</code>到该路径就行。</li></ul><h1 id="登入飞牛fnOS系统终端">4 &nbsp&nbsp<a href="#登入飞牛fnOS系统终端" class="headerlink" title="登入飞牛fnOS系统终端"></a>登入飞牛fnOS系统终端</h1><h2 id="方式一：使用其他平台的SSH客户端">4.1 &nbsp&nbsp<a href="#方式一：使用其他平台的SSH客户端" class="headerlink" title="方式一：使用其他平台的SSH客户端"></a>方式一：使用其他平台的SSH客户端</h2><p>开启SSH功能之后，可以在其他平台的终端，输入如下命令登录飞牛fnOS系统。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ssh 系统用户名@飞牛ip</span><br><span class="line"><span class="comment"># 例如 ssh admin@192.168.1.10</span></span><br><span class="line"><span class="comment"># admin是创建fnOS时的系统用户名称，请根据自己实际情况修改</span></span><br><span class="line"><span class="comment"># 然后输入用户密码完成验证即可登录</span></span><br></pre></td></tr></table></figure><h2 id="方式二：搜索安装FntermX-终端应用">4.2 &nbsp&nbsp<a href="#方式二：搜索安装FntermX-终端应用" class="headerlink" title="方式二：搜索安装FntermX 终端应用"></a>方式二：搜索安装<code>FntermX 终端</code>应用</h2><p>在飞牛fnOS的应用中心中搜索<code>FntermX 终端</code>关键字，找到应用并安装。</p><div class="flex-column"><img data-src="/images/post-articles/2025-11/fntermx-for-fnos/store-page.webp">应用中心页面-FntermX 终端</div><p>然后创建本地终端连接会话接入飞牛fnOS系统终端。</p><div class="flex-column"><img data-src="/images/post-articles/2025-11/fntermx-for-fnos/local-terminal.webp">本地终端连接</div><h1 id="上传公钥到飞牛fnOS系统">5 &nbsp&nbsp<a href="#上传公钥到飞牛fnOS系统" class="headerlink" title="上传公钥到飞牛fnOS系统"></a>上传公钥到飞牛fnOS系统</h1><p>在飞牛的终端上，编辑<code>authorized_keys</code>文件，并复制粘贴<code>outside_id_ed25519.pub</code>的内容到<code>authorized_keys</code>文件里面，有多个公钥的话，则分行输入。当然，也可以使用<code>ssh-copy-id</code>命令完成上传公钥，这里不再展开，以下介绍手动编辑的方式。<code>nano</code>编辑器保存快捷键是<code>Ctrl+O</code>或者<code>Ctrl+S</code>，退出编辑器快捷键是<code>Ctrl+X</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 若不存在~/.ssh路径，则先创建该文件夹</span></span><br><span class="line"><span class="built_in">mkdir</span> -p ~/.ssh</span><br><span class="line"><span class="built_in">sudo</span> nano ~/.ssh/authorized_keys</span><br><span class="line"><span class="comment"># 将公钥文件内容复制到authorized_keys文件中</span></span><br></pre></td></tr></table></figure><div class="flex-column"><img data-src="/images/post-articles/2025-11/disable-ssh-password-for-fnos/authorized-keys.webp">authorized_keys配置文件</div><h1 id="设置禁用飞牛fnOS系统的SSH服务端密码登录">6 &nbsp&nbsp<a href="#设置禁用飞牛fnOS系统的SSH服务端密码登录" class="headerlink" title="设置禁用飞牛fnOS系统的SSH服务端密码登录"></a>设置禁用飞牛fnOS系统的SSH服务端密码登录</h1><p>在飞牛的终端上，编辑<code>sshd_config</code>文件。<code>nano</code>编辑器保存快捷键是<code>Ctrl+O</code>或者<code>Ctrl+S</code>，退出编辑器快捷键是<code>Ctrl+X</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nano /etc/ssh/sshd_config</span><br><span class="line"><span class="comment"># 找到如下字段修改成右边的值</span></span><br><span class="line">PasswordAuthentication no <span class="comment"># 代表禁用密码登录</span></span><br></pre></td></tr></table></figure><p>同时也能从配置中看到飞牛fnOS系统本身默认是禁用root用户登录SSH：<code>PermitRootLogin no</code>，安全性高。</p><div class="flex-column"><img data-src="/images/post-articles/2025-11/disable-ssh-password-for-fnos/sshd-config.webp">sshd_config配置文件</div><h1 id="重启飞牛fnOS系统SSH服务">7 &nbsp&nbsp<a href="#重启飞牛fnOS系统SSH服务" class="headerlink" title="重启飞牛fnOS系统SSH服务"></a>重启飞牛fnOS系统SSH服务</h1><p>飞牛fnOS系统上重启SSH服务命令及查看SSH服务状态命令如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl restart sshd.service</span><br><span class="line"><span class="built_in">sudo</span> systemctl status sshd.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果重启sshd.service服务名称提示报错，则改成ssh.service名称执行即可</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl restart ssh.service</span><br></pre></td></tr></table></figure><div class="flex-column"><img data-src="/images/post-articles/2025-11/disable-ssh-password-for-fnos/sshd-service-status.webp">SSHD服务状态</div><h1 id="测试是否禁用成功">8 &nbsp&nbsp<a href="#测试是否禁用成功" class="headerlink" title="测试是否禁用成功"></a>测试是否禁用成功</h1><p>在任意平台的终端，尝试SSH登录飞牛fnOS系统，如果提示<code>Permission denied (publickey)</code>，则代表禁用密码登录成功。</p><div class="flex-column"><img data-src="/images/post-articles/2025-11/disable-ssh-password-for-fnos/disable-effect.webp">禁用密码登录的效果</div>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;1 &amp;nbsp&amp;nbsp&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="post-articles" scheme="https://mister-kin.github.io/categories/post-articles/"/>
    
    <category term="2025-11" scheme="https://mister-kin.github.io/categories/post-articles/2025-11/"/>
    
    
    <category term="fnOS" scheme="https://mister-kin.github.io/tags/fnOS/"/>
    
    <category term="飞牛" scheme="https://mister-kin.github.io/tags/%E9%A3%9E%E7%89%9B/"/>
    
    <category term="SSH" scheme="https://mister-kin.github.io/tags/SSH/"/>
    
    <category term="公钥" scheme="https://mister-kin.github.io/tags/%E5%85%AC%E9%92%A5/"/>
    
    <category term="密钥" scheme="https://mister-kin.github.io/tags/%E5%AF%86%E9%92%A5/"/>
    
  </entry>
  
  <entry>
    <title>飞牛fnOS首款原生终端应用来了！！！</title>
    <link href="https://mister-kin.github.io/post-articles/2025-11/fntermx-for-fnos/"/>
    <id>https://mister-kin.github.io/post-articles/2025-11/fntermx-for-fnos/</id>
    <published>2025-11-06T13:55:24.000Z</published>
    <updated>2025-11-07T15:47:15.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言">1 &nbsp&nbsp<a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本周四，飞牛fnOS「应用中心」更新上架了好些新应用，其中有一款比较值得推荐，就是由<code>EWEDL</code>开发的<code>FntermX 终端</code>应用，这是在应用中心上架的首款原生终端应用。</p><p>笔者简单使用实验了一下，在<code>FN Connect</code>官网服务器中继连接的条件下，该<code>FntermX 终端</code>应用也能正常使用，确实不错，赞！终归有一款提供终端功能的原生应用了。(ಡωಡ)</p><p>简单命令调试的需求，完全可以使用该应用连接调试，不再需要其他额外的SSH客户端工具了。</p><h1 id="以下简单介绍该应用的安装和使用">2 &nbsp&nbsp<a href="#以下简单介绍该应用的安装和使用" class="headerlink" title="以下简单介绍该应用的安装和使用"></a>以下简单介绍该应用的安装和使用</h1><h2 id="在应用中心中搜索并安装">2.1 &nbsp&nbsp<a href="#在应用中心中搜索并安装" class="headerlink" title="在应用中心中搜索并安装"></a>在应用中心中搜索并安装</h2><p>在应用中心中搜索<code>FntermX 终端</code>关键字，找到应用并安装。</p><div class="flex-column"><img data-src="/images/post-articles/2025-11/fntermx-for-fnos/store-page.webp">应用中心页面-FntermX 终端</div><h2 id="首次启动设置应用密码">2.2 &nbsp&nbsp<a href="#首次启动设置应用密码" class="headerlink" title="首次启动设置应用密码"></a>首次启动设置应用密码</h2><p>首次启动应用时，会弹出交互式窗口，提示创建应用的访问密码。建议创建一个不同于系统的密码，以增强和保证安全性。</p><div class="flex-column"><img data-src="/images/post-articles/2025-11/fntermx-for-fnos/first-setting-pw.webp">首次启用-创建密码</div><h2 id="应用界面">2.3 &nbsp&nbsp<a href="#应用界面" class="headerlink" title="应用界面"></a>应用界面</h2><p>完成首次创建密码之后，打开进入应用界面。</p><div class="flex-column"><img data-src="/images/post-articles/2025-11/fntermx-for-fnos/terminal-gui.webp">终端应用界面</div><h2 id="本地终端连接">2.4 &nbsp&nbsp<a href="#本地终端连接" class="headerlink" title="本地终端连接"></a>本地终端连接</h2><p>终端应用主要提供两种连接方式，一种是创建本地终端连接会话。</p><div class="flex-column"><img data-src="/images/post-articles/2025-11/fntermx-for-fnos/local-terminal.webp">本地终端连接</div><h2 id="远程终端连接">2.5 &nbsp&nbsp<a href="#远程终端连接" class="headerlink" title="远程终端连接"></a>远程终端连接</h2><p>另外一种连接方式则是创建远程终端连接会话。</p><div class="flex-column"><img data-src="/images/post-articles/2025-11/fntermx-for-fnos/remote-terminal.webp">远程终端连接</div><h2 id="应用设置入口">2.6 &nbsp&nbsp<a href="#应用设置入口" class="headerlink" title="应用设置入口"></a>应用设置入口</h2><p>目前终端应用<code>设置</code>入口在应用界面右上角，目前可自定义设置的选项只有「密码管理」。如果需要修改应用访问密码，可以进入<code>设置</code>界面，点击<code>密码管理</code>选项，修改密码。</p><div class="flex-column"><img data-src="/images/post-articles/2025-11/fntermx-for-fnos/setting-page.webp">应用设置界面</div><h1 id="参考文献">3 &nbsp&nbsp<a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>[1] FntermX 终端——专为飞牛OS打造的原生终端应用[EB&#x2F;OL]. <a href="https://club.fnnas.com/forum.php?mod=viewthread&tid=40652">https://club.fnnas.com/forum.php?mod=viewthread&amp;tid=40652</a>.</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;1 &amp;nbsp&amp;nbsp&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="post-articles" scheme="https://mister-kin.github.io/categories/post-articles/"/>
    
    <category term="2025-11" scheme="https://mister-kin.github.io/categories/post-articles/2025-11/"/>
    
    
    <category term="终端" scheme="https://mister-kin.github.io/tags/%E7%BB%88%E7%AB%AF/"/>
    
    <category term="fnOS" scheme="https://mister-kin.github.io/tags/fnOS/"/>
    
    <category term="飞牛" scheme="https://mister-kin.github.io/tags/%E9%A3%9E%E7%89%9B/"/>
    
    <category term="terminal" scheme="https://mister-kin.github.io/tags/terminal/"/>
    
    <category term="原生" scheme="https://mister-kin.github.io/tags/%E5%8E%9F%E7%94%9F/"/>
    
  </entry>
  
  <entry>
    <title>PVE虚拟机LXC容器升级小记(Debian12-&gt;13)</title>
    <link href="https://mister-kin.github.io/post-articles/2025-11/pve-lxc-debian12to13/"/>
    <id>https://mister-kin.github.io/post-articles/2025-11/pve-lxc-debian12to13/</id>
    <published>2025-11-02T10:11:09.000Z</published>
    <updated>2025-11-07T21:50:48.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言">1 &nbsp&nbsp<a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>之前完成升级了虚拟化系统<code>Proxmox VE</code>9.0版本，因此顺手将PVE系统中虚拟机LXC容器的Debian系统版本也一起从Debian12升级到Debian13版本。</p><p>关于PVE系统的升级步骤，详情可以参阅「<a href="/post-articles/2025-10/pve8to9/">PVE虚拟化系统升级小记（8.x-&gt;9.x）</a>」。</p><blockquote><p>P.S. 首先声明一点：虚拟机LXC容器系统版本即使不升级，其实也能正常运行在<code>Proxmox VE</code>9.0版本中，读者自行斟酌选择是否升级。</p></blockquote><p>LXC容器升级本身并不复杂，跟常规Debian升级类似。接下来介绍LXC容器从Debian12升级到Debian13的步骤。</p><h1 id="替换-Debian-系统软件源">2 &nbsp&nbsp<a href="#替换-Debian-系统软件源" class="headerlink" title="替换 Debian 系统软件源"></a>替换 Debian 系统软件源</h1><p>编辑<code>/etc/apt/sources.list</code>文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/apt/sources.list</span><br></pre></td></tr></table></figure><p>将文件内容替换为如下中科大镜像源：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># deb http://ftp.debian.org/debian trixie main contrib</span></span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian/ trixie main contrib non-free non-free-firmware</span><br><span class="line"></span><br><span class="line"><span class="comment"># deb http://ftp.debian.org/debian trixie-updates main contrib</span></span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian/ trixie-updates main contrib non-free non-free-firmware</span><br><span class="line"></span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian/ trixie-backports main contrib non-free non-free-firmware</span><br><span class="line"><span class="comment"># security updates</span></span><br><span class="line"><span class="comment"># deb http://security.debian.org trixie-security main contrib</span></span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian-security trixie-security main contrib non-free non-free-firmware</span><br></pre></td></tr></table></figure><h1 id="替换Docker源">3 &nbsp&nbsp<a href="#替换Docker源" class="headerlink" title="替换Docker源"></a>替换Docker源</h1><p>如果LXC容器中有部署docker的话，需要操作替换Docker源。如果没有的话，可以跳过此步骤。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/apt/sources.list.d/docker.list</span><br><span class="line"></span><br><span class="line"><span class="comment"># 替换为如下内容</span></span><br><span class="line">deb [<span class="built_in">arch</span>=amd64 signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian   trixie stable</span><br></pre></td></tr></table></figure><h1 id="开始正式升级（debian12-debian13）">4 &nbsp&nbsp<a href="#开始正式升级（debian12-debian13）" class="headerlink" title="开始正式升级（debian12-&gt;debian13）"></a>开始正式升级（debian12-&gt;debian13）</h1><p>输入如下命令完成升级：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update &amp;&amp; apt dist-upgrade -y</span><br></pre></td></tr></table></figure><p>升级中会出现一些交互界面，以下是实操选择的参数：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">┌────────────────────────────────────────────┤ Configuring libc6:amd64 ├────────────────────────────────────────────┐</span><br><span class="line">│                                                                                                                   │</span><br><span class="line">│ There are services installed on your system <span class="built_in">which</span> need to be restarted when certain libraries, such as libpam,    │</span><br><span class="line">│ libc, and libssl, are upgraded. Since these restarts may cause interruptions of service <span class="keyword">for</span> the system, you will  │</span><br><span class="line">│ normally be prompted on each upgrade <span class="keyword">for</span> the list of services you wish to restart.  You can choose this option    │</span><br><span class="line">│ to avoid being prompted; instead, all necessary restarts will be <span class="keyword">done</span> <span class="keyword">for</span> you automatically so you can avoid      │</span><br><span class="line">│ being asked questions on each library upgrade.                                                                    │</span><br><span class="line">│                                                                                                                   │</span><br><span class="line">│ Restart services during package upgrades without asking?                                                          │</span><br><span class="line">│                                                                                                                   │</span><br><span class="line">│                                  &lt;Yes&gt;                                     &lt;No&gt;                                   │</span><br><span class="line">│                                                                                                                   │</span><br><span class="line">└───────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘</span><br><span class="line">选择Yes回车</span><br><span class="line"></span><br><span class="line">Configuration file <span class="string">&#x27;/etc/crontab&#x27;</span></span><br><span class="line"> ==&gt; Modified (by you or by a script) since installation.</span><br><span class="line"> ==&gt; Package distributor has shipped an updated version.</span><br><span class="line">   What would you like to <span class="keyword">do</span> about it ?  Your options are:</span><br><span class="line">    Y or I  : install the package maintainer<span class="string">&#x27;s version</span></span><br><span class="line"><span class="string">    N or O  : keep your currently-installed version</span></span><br><span class="line"><span class="string">      D     : show the differences between the versions</span></span><br><span class="line"><span class="string">      Z     : start a shell to examine the situation</span></span><br><span class="line"><span class="string"> The default action is to keep your current version.</span></span><br><span class="line"><span class="string">*** crontab (Y/I/N/O/D/Z) [default=N] ?</span></span><br><span class="line"><span class="string">输入y，根据自己情况来，有使用到crontab定时计划任务的，输入n保留</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Configuration file &#x27;</span>/etc/cron.d/e2scrub_all<span class="string">&#x27;</span></span><br><span class="line"><span class="string"> ==&gt; Modified (by you or by a script) since installation.</span></span><br><span class="line"><span class="string"> ==&gt; Package distributor has shipped an updated version.</span></span><br><span class="line"><span class="string">   What would you like to do about it ?  Your options are:</span></span><br><span class="line"><span class="string">    Y or I  : install the package maintainer&#x27;</span>s version</span><br><span class="line">    N or O  : keep your currently-installed version</span><br><span class="line">      D     : show the differences between the versions</span><br><span class="line">      Z     : start a shell to examine the situation</span><br><span class="line"> The default action is to keep your current version.</span><br><span class="line">*** e2scrub_all (Y/I/N/O/D/Z) [default=N] ?</span><br><span class="line">输入y，和/etc/crontab情况相同</span><br><span class="line"></span><br><span class="line">┌─────────────────────────────────────────┤ Configuring openssh-server ├─────────────────────────────────────────┐</span><br><span class="line">│ A new version (/tmp/tmp.hKOeEqLlCv) of configuration file /etc/ssh/sshd_config is available, but the version   │</span><br><span class="line">│ installed currently has been locally modified.                                                                 │</span><br><span class="line">│                                                                                                                │</span><br><span class="line">│ What <span class="keyword">do</span> you want to <span class="keyword">do</span> about modified configuration file sshd_config?                                          │</span><br><span class="line">│                                                                                                                │</span><br><span class="line">│                              install the package maintainer<span class="string">&#x27;s version                                          │</span></span><br><span class="line"><span class="string">│                              keep the local version currently installed                                        │</span></span><br><span class="line"><span class="string">│                              show the differences between the versions                                         │</span></span><br><span class="line"><span class="string">│                              show a side-by-side difference between the versions                               │</span></span><br><span class="line"><span class="string">│                              show a 3-way difference between available versions                                │</span></span><br><span class="line"><span class="string">│                              do a 3-way merge between available versions                                       │</span></span><br><span class="line"><span class="string">│                              start a new shell to examine the situation                                        │</span></span><br><span class="line"><span class="string">│                                                                                                                │</span></span><br><span class="line"><span class="string">│                                                                                                                │</span></span><br><span class="line"><span class="string">│                                                     &lt;Ok&gt;                                                       │</span></span><br><span class="line"><span class="string">│                                                                                                                │</span></span><br><span class="line"><span class="string">└────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘</span></span><br><span class="line"><span class="string">选择install the package maintainer&#x27;</span>s version，根据自己情况来</span><br></pre></td></tr></table></figure><h1 id="移除无用的包">5 &nbsp&nbsp<a href="#移除无用的包" class="headerlink" title="移除无用的包"></a>移除无用的包</h1><p>运行如下如下命令，移除无用的包，节省服务器空间：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt autoremove</span><br></pre></td></tr></table></figure><h1 id="升级前后的版本记录">6 &nbsp&nbsp<a href="#升级前后的版本记录" class="headerlink" title="升级前后的版本记录"></a>升级前后的版本记录</h1><div class="flex-row"><div class="flex-column"><img data-src="/images/software/pve/debian12.webp">升级前：Debian12</div><div class="flex-column"><img data-src="/images/software/pve/debian13.webp">升级后：Debian13</div></div>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;1 &amp;nbsp&amp;nbsp&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;之前完成升级了虚拟化系统&lt;code&gt;Proxmox</summary>
        
      
    
    
    
    <category term="post-articles" scheme="https://mister-kin.github.io/categories/post-articles/"/>
    
    <category term="2025-11" scheme="https://mister-kin.github.io/categories/post-articles/2025-11/"/>
    
    
    <category term="虚拟化系统" scheme="https://mister-kin.github.io/tags/%E8%99%9A%E6%8B%9F%E5%8C%96%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="HomeLab" scheme="https://mister-kin.github.io/tags/HomeLab/"/>
    
    <category term="PVE" scheme="https://mister-kin.github.io/tags/PVE/"/>
    
    <category term="升级" scheme="https://mister-kin.github.io/tags/%E5%8D%87%E7%BA%A7/"/>
    
    <category term="Proxmox" scheme="https://mister-kin.github.io/tags/Proxmox/"/>
    
    <category term="服务器" scheme="https://mister-kin.github.io/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    <category term="LXC" scheme="https://mister-kin.github.io/tags/LXC/"/>
    
    <category term="Debian" scheme="https://mister-kin.github.io/tags/Debian/"/>
    
  </entry>
  
  <entry>
    <title>PVE虚拟化系统升级小记（8.x-&gt;9.x）</title>
    <link href="https://mister-kin.github.io/post-articles/2025-10/pve8to9/"/>
    <id>https://mister-kin.github.io/post-articles/2025-10/pve8to9/</id>
    <published>2025-10-31T13:03:42.000Z</published>
    <updated>2025-11-09T14:48:13.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言">1 &nbsp&nbsp<a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>企业软件开发商<code>Proxmox Server Solutions GmbH</code>在2025年8月5日发布了<code>Proxmox VE</code>9.0版本，这两天终于得空给家里的HomeLab机器操作升级，因此记录一下从PVE 8.x升级到PVE 9.x步骤。</p><p>为了方便软件包下载，一般需要将linux系统的替换成国内镜像源。这样操作更新时，系统访问的是国内镜像服务器，网络速率就不会受限于每秒几十KB。以下内容替换使用的镜像源均为中科大源。</p><h1 id="升级到PVE-8-x最新的版本">2 &nbsp&nbsp<a href="#升级到PVE-8-x最新的版本" class="headerlink" title="升级到PVE 8.x最新的版本"></a>升级到PVE 8.x最新的版本</h1><p><strong>一般更新操作，都是推荐替换国内镜像源再操作。由于本文主要阐述升级步骤，这里不再赘述如何替换PVE 8.x版本系统的软件源，如想了解可参阅我的博客。</strong></p><p>输入如下命令完成升级并查看当前PVE版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update &amp;&amp; apt dist-upgrade -y</span><br><span class="line">pveversion</span><br></pre></td></tr></table></figure><div class="flex-row"><div class="flex-column"><img data-src="/images/software/pve/pve8x-update-to-lateset.webp">执行apt命令升级</div><div class="flex-column"><img data-src="/images/software/pve/pve8x-lastest-check-version.webp">pveversion查看当前版本</div></div><h1 id="检查版本升级的兼容性">3 &nbsp&nbsp<a href="#检查版本升级的兼容性" class="headerlink" title="检查版本升级的兼容性"></a>检查版本升级的兼容性</h1><p>输入如下命令调用升级检查脚本命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pve8to9</span><br></pre></td></tr></table></figure><p>笔者遇到两个警告WARN和一个失败FAIL。</p><p>警告1：提示有正在运行的客户端，检查程序推荐考虑迁移或者关闭。这个警告笔者是无视的，毕竟HomeLab的主路由和DNS递归查询等服务都是部署在这些虚拟机上，若是关闭，笔者还得额外调整网络参数才能联网。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WARN: 9 running guest(s) detected - consider migrating or stopping them.</span><br></pre></td></tr></table></figure><div class="flex-column"><img data-src="/images/software/pve/pve8to9-warning1.webp">pve8to9警告信息1</div><p>警告2：提示本系统缺乏Intel微码，可无视该警告。想要消除警告，就使用命令安装微码<code>apt install intel-microcode</code>。AMD的CPU机器的微码安装命令为<code>apt install amd64-microcode</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">WARN: The matching CPU microcode package &#x27;intel-microcode&#x27; could not be found! Consider installing it to receive the latest security and bug fixes for your CPU.</span><br><span class="line">        Ensure you enable the &#x27;non-free-firmware&#x27; component in the apt sources and run:</span><br><span class="line">        apt install intel-microcode</span><br></pre></td></tr></table></figure><div class="flex-row"><div class="flex-column"><img data-src="/images/software/pve/pve8to9-warning2.webp">pve8to9警告信息2</div><div class="flex-column"><img data-src="/images/software/pve/apt-install-intel-microcode.webp">安装Intel处理器微码</div></div><p>失败：这是因为PVE 9.x版本是基于<code>Debian Trixie</code>版本开发的，这个版本中<code>systemd-boot</code>已经被拆分成三个包<code>systemd-boot-efi</code>、<code>systemd-boot-tools</code>和<code>systemd-boot</code>，因此检查脚本若提示要卸载移除，最好是移除它。解决方法是运行卸载命令<code>apt remove systemd-boot</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FAIL: systemd-boot meta-package installed. This will cause problems on upgrades of other boot-related packages. Remove &#x27;systemd-boot&#x27; See https://pve.proxmox.com/wiki/Upgrade_from_8_to_9#sd-boot-warning for more information.</span><br></pre></td></tr></table></figure><div class="flex-row"><div class="flex-column"><img data-src="/images/software/pve/pve8to9-fail.webp">pve8to9失败信息</div><div class="flex-column"><img data-src="/images/software/pve/apt-remove-systemd-boot.webp">移除systemd-boot</div></div><p>注意解在决警告和失败之后，请重新运行检查脚本程序<code>pve8to9</code>，检查没有问题则进行下一步替换PVE 9.x镜像源。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pve8to9</span><br></pre></td></tr></table></figure><div class="flex-column"><img data-src="/images/software/pve/rerun-pve8to9.webp">重新运行检查脚本程序pve8to9</div><h1 id="替换PVE-9-x的软件源">4 &nbsp&nbsp<a href="#替换PVE-9-x的软件源" class="headerlink" title="替换PVE 9.x的软件源"></a>替换PVE 9.x的软件源</h1><h2 id="替换Debian系统软件源">4.1 &nbsp&nbsp<a href="#替换Debian系统软件源" class="headerlink" title="替换Debian系统软件源"></a>替换Debian系统软件源</h2><p>修改&#x2F;etc&#x2F;apt&#x2F;sources.list文件内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> /etc/apt/sources.list /etc/apt/sources.list.bak</span><br><span class="line">nano /etc/apt/sources.list</span><br></pre></td></tr></table></figure><p>使用如下内容覆盖文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># deb http://ftp.debian.org/debian trixie main contrib</span></span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian/ trixie main contrib non-free non-free-firmware</span><br><span class="line"></span><br><span class="line"><span class="comment"># deb http://ftp.debian.org/debian trixie-updates main contrib</span></span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian/ trixie-updates main contrib non-free non-free-firmware</span><br><span class="line"></span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian/ trixie-backports main contrib non-free non-free-firmware</span><br><span class="line"><span class="comment"># security updates</span></span><br><span class="line"><span class="comment"># deb http://security.debian.org trixie-security main contrib</span></span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian-security trixie-security main contrib non-free non-free-firmware</span><br></pre></td></tr></table></figure><h2 id="替换PVE软件源">4.2 &nbsp&nbsp<a href="#替换PVE软件源" class="headerlink" title="替换PVE软件源"></a>替换PVE软件源</h2><p>删除pve-enterprise.list，新建pve-no-subscription.list，参照如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> /etc/apt/sources.list.d/pve-enterprise.list /etc/apt/sources.list.d/pve-enterprise.list.bak</span><br><span class="line"><span class="built_in">echo</span> deb https://mirrors.ustc.edu.cn/proxmox/debian/pve trixie pve-no-subscription &gt; /etc/apt/sources.list.d/pve-no-subscription.list</span><br></pre></td></tr></table></figure><h2 id="替换CEPH分布式源">4.3 &nbsp&nbsp<a href="#替换CEPH分布式源" class="headerlink" title="替换CEPH分布式源"></a>替换CEPH分布式源</h2><p>修改<code>/etc/apt/sources.list.d/ceph.list</code>和<code>/usr/share/perl5/PVE/CLI/pveceph.pm</code>文件内容。<code>pveceph.pm</code>推荐是更新系统之后再操作，否则更新系统之后<code>pveceph.pm</code>会覆盖回默认的域名<code>http://download.proxmox.com</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> /etc/apt/sources.list.d/ceph.list /etc/apt/sources.list.d/ceph.list.bak</span><br><span class="line"><span class="built_in">echo</span> deb https://mirrors.ustc.edu.cn/proxmox/debian/ceph-squid trixie no-subscription &gt; /etc/apt/sources.list.d/ceph.list</span><br><span class="line"></span><br><span class="line"><span class="built_in">cp</span> /usr/share/perl5/PVE/CLI/pveceph.pm /usr/share/perl5/PVE/CLI/pveceph.pm.bak</span><br><span class="line">sed -i <span class="string">&quot;s#http://download.proxmox.com#https://mirrors.ustc.edu.cn/proxmox#g&quot;</span> /usr/share/perl5/PVE/CLI/pveceph.pm</span><br></pre></td></tr></table></figure><h1 id="开始正式升级（8-x-9-x）">5 &nbsp&nbsp<a href="#开始正式升级（8-x-9-x）" class="headerlink" title="开始正式升级（8.x-&gt;9.x）"></a>开始正式升级（8.x-&gt;9.x）</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update &amp;&amp; apt dist-upgrade -y</span><br></pre></td></tr></table></figure><div class="note info no-icon"><p>升级若遇到提示<code>Upgrade wants to remove package &#39;proxmox-ve&#39;</code>的话，在升级前尝试执行<code>apt remove linux-image-amd64</code>。</p></div><p>升级中会出现一些交互界面，下面是官网的建议（不清楚的选项，可以选择推荐参数）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/etc/issue -&gt; Proxmox VE will auto-generate this file on boot, and it has only cosmetic effects on the login console.</span><br><span class="line">Using the default <span class="string">&quot;No&quot;</span> (keep your currently-installed version) is safe here.</span><br><span class="line"></span><br><span class="line">/etc/lvm/lvm.conf -&gt; Changes relevant <span class="keyword">for</span> Proxmox VE will be updated, and a newer config version might be useful.</span><br><span class="line">If you did not make extra changes yourself and are unsure it<span class="string">&#x27;s suggested to choose &quot;Yes&quot; (install the package maintainer&#x27;</span>s version) here.</span><br><span class="line"></span><br><span class="line">/etc/ssh/sshd_config -&gt; If you have not changed this file manually, the only differences should be a replacement of ChallengeResponseAuthentication no with KbdInteractiveAuthentication no and some irrelevant changes <span class="keyword">in</span> comments (lines starting with <span class="comment">#).</span></span><br><span class="line">If this is the <span class="keyword">case</span>, both options are safe, though we would recommend installing the package maintainer<span class="string">&#x27;s version in order to move away from the deprecated ChallengeResponseAuthentication option. If there are other changes, we suggest to inspect them closely and decide accordingly.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/etc/default/grub -&gt; Here you may want to take special care, as this is normally only asked for if you changed it manually, e.g., for adding some kernel command line option.</span></span><br><span class="line"><span class="string">It&#x27;</span>s recommended to check the difference <span class="keyword">for</span> any relevant change, note that changes <span class="keyword">in</span> comments (lines starting with <span class="comment">#) are not relevant.</span></span><br><span class="line">If unsure, we suggested to selected <span class="string">&quot;No&quot;</span> (keep your currently-installed version)</span><br><span class="line"></span><br><span class="line">/etc/chrony/chrony.conf -&gt; If you made <span class="built_in">local</span> changes you might want to move them out of the global config into the conf.d or, <span class="keyword">for</span> custom <span class="keyword">time</span> sources, the sources.d folder.</span><br><span class="line">See the /etc/chrony/conf.d/README and /etc/chrony/sources.d/README files on your system <span class="keyword">for</span> detaily.</span><br><span class="line">If you did not make extra changes yourself and are unsure it<span class="string">&#x27;s suggested to choose &quot;Yes&quot; (install the package maintainer&#x27;</span>s version) here.</span><br></pre></td></tr></table></figure><p>以下是实操选择的参数：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">Configuration file <span class="string">&#x27;/etc/issue&#x27;</span></span><br><span class="line"> ==&gt; Modified (by you or by a script) since installation.</span><br><span class="line"> ==&gt; Package distributor has shipped an updated version.</span><br><span class="line">   What would you like to <span class="keyword">do</span> about it ?  Your options are:</span><br><span class="line">    Y or I  : install the package maintainer<span class="string">&#x27;s version</span></span><br><span class="line"><span class="string">    N or O  : keep your currently-installed version</span></span><br><span class="line"><span class="string">      D     : show the differences between the versions</span></span><br><span class="line"><span class="string">      Z     : start a shell to examine the situation</span></span><br><span class="line"><span class="string"> The default action is to keep your current version.</span></span><br><span class="line"><span class="string">*** issue (Y/I/N/O/D/Z) [default=N] ?</span></span><br><span class="line"><span class="string">输入N回车</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Configuring libc6:amd64 ├────────────────────────────────────────────┐</span></span><br><span class="line"><span class="string"> │                                                                                                                   │</span></span><br><span class="line"><span class="string"> │ There are services installed on your system which need to be restarted when certain libraries, such as libpam,    │</span></span><br><span class="line"><span class="string"> │ libc, and libssl, are upgraded. Since these restarts may cause interruptions of service for the system, you will  │</span></span><br><span class="line"><span class="string"> │ normally be prompted on each upgrade for the list of services you wish to restart.  You can choose this option    │</span></span><br><span class="line"><span class="string"> │ to avoid being prompted; instead, all necessary restarts will be done for you automatically so you can avoid      │</span></span><br><span class="line"><span class="string"> │ being asked questions on each library upgrade.                                                                    │</span></span><br><span class="line"><span class="string"> │                                                                                                                   │</span></span><br><span class="line"><span class="string"> │ Restart services during package upgrades without asking?                                                          │</span></span><br><span class="line"><span class="string"> │                                                                                                                   │</span></span><br><span class="line"><span class="string"> │                                  &lt;Yes&gt;                                     &lt;No&gt;                                   │</span></span><br><span class="line"><span class="string"> │                                                                                                                   │</span></span><br><span class="line"><span class="string"> └───────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘</span></span><br><span class="line"><span class="string">选择Yes回车</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Configuration file &#x27;</span>/etc/lvm/lvm.conf<span class="string">&#x27;</span></span><br><span class="line"><span class="string"> ==&gt; Modified (by you or by a script) since installation.</span></span><br><span class="line"><span class="string"> ==&gt; Package distributor has shipped an updated version.</span></span><br><span class="line"><span class="string">   What would you like to do about it ?  Your options are:</span></span><br><span class="line"><span class="string">    Y or I  : install the package maintainer&#x27;</span>s version</span><br><span class="line">    N or O  : keep your currently-installed version</span><br><span class="line">      D     : show the differences between the versions</span><br><span class="line">      Z     : start a shell to examine the situation</span><br><span class="line"> The default action is to keep your current version.</span><br><span class="line">*** lvm.conf (Y/I/N/O/D/Z) [default=N] ?</span><br><span class="line">输入Y回车</span><br></pre></td></tr></table></figure><h1 id="屏蔽PVE-9-x企业源pve-enterprise-sources">6 &nbsp&nbsp<a href="#屏蔽PVE-9-x企业源pve-enterprise-sources" class="headerlink" title="屏蔽PVE 9.x企业源pve-enterprise.sources"></a>屏蔽PVE 9.x企业源<code>pve-enterprise.sources</code></h1><p>成功升级至PVE 9.x之后，会自动生成一个<code>DEB822</code>格式的企业源<code>pve-enterprise.sources</code>文件，需要手动屏蔽它，否则WEB后台和<code>apt update</code>会有提示。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> /etc/apt/sources.list.d/pve-enterprise.sources /etc/apt/sources.list.d/pve-enterprise.sources.bak</span><br><span class="line">apt update</span><br></pre></td></tr></table></figure><h1 id="移除无用的包">7 &nbsp&nbsp<a href="#移除无用的包" class="headerlink" title="移除无用的包"></a>移除无用的包</h1><p>运行如下如下命令，移除无用的包，节省服务器空间：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt autoremove</span><br></pre></td></tr></table></figure><div class="flex-column"><img data-src="/images/software/pve/apt-auto-remove.webp">移除无用的包</div><h1 id="替换LXC模板（CT-Templates）镜像源">8 &nbsp&nbsp<a href="#替换LXC模板（CT-Templates）镜像源" class="headerlink" title="替换LXC模板（CT Templates）镜像源"></a>替换LXC模板（CT Templates）镜像源</h1><p>修改<code>/usr/share/perl5/PVE/APLInfo.pm</code>文件内容，<strong>针对 <code>/usr/share/perl5/PVE/APLInfo.pm</code> 文件的修改，执行<code>systemctl restart pvedaemon</code>后生效。</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /usr/share/perl5/PVE/APLInfo.pm /usr/share/perl5/PVE/APLInfo.pm.bak</span><br><span class="line">sed -i <span class="string">&quot;s#http://download.proxmox.com/images#https://mirrors.ustc.edu.cn/proxmox/images#g&quot;</span> /usr/share/perl5/PVE/APLInfo.pm</span><br></pre></td></tr></table></figure><h1 id="去除PVE未订阅提示">9 &nbsp&nbsp<a href="#去除PVE未订阅提示" class="headerlink" title="去除PVE未订阅提示"></a>去除PVE未订阅提示</h1><p><strong>完成如下文件内容修改后，注销浏览器当前的PVE登录信息，并重新登录就没有提示弹窗了。实测PVE 9.x版本执行该方法之后，WEB后台的「软件包版本」按钮无法响应，暂未排查到问题，后面有时间再跟进。</strong></p><ul><li><code>/usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js.bak</span><br><span class="line">sed -i <span class="string">&quot;s/if (res === null || res === undefined || \!res || res/if(/g&quot;</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js</span><br><span class="line">sed -i <span class="string">&quot;s/.data.status.toLowerCase() !== &#x27;active&#x27;/false/g&quot;</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js</span><br><span class="line">systemctl restart pveproxy</span><br></pre></td></tr></table></figure><div class="flex-column"><img data-src="/images/software/pve/pve-no-subscribe.webp">「无有效订阅」的提示弹窗</div><h1 id="后续PVE系统日常更新：">10 &nbsp&nbsp<a href="#后续PVE系统日常更新：" class="headerlink" title="后续PVE系统日常更新："></a>后续PVE系统日常更新：</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update &amp;&amp; apt dist-upgrade -y</span><br></pre></td></tr></table></figure><h1 id="后记">11 &nbsp&nbsp<a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>以下就是升级到最新的PVE 9.x版本的WEB后台界面了。</p><div class="flex-column"><img data-src="/images/software/pve/pve9x-web-control.webp">PVE 9.x的WEB后台界面</div><h1 id="参考文献">12 &nbsp&nbsp<a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>[1] Upgrade from 8 to 9[EB&#x2F;OL]. <a href="https://pve.proxmox.com/wiki/Upgrade_from_8_to_9">https://pve.proxmox.com/wiki/Upgrade_from_8_to_9</a>.<br>[2] Proxmox[EB&#x2F;OL]. <a href="https://mirrors.ustc.edu.cn/help/proxmox.html">https://mirrors.ustc.edu.cn/help/proxmox.html</a>.</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;1 &amp;nbsp&amp;nbsp&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;企业软件开发商&lt;code&gt;Proxmox Server Solutions</summary>
        
      
    
    
    
    <category term="post-articles" scheme="https://mister-kin.github.io/categories/post-articles/"/>
    
    <category term="2025-10" scheme="https://mister-kin.github.io/categories/post-articles/2025-10/"/>
    
    
    <category term="虚拟化系统" scheme="https://mister-kin.github.io/tags/%E8%99%9A%E6%8B%9F%E5%8C%96%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="HomeLab" scheme="https://mister-kin.github.io/tags/HomeLab/"/>
    
    <category term="PVE" scheme="https://mister-kin.github.io/tags/PVE/"/>
    
    <category term="升级" scheme="https://mister-kin.github.io/tags/%E5%8D%87%E7%BA%A7/"/>
    
    <category term="Proxmox" scheme="https://mister-kin.github.io/tags/Proxmox/"/>
    
    <category term="服务器" scheme="https://mister-kin.github.io/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>飞牛fnOS影视刮削的文件命名技巧</title>
    <link href="https://mister-kin.github.io/post-articles/2025-10/video-scraping-renaming-for-fnos/"/>
    <id>https://mister-kin.github.io/post-articles/2025-10/video-scraping-renaming-for-fnos/</id>
    <published>2025-10-29T13:46:47.000Z</published>
    <updated>2025-10-30T08:52:56.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言">1 &nbsp&nbsp<a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>使用飞牛影视有一段日子了，整体感觉上还行，数据刮削算是比较省心，今天抽空来聊聊我在这方面的经验。</p><h1 id="一般的影视刮削的文件命名规则">2 &nbsp&nbsp<a href="#一般的影视刮削的文件命名规则" class="headerlink" title="一般的影视刮削的文件命名规则"></a>一般的影视刮削的文件命名规则</h1><p><strong>以下规则不仅适用于飞牛影视，同样可应用于Emby、Jellyfin等媒体系统工具。</strong></p><h2 id="电影类型">2.1 &nbsp&nbsp<a href="#电影类型" class="headerlink" title="电影类型"></a>电影类型</h2><p>一般电影本身就是单个文件，文件命名规则：影视名称+年份。像这样保留原有的电影名称和对应年份时，即使遇到同名的电影，刮削上基本不会出现问题。示例：<code>星际穿越Interstellar.2014.mkv</code>。</p><h2 id="动漫番剧和电视剧类型">2.2 &nbsp&nbsp<a href="#动漫番剧和电视剧类型" class="headerlink" title="动漫番剧和电视剧类型"></a>动漫番剧和电视剧类型</h2><p>动漫番剧和电视剧，这种可能存在多季多集的情况，推荐按<code>季</code>分别创建一个文件夹存放每一季的文件。文件命名规则：影视名称+对应的每季每集。示例<code>夏目友人帐.S01.E01.mkv</code>或者<code>夏目友人帐.S01E01.mkv</code>。父文件夹命名为：<code>夏目友人帐.S01</code>。</p><p>我个人是喜欢使用<code>.</code>符号作为分隔符，方便快速阅览辨识。</p><h2 id="动漫番剧的特别篇">2.3 &nbsp&nbsp<a href="#动漫番剧的特别篇" class="headerlink" title="动漫番剧的特别篇"></a>动漫番剧的特别篇</h2><p>特别篇比较特殊，大部分情况可能需要人工校正刮削的数据。</p><p>目前我是将<code>SP</code>、<code>OVA</code>、<code>OAD</code>这些全都归入为特别篇类型，然后根据<code>季</code>的数量来判断使用不同的命名规则。为什么这样处理呢？因为飞牛影视的手动匹配逻辑，特别篇就只能输入<code>0</code>作为一个季。而多季多集的特别篇就不适用于这种逻辑。</p><div class="flex-column"><img data-src="/images/post-articles/2025-10/video-scraping-renaming-for-fnos/manual-scraping.webp">手动刮削匹配界面-影视匹配</div><h3 id="特别篇只有一季的情况">2.3.1 &nbsp&nbsp<a href="#特别篇只有一季的情况" class="headerlink" title="特别篇只有一季的情况"></a>特别篇只有一季的情况</h3><p>只有一季时，命名时就无需带入<code>季</code>的编号，只保留番剧名称和特别篇标识缩写即可，示例：<code>紫罗兰永恒花园.OVA.mp4</code>或者<code>紫罗兰永恒花园.OVA.一定会理解「爱」的真谛.mp4</code>。</p><div class="flex-row"><div class="flex-column"><img data-src="/images/post-articles/2025-10/video-scraping-renaming-for-fnos/voilet.webp">紫罗兰永恒花园-刮削效果</div><div class="flex-column"><img data-src="/images/post-articles/2025-10/video-scraping-renaming-for-fnos/voilet-details.webp">紫罗兰永恒花园-特别篇详情</div></div><h3 id="特别篇有多季的情况">2.3.2 &nbsp&nbsp<a href="#特别篇有多季的情况" class="headerlink" title="特别篇有多季的情况"></a>特别篇有多季的情况</h3><p>因为我个人喜欢按季存放对应的特别篇文件，每季的特别篇的文件集数编号都是按最后一集顺延+1编号，例如夏目友人帐第五季的特别篇，示例命名：<code>夏目友人帐.S05.E12.OVA1.mkv</code>。</p><p>其实IMDB网站上的数据，特别篇也是按最后一集顺延+1编号。</p><div class="flex-row"><div class="flex-column"><img data-src="/images/post-articles/2025-10/video-scraping-renaming-for-fnos/natsume.webp">夏目友人帐第五季-刮削效果</div><div class="flex-column"><img data-src="/images/post-articles/2025-10/video-scraping-renaming-for-fnos/natsume-details.webp">夏目友人帐第五季-特别篇1详情</div></div><div class="flex-column"><img data-src="/images/post-articles/2025-10/video-scraping-renaming-for-fnos/natsume-imdb.webp">IMDB网站数据-夏目友人帐第五季</div><h2 id="外挂字幕文件类型">2.4 &nbsp&nbsp<a href="#外挂字幕文件类型" class="headerlink" title="外挂字幕文件类型"></a>外挂字幕文件类型</h2><p>文件命名规则：字幕文件名保持与视频文件同名，最后加上分隔符和字幕语言类型。以下简单介绍几种语言类型：</p><ul><li>简体中文：推荐<code>chs</code>，不推荐<code>sc</code>，可能被识别成撒丁语，示例：<code>夏目友人帐.S01.E01.chs.ass</code></li><li>繁体中文：推荐<code>cht</code>，不推荐<code>tc</code>，可能被识别成und，示例：<code>夏目友人帐.S01.E01.cht.ass</code></li><li>日文：推荐<code>jap</code>，示例：<code>夏目友人帐.S01.E01.jap.ass</code></li><li>简中日文双语：示例：<code>夏目友人帐.S01.E01.chs&amp;jap.ass</code></li></ul><h1 id="批量重命名工具：PowerRename">3 &nbsp&nbsp<a href="#批量重命名工具：PowerRename" class="headerlink" title="批量重命名工具：PowerRename"></a>批量重命名工具：PowerRename</h1><p>文件管理少不了文件重命名，这里推荐一个工具<code>PowerRename</code>，该工具支持正则表达式。该工具是<code>PowerToys</code>的内置工具，仅适用于Windows平台。</p><p>安装方法：</p><ol><li>打开Windows系统的微软商店。</li><li>搜索安装<code>PowerToys</code></li><li>打开<code>PowerToys</code>界面并确保启用<code>PowerRename</code>，这样Windows中的右键菜单上下文就出现<code>PowerRename</code>选项了。</li></ol><div class="flex-row"><div class="flex-column"><img data-src="/images/post-articles/2025-10/video-scraping-renaming-for-fnos/powertoys.webp">微软商店界面-PowerToys</div><div class="flex-column"><img data-src="/images/post-articles/2025-10/video-scraping-renaming-for-fnos/powertoys-enable-powerrename.webp">PowerToys启用PowerRename</div></div><div class="flex-column"><img data-src="/images/post-articles/2025-10/video-scraping-renaming-for-fnos/right-click-menu.webp">右键菜单-PowerRename</div><h1 id="PowerRename的命名规则">4 &nbsp&nbsp<a href="#PowerRename的命名规则" class="headerlink" title="PowerRename的命名规则"></a>PowerRename的命名规则</h1><p>示例编码：<code>夏目友人帐.S05.E${increment=1,padding=2,start=1}</code>，示例图片中的<code>.*</code>是正则表达式，代表匹配所有任意字符。</p><p>这里简单介绍自动编号的规则：<code>${}</code>是属于高级计数器语法，<code>increment=1</code>代表每次增长1；<code>padding=2</code>代表自动使用前导零数填充为两位，例如数字1自动填充为<code>01</code>，当增长超过两位数时，例如三位数则不受限于该规则；<code>start=1</code>代表从1开始。</p><p>PowerRename的详细使用方法和语法规则可参阅：<a href="https://learn.microsoft.com/zh-cn/windows/powertoys/powerrename">PowerRename 实用工具 Windows</a></p><div class="flex-column"><img data-src="/images/post-articles/2025-10/video-scraping-renaming-for-fnos/powerraname.webp">PowerRename示例编码</div><h1 id="内容延伸：影视文件常见命名缩写含义">5 &nbsp&nbsp<a href="#内容延伸：影视文件常见命名缩写含义" class="headerlink" title="内容延伸：影视文件常见命名缩写含义"></a>内容延伸：影视文件常见命名缩写含义</h1><ul><li>S1: season1, 第一季</li><li>E1&#x2F;EP1: episode1, 第一集</li><li>SP: special, 特别篇</li><li>OVA: Original Video Animation, 原创动画录影带</li><li>OAD: Original Animation Disc, 原创动画光碟</li><li>OST: Original Soundtrack, 影视原声集</li><li>HD: Hign Definition, 高清</li><li>BD: Blu-ray Disc, 蓝光</li><li>X264&#x2F;HEVC: h264&#x2F;h265视频编码</li><li>AAC: 音频编码</li><li>CHS&#x2F;CHT&#x2F;JAP: 简体中文&#x2F;繁体中文字幕&#x2F;日文字幕</li><li>Director’s Cut: 导演剪辑版</li><li>On Air: TV版（电视节目或者动画播出时的版本）</li><li>Unrated: 未分级版</li><li>Extended: 加长版</li></ul><h1 id="参考文献">6 &nbsp&nbsp<a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>[1] 万剑归宗之刮削大法！史上最全从Emby命名规则到刮削设置一条龙图文教程！[EB&#x2F;OL]. <a href="https://post.smzdm.com/p/aox8wp36/">https://post.smzdm.com/p/aox8wp36/</a>.<br>[2] 电影电视剧动漫 标准命名规则，jellfin、emby、kodi都适用[EB&#x2F;OL]. <a href="https://www.shejibiji.com/archives/8295">https://www.shejibiji.com/archives/8295</a>.</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;1 &amp;nbsp&amp;nbsp&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;使用飞牛影视有一段日子了，整体感觉上还行，数据刮削算是比较省心，今天抽空来聊聊我在这方面的经验。&lt;/p&gt;
&lt;h1</summary>
        
      
    
    
    
    <category term="post-articles" scheme="https://mister-kin.github.io/categories/post-articles/"/>
    
    <category term="2025-10" scheme="https://mister-kin.github.io/categories/post-articles/2025-10/"/>
    
    
    <category term="fnOS" scheme="https://mister-kin.github.io/tags/fnOS/"/>
    
    <category term="飞牛" scheme="https://mister-kin.github.io/tags/%E9%A3%9E%E7%89%9B/"/>
    
    <category term="影视刮削" scheme="https://mister-kin.github.io/tags/%E5%BD%B1%E8%A7%86%E5%88%AE%E5%89%8A/"/>
    
    <category term="命名规则" scheme="https://mister-kin.github.io/tags/%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99/"/>
    
    <category term="技巧" scheme="https://mister-kin.github.io/tags/%E6%8A%80%E5%B7%A7/"/>
    
  </entry>
  
  <entry>
    <title>USB千兆网卡评测-Airsky USB-C/USB-A外置网卡</title>
    <link href="https://mister-kin.github.io/post-articles/2025-10/airsky-usb-c-usb-a-gigabit-ethernet-adapter-review/"/>
    <id>https://mister-kin.github.io/post-articles/2025-10/airsky-usb-c-usb-a-gigabit-ethernet-adapter-review/</id>
    <published>2025-10-27T15:14:58.000Z</published>
    <updated>2025-10-27T18:41:26.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言">1 &nbsp&nbsp<a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>前段时间从某宝上淘了一个USB外置网卡（USB C&#x2F;USB A二合一接口），整体使用体验还行，因此抽空写一下评测。</p><h1 id="产品包装">2 &nbsp&nbsp<a href="#产品包装" class="headerlink" title="产品包装"></a>产品包装</h1><p>外包装盒子比较简单，全英文描述。Made in China，中国生产，但商品编码是非国内常见69码，我推测这个商品原计划是用于出口的，不知道为啥在某宝上流通这个商品。</p><div class="flex-row"><div class="flex-column"><img data-src="/images/post-articles/2025-10/airsky-usb-c-usb-a-gigabit-ethernet-adapter-review/packaging-box-front.webp">包装盒正面</div><div class="flex-column"><img data-src="/images/post-articles/2025-10/airsky-usb-c-usb-a-gigabit-ethernet-adapter-review/packaging-box-back.webp">包装盒背面</div></div><h1 id="产品外观">3 &nbsp&nbsp<a href="#产品外观" class="headerlink" title="产品外观"></a>产品外观</h1><p>该网卡总共有3个接口：RJ45接口+USB-C (Type-C)接口+USB-A接口。RJ45接口另一头默认是USB-C接口，该接口可以作为中间接口，拼接USB-A接口，即二合一。</p><p>USB-C (Type-C)接口和USB-A接口，塑料外壳设计上就是相连起来，这点好评。如果是分离接口设计的话，日常使用过程中可能会丢失。</p><p>产品中间线长大约为12厘米，二合一拼接起来产品全长约为21.5厘米。</p><div class="flex-row"><div class="flex-column"><img data-src="/images/post-articles/2025-10/airsky-usb-c-usb-a-gigabit-ethernet-adapter-review/product.webp">产品外观</div><div class="flex-column"><img data-src="/images/post-articles/2025-10/airsky-usb-c-usb-a-gigabit-ethernet-adapter-review/product-length.webp">产品长度</div></div><h1 id="网卡芯片">4 &nbsp&nbsp<a href="#网卡芯片" class="headerlink" title="网卡芯片"></a>网卡芯片</h1><p>将网卡接入Windows系统中，通过设备管理器可以查询到硬件ID为<code>USB\VID_0BDA&amp;PID_8153&amp;REV_3100</code>。通过硬件ID网站查询可知，该网卡内置芯片为瑞昱Realtek的RTL8153芯片。</p><p>在瑞昱Realtek官网查询可知，该芯片是一个千兆以太网适配器，可以自适应协商速率<code>10/100/1000M</code>。</p><div class="flex-row"><div class="flex-column"><img data-src="/images/post-articles/2025-10/airsky-usb-c-usb-a-gigabit-ethernet-adapter-review/hardware-id.webp">硬件ID</div><div class="flex-column"><img data-src="/images/post-articles/2025-10/airsky-usb-c-usb-a-gigabit-ethernet-adapter-review/hardware-id-result.webp">硬件ID查询结果</div><div class="flex-column"><img data-src="/images/post-articles/2025-10/airsky-usb-c-usb-a-gigabit-ethernet-adapter-review/realtek-website.webp">realtek网站说明</div></div><h1 id="测试性能">5 &nbsp&nbsp<a href="#测试性能" class="headerlink" title="测试性能"></a>测试性能</h1><h2 id="Windows平台测试">5.1 &nbsp&nbsp<a href="#Windows平台测试" class="headerlink" title="Windows平台测试"></a>Windows平台测试</h2><p>测试平台：</p><ul><li>Windows 11 Pro 25H2：26200.6901</li><li>iperf3：3.19.1</li></ul><p>Windows中使用<code>iperf3</code>工具测试局域网速率，分别对USB-C接口和USB-A接口进行测试，结果一致为<code>950Mbps</code>，可见转接使用USB-A接口时也不会影响速率。考虑网络传输的开销（例如IP头部信息，TCP头部信息等），<code>950Mbps</code>算是发挥了RTL8153芯片原有的性能。</p><p>其他配置项目跟普通网卡一致，没啥区别。</p><div class="flex-row"><div class="flex-column"><img data-src="/images/post-articles/2025-10/airsky-usb-c-usb-a-gigabit-ethernet-adapter-review/iperf3-windows-usbc.webp">iperf3测速(USB-C接口)</div><div class="flex-column"><img data-src="/images/post-articles/2025-10/airsky-usb-c-usb-a-gigabit-ethernet-adapter-review/iperf3-windows-usba.webp">iperf3测速(USB-A接口)</div></div><h2 id="Android手机平台">5.2 &nbsp&nbsp<a href="#Android手机平台" class="headerlink" title="Android手机平台"></a>Android手机平台</h2><p>测试平台：</p><ul><li>手机：GT NEO 3 RMX3560</li><li>Android：14</li><li>iperf3：CloudCampus APP内置的iperf3工具</li></ul><p>关闭移动数据和WiFi，将网卡通过USB-C接口接入到手机中，打开开发者选项查看可知，手机是通过<code>RNDIS</code>方式（USB以太网，通过USB设备模拟为以太网接口）完成驱动适配的。通过<code>termux</code>应用查看IP，可看到该USB网卡也正常获取分配下来的IP。</p><p>但手机的<code>realme UI 5.0</code>系统本身并未提供修改USB网卡的IP分配方式的入口，这点比较可惜，这意味着没法设置为手动固定IP。因为手机也并未解锁BL获取ROOT权限，因此也没法通过<code>termux</code>设置IP这种系统相关参数。</p><div class="flex-row"><div class="flex-column"><img data-src="/images/post-articles/2025-10/airsky-usb-c-usb-a-gigabit-ethernet-adapter-review/test-phone.webp">手机版本</div><div class="flex-column"><img data-src="/images/post-articles/2025-10/airsky-usb-c-usb-a-gigabit-ethernet-adapter-review/test-phone-driver.webp">手机USB网卡驱动方式</div><div class="flex-column"><img data-src="/images/post-articles/2025-10/airsky-usb-c-usb-a-gigabit-ethernet-adapter-review/test-phone-ip.webp">手机USB网卡IP</div></div><p>Android手机测速结果为<code>304Mbps</code>。</p><p>对的，你没看错，测试用的<code>GT NEO 3</code>手机就只能跑到这个速率，不知道是系统上的限制还是联发科芯片的问题。为什么这样说呢？因为我额外找过朋友拿一个高通芯片的手机测试，网卡测速是能上到九百兆的。以后买手机，还是尽量买高通芯片吧。</p><div class="flex-column"><img data-src="/images/post-articles/2025-10/airsky-usb-c-usb-a-gigabit-ethernet-adapter-review/iperf3-android.webp">iperf3测速-Android</div><h1 id="总结">6 &nbsp&nbsp<a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>经常有调试网络设备的需求的朋友，可以考虑入手一个这样的USB网卡产品。</p><p>大部分普通的调试需求，只需要带个手机+USB网卡就行，十分地轻松便捷。</p><p>若手机有ROOT权限更佳，完全可以替代电脑进行调试工作，包括可以调整IP分配方式。</p><p>手机若没有ROOT，调试场景就比较受限，只推荐接入到已开启DHCP服务器的局域网中，这样也能避开手机无法手动设置固定IP的问题。</p><h1 id="参考文献">7 &nbsp&nbsp<a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>[1] Realtek USB FE &#x2F; GbE &#x2F; 2.5GbE &#x2F; 5G &#x2F; 10G Family Controller Software[EB&#x2F;OL]. <a href="https://www.realtek.com/Download/List?cate_id=585">https://www.realtek.com/Download/List?cate_id=585</a>.<br>[2] devicehunt[EB&#x2F;OL]. <a href="https://devicehunt.com/view/type/usb/vendor/0BDA/device/8153">https://devicehunt.com/view/type/usb/vendor/0BDA/device/8153</a>.</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;1 &amp;nbsp&amp;nbsp&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;前段时间从某宝上淘了一个USB外置网卡（USB C&amp;#x2F;USB</summary>
        
      
    
    
    
    <category term="post-articles" scheme="https://mister-kin.github.io/categories/post-articles/"/>
    
    <category term="2025-10" scheme="https://mister-kin.github.io/categories/post-articles/2025-10/"/>
    
    
    <category term="Airsky" scheme="https://mister-kin.github.io/tags/Airsky/"/>
    
    <category term="USB网卡" scheme="https://mister-kin.github.io/tags/USB%E7%BD%91%E5%8D%A1/"/>
    
    <category term="外置网卡" scheme="https://mister-kin.github.io/tags/%E5%A4%96%E7%BD%AE%E7%BD%91%E5%8D%A1/"/>
    
    <category term="评测" scheme="https://mister-kin.github.io/tags/%E8%AF%84%E6%B5%8B/"/>
    
    <category term="千兆" scheme="https://mister-kin.github.io/tags/%E5%8D%83%E5%85%86/"/>
    
  </entry>
  
  <entry>
    <title>飞牛fnOS调整AutoBangumi参数，以适配国内直连域名订阅mikanime.tv</title>
    <link href="https://mister-kin.github.io/post-articles/2025-10/auto-bangumi-set-mikanimetv-for-fnos/"/>
    <id>https://mister-kin.github.io/post-articles/2025-10/auto-bangumi-set-mikanimetv-for-fnos/</id>
    <published>2025-10-26T10:33:33.000Z</published>
    <updated>2025-10-26T19:54:39.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言">1 &nbsp&nbsp<a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>mikan站点目前是根据访问IP地区跳转域名，大陆IP是访问<code>mikanime.tv</code>域名，其他IP是访问<code>mikanani.me</code>域名。</p><p>在飞牛fnOS的应用中心上安装<code>AutoBangumi</code>，使用<code>mikanime.tv</code>域名的订阅链接进行下载时，会发现在<code>AutoBangumi</code>的日志中发现这样的警告信息<code>[Network] Failed to get torrents: https://mikanani.me/RSS/xxxxxx</code>。</p><p>很奇怪对吧！明明填写的是<code>mikanime.tv</code>域名的订阅链接，但是日志却是提示无法从<code>mikanani.me</code>域名链接中获取磁力呢？</p><p>原因是<code>AutoBangumi</code>的磁力搜索功能是根据<code>config/search_provider.json</code>中的url参数实现的，而该配置文件的参数默认为<code>mikanani.me</code>域名的url。</p><h1 id="配置方法">2 &nbsp&nbsp<a href="#配置方法" class="headerlink" title="配置方法"></a>配置方法</h1><p>测试版本：</p><ul><li>飞牛版本：fnOS 0.9.32</li><li>AutoBangumi版本：3.1.18</li></ul><p>在<code>文件管理</code>应用中找到<code>AutoBangumi</code>的应用配置文件：<code>存储空间1/应用文件/AutoBangumi/config/search_provider.json</code>，对应的原始路径是<code>/vol1/@appshare/AutoBangumi/config/search_provider.json</code>。</p><p>使用<code>文本编辑器</code>应用打开并编辑文件内容（确保已经提前在<code>应用中心</code>安装<code>文本编辑器</code>）：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;mikan&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mikanani.me/RSS/Search?searchstr=%s&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;nyaa&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://nyaa.si/?page=rss&amp;q=%s&amp;c=0_0&amp;f=0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dmhy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://dmhy.org/topics/rss/rss.xml?keyword=%s&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>将<code>mikan</code>的域名从<code>mikanani.me</code>更改为<code>mikanime.tv</code>：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;mikan&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mikanime.tv/RSS/Search?searchstr=%s&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;nyaa&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://nyaa.si/?page=rss&amp;q=%s&amp;c=0_0&amp;f=0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dmhy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://dmhy.org/topics/rss/rss.xml?keyword=%s&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><div class="flex-row"><div class="flex-column"><img data-src="/images/post-articles/2025-10/auto-bangumi-set-mikanimetv-for-fnos/config-path.webp">配置路径</div><div class="flex-column"><img data-src="/images/post-articles/2025-10/auto-bangumi-set-mikanimetv-for-fnos/config-file.webp">配置文件</div></div><p>P.S. 如果局域网网络整体被梯子代理的话，记得将飞牛fnOS的系统IP分流出去，不然处于代理状态下，配置了<code>mikanime.tv</code>也会自动跳转到<code>mikanani.me</code>。</p><h1 id="参考文献">3 &nbsp&nbsp<a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>[1] [错误报告]RSS订阅为国内域名(mikanime.tv)，但torrent获取仍为mikanime.me，以致出现网络连接失败问题[EB&#x2F;OL]. <a href="https://github.com/EstrellaXD/Auto_Bangumi/issues/804">https://github.com/EstrellaXD/Auto_Bangumi/issues/804</a>.<br>[2] 网络问题[EB&#x2F;OL]. <a href="https://www.autobangumi.org/faq/network.html">https://www.autobangumi.org/faq/network.html</a>.</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;1 &amp;nbsp&amp;nbsp&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="post-articles" scheme="https://mister-kin.github.io/categories/post-articles/"/>
    
    <category term="2025-10" scheme="https://mister-kin.github.io/categories/post-articles/2025-10/"/>
    
    
    <category term="fnOS" scheme="https://mister-kin.github.io/tags/fnOS/"/>
    
    <category term="飞牛" scheme="https://mister-kin.github.io/tags/%E9%A3%9E%E7%89%9B/"/>
    
    <category term="AutoBangumi" scheme="https://mister-kin.github.io/tags/AutoBangumi/"/>
    
    <category term="mikan" scheme="https://mister-kin.github.io/tags/mikan/"/>
    
  </entry>
  
  <entry>
    <title>Hexo博客添加robots.txt、ads.txt等文件到站点根目录</title>
    <link href="https://mister-kin.github.io/post-articles/2025-10/hexo-add-robots/"/>
    <id>https://mister-kin.github.io/post-articles/2025-10/hexo-add-robots/</id>
    <published>2025-10-24T19:20:22.000Z</published>
    <updated>2025-10-25T07:57:53.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言">1 &nbsp&nbsp<a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>如果想要添加一些文件到Hexo博客站点的根目录之下，该如何实现？例如添加<code>robots.txt</code>规范爬虫的规则文件或者AdSense的<code>ads.txt</code>的验证文件。</p><h1 id="配置方法">2 &nbsp&nbsp<a href="#配置方法" class="headerlink" title="配置方法"></a>配置方法</h1><p>从hexo博客的目录结构和构建方法来看，一般有两个路径可存放：</p><ul><li>将文件置于根目录之下的<code>source</code>文件夹内：这种方式，在运行<code>hexo generate</code>构建时，会自动拷贝文件到<code>public</code>目录之下。</li><li>将文件置于根目录之下的<code>public</code>文件夹内：这种方式，只适合每次手动添加。因为运行<code>hexo clean</code>命令时，<code>public</code>目录会被先清除之后再通过<code>hexo generate</code>重建。</li></ul><h1 id="总结">3 &nbsp&nbsp<a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>如果该资源文件一般不怎么需要频繁改动时，则推荐放到<code>source</code>文件夹内。</p><p>如果是经常需要改动的话，可以配置CI&#x2F;CD等工作流实现自动生成或者获取最新文件，置于<code>public</code>文件夹内。</p><h1 id="参考文献">4 &nbsp&nbsp<a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>[1] 给博客增加 Sitemap 和 Robots（Hexo）[EB&#x2F;OL]. <a href="https://www.guozhenyi.com/post/2025/03/14/hexo-site-add-sitemap-and-robots.html">https://www.guozhenyi.com/post/2025/03/14/hexo-site-add-sitemap-and-robots.html</a>.</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;1 &amp;nbsp&amp;nbsp&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="post-articles" scheme="https://mister-kin.github.io/categories/post-articles/"/>
    
    <category term="2025-10" scheme="https://mister-kin.github.io/categories/post-articles/2025-10/"/>
    
    
    <category term="Hexo" scheme="https://mister-kin.github.io/tags/Hexo/"/>
    
    <category term="robots.txt" scheme="https://mister-kin.github.io/tags/robots-txt/"/>
    
    <category term="ads.txt" scheme="https://mister-kin.github.io/tags/ads-txt/"/>
    
  </entry>
  
  <entry>
    <title>控制N卡风扇转速最简单的方式</title>
    <link href="https://mister-kin.github.io/post-articles/2025-10/easy-control-nvidia-graphic-card/"/>
    <id>https://mister-kin.github.io/post-articles/2025-10/easy-control-nvidia-graphic-card/</id>
    <published>2025-10-24T10:53:37.000Z</published>
    <updated>2025-10-25T07:57:53.000Z</updated>
    
    <content type="html"><![CDATA[<p>英伟达显卡驱动程序中自带包含一个Nvidia APP程序，该应用可以控制显卡风扇转速。</p><p>具体详细位置：系统-&gt;性能-&gt;风扇速度目标 (%)，其中可以设置手动模式或者自动模式。</p><p>Nvidia APP自566.36驱动程序版本起，就成为驱动组件的一部分。</p><div class="flex-column"><img data-src="/images/post-articles/2025-10/easy-control-nvidia-graphic-card/nvidia-app.webp">Nvidia APP控制风扇转速</div>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;英伟达显卡驱动程序中自带包含一个Nvidia APP程序，该应用可以控制显卡风扇转速。&lt;/p&gt;
&lt;p&gt;具体详细位置：系统-&amp;gt;性能-&amp;gt;风扇速度目标 (%)，其中可以设置手动模式或者自动模式。&lt;/p&gt;
&lt;p&gt;Nvidia</summary>
        
      
    
    
    
    <category term="post-articles" scheme="https://mister-kin.github.io/categories/post-articles/"/>
    
    <category term="2025-10" scheme="https://mister-kin.github.io/categories/post-articles/2025-10/"/>
    
    
    <category term="GPU" scheme="https://mister-kin.github.io/tags/GPU/"/>
    
    <category term="Nvidia APP" scheme="https://mister-kin.github.io/tags/Nvidia-APP/"/>
    
    <category term="GPU温度管理技巧" scheme="https://mister-kin.github.io/tags/GPU%E6%B8%A9%E5%BA%A6%E7%AE%A1%E7%90%86%E6%8A%80%E5%B7%A7/"/>
    
    <category term="控制风扇转速" scheme="https://mister-kin.github.io/tags/%E6%8E%A7%E5%88%B6%E9%A3%8E%E6%89%87%E8%BD%AC%E9%80%9F/"/>
    
  </entry>
  
  <entry>
    <title>拒绝网络垃圾，识别避开内容农场</title>
    <link href="https://mister-kin.github.io/post-articles/2025-10/content-farm-terminator/"/>
    <id>https://mister-kin.github.io/post-articles/2025-10/content-farm-terminator/</id>
    <published>2025-10-23T21:41:29.000Z</published>
    <updated>2025-10-24T01:29:28.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="什么是内容农场">1 &nbsp&nbsp<a href="#什么是内容农场" class="headerlink" title="什么是内容农场"></a>什么是内容农场</h1><p>相信不少朋友在网上冲浪时，经常会碰到一些内容网站，一天能产出发布几十篇文章，内容包罗万象但浅薄。</p><p>查阅这些文章的内容，不少甚至是错误的，完全是机器或者纯AI生成的无意义文章。</p><p>例如下面截图的这个「云原生实践」的网站，域名是<code>oryoy.com</code>，严重污染各大搜索引擎的搜索结果，尤其是bing必应搜索，污染最为严重。</p><div class="flex-column"><img data-src="/images/post-articles/2025-10/content-farm-terminator/trash-website.webp">垃圾网站-内容农场</div><p>这类网站就是内容农场（Content Farm），内容粗制滥造、缺乏求证，但这类网站SEO优化很厉害，一大堆热门关键词被搜索引擎搜录，导致搜索结果前段基本都是被内容农场填满。</p><h1 id="浏览器插件推荐：终结内容农场">2 &nbsp&nbsp<a href="#浏览器插件推荐：终结内容农场" class="headerlink" title="浏览器插件推荐：终结内容农场"></a>浏览器插件推荐：终结内容农场</h1><p>「终结内容农场」插件的诞生就是为了避开浏览这些垃圾网站。</p><p>插件的功能：</p><ul><li>自动检测搜索返回结果中的网站是否为内容农场，并加以标识，可以让用户第一时间避开点击。</li><li>即使误操作点击访问了内容农场，插件也会自动弹出封锁页面，让用户能及时关闭。</li><li>通过点击「查看」按钮也能查看被封锁的页面，插件会自动去除内容农场网站的广告，从而避免给它带来广告收益。</li><li>除了上述功能外，插件本身也能自定义黑名单，白名单等。</li></ul><p>插件的安装地址：</p><ul><li>火狐浏览器Firefox（也支持安卓版的Firefox版本）：<a href="https://addons.mozilla.org/zh-CN/firefox/addon/content-farm-terminator">https://addons.mozilla.org/zh-CN/firefox/addon/content-farm-terminator</a></li><li>微软EDGE浏览器：<a href="https://microsoftedge.microsoft.com/addons/detail/%E7%BB%88%E7%BB%93%E5%86%85%E5%AE%B9%E5%86%9C%E5%9C%BA/fgckcfkpckemdnnejbbfkkchanedbeje">https://microsoftedge.microsoft.com/addons/detail/%E7%BB%88%E7%BB%93%E5%86%85%E5%AE%B9%E5%86%9C%E5%9C%BA/fgckcfkpckemdnnejbbfkkchanedbeje</a></li><li>谷歌Chrome浏览器：<a href="https://chromewebstore.google.com/detail/content-farm-terminator/lcghoajegeldpfkfaejegfobkapnemjl">https://chromewebstore.google.com/detail/content-farm-terminator/lcghoajegeldpfkfaejegfobkapnemjl</a></li></ul><p>插件项目的地址：</p><ul><li>主页：<a href="https://danny0838.github.io/content-farm-terminator/zh/">https://danny0838.github.io/content-farm-terminator/zh/</a></li><li>Github仓库：<a href="https://github.com/danny0838/content-farm-terminator">https://github.com/danny0838/content-farm-terminator</a></li></ul><div class="flex-column"><img data-src="/images/post-articles/2025-10/content-farm-terminator/edge-adddon.webp">插件安装页面-微软EDGE浏览器</div><h1 id="安装实测效果">3 &nbsp&nbsp<a href="#安装实测效果" class="headerlink" title="安装实测效果"></a>安装实测效果</h1><p><strong>测试浏览器版本：Microsoft Edge v141.0.3537.99</strong></p><p>浏览器安装启用「终结内容农场」插件后，若搜索返回的结果中存在内容农场站点，可以看到插件自动添加感叹号标识出来。</p><p>即使误点击网站，插件也会首先弹出封锁页面。</p><div class="flex-row"><div class="flex-column"><img data-src="/images/post-articles/2025-10/content-farm-terminator/addon-effect1.webp">插件自动标识出内容农场</div><div class="flex-column"><img data-src="/images/post-articles/2025-10/content-farm-terminator/addon-effect2.webp">插件封锁页面</div></div>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;什么是内容农场&quot;&gt;1 &amp;nbsp&amp;nbsp&lt;a href=&quot;#什么是内容农场&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="post-articles" scheme="https://mister-kin.github.io/categories/post-articles/"/>
    
    <category term="2025-10" scheme="https://mister-kin.github.io/categories/post-articles/2025-10/"/>
    
    
    <category term="浏览器插件" scheme="https://mister-kin.github.io/tags/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6/"/>
    
    <category term="内容农场" scheme="https://mister-kin.github.io/tags/%E5%86%85%E5%AE%B9%E5%86%9C%E5%9C%BA/"/>
    
    <category term="终结内容农场" scheme="https://mister-kin.github.io/tags/%E7%BB%88%E7%BB%93%E5%86%85%E5%AE%B9%E5%86%9C%E5%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>为飞牛fnOS设置定时自动清空回收站</title>
    <link href="https://mister-kin.github.io/post-articles/2025-10/auto-emtpy-bin-for-fnos/"/>
    <id>https://mister-kin.github.io/post-articles/2025-10/auto-emtpy-bin-for-fnos/</id>
    <published>2025-10-22T22:09:56.000Z</published>
    <updated>2025-10-23T00:45:16.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="背景">1 &nbsp&nbsp<a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>截止2025-10-23，fnOS 0.9.30系统版本并没有提供官方软件工具执行计划任务，来实现自动清空回收站。</p><p>但手动执行清理日常使用fnOS系统中产生的回收站文件也是很繁琐。</p><p>fnOS是基于Debian系统开发定制的操作系统，那么可以通过Debian的crontab功能实现自动执行命令来完成定时自动清空回收站。</p><h1 id="设置步骤">2 &nbsp&nbsp<a href="#设置步骤" class="headerlink" title="设置步骤"></a>设置步骤</h1><p><strong>测试飞牛版本：fnOS 0.9.30</strong></p><h2 id="开启飞牛SSH功能并登录">2.1 &nbsp&nbsp<a href="#开启飞牛SSH功能并登录" class="headerlink" title="开启飞牛SSH功能并登录"></a>开启飞牛SSH功能并登录</h2><div class="flex-column"><img data-src="/images/post-articles/2025-10/auto-emtpy-bin-for-fnos/enable-ssh.webp">启用飞牛fnOS的SSH功能</div><p>开启SSH功能之后，输入如下命令登录飞牛fnOS系统：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh admin@飞牛ip</span><br><span class="line"><span class="comment"># 例如 ssh admin@192.168.1.10</span></span><br><span class="line"><span class="comment"># 然后输入帐号密码完成验证即可登录</span></span><br></pre></td></tr></table></figure><h2 id="设置crontab定时任务">2.2 &nbsp&nbsp<a href="#设置crontab定时任务" class="headerlink" title="设置crontab定时任务"></a>设置crontab定时任务</h2><p>首先来了解飞牛存储空间的回收站路径：<code>/vol1/1000/.@#local/trash</code>，<code>vol1</code>是代表<code>存储空间1</code>，<code>1000</code>是代表飞牛fnOS系统中的<code>第一个用户帐号</code>。</p><p>运行如下命令，编辑当前用户的定时任务列表：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure><p>首次执行编辑时，shell会提示让你选择编辑器，输入1选择nano编辑器就行。</p><div class="flex-column"><img data-src="/images/post-articles/2025-10/auto-emtpy-bin-for-fnos/select-editor.webp">选择nano编辑器</div><p>然后在底部输入如下crontab表达式，<code>rm -rf</code>代表强制递归删除，<code>*</code>是通配符，代表匹配了<code>/vol1/1000/.@#local/trash</code>之下所有文件和目录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 0 * * * <span class="built_in">rm</span> -rf /vol1/1000/.@#<span class="built_in">local</span>/trash/*</span><br></pre></td></tr></table></figure><div class="flex-column"><img data-src="/images/post-articles/2025-10/auto-emtpy-bin-for-fnos/crontab-expression.webp">输入crontab定时删除任务表达式</div><p>然后<code>Ctrl+S</code>键完成保存，<code>Ctrl+X</code>键退出编辑器。</p><p><code>crontab -e</code>完成编辑保存之后文件实际是存储在<code>/var/spool/cron/crontabs/对应帐号名</code>，例如我的帐号名为<code>admin</code>，该帐号定时任务列表就被存储在<code>/var/spool/cron/crontabs/admin</code>文件中。</p><h2 id="查看验证crontab是否配置成功">2.3 &nbsp&nbsp<a href="#查看验证crontab是否配置成功" class="headerlink" title="查看验证crontab是否配置成功"></a>查看验证crontab是否配置成功</h2><p>输入如下命令查看当前用户的定时任务列表，该命令实际上就是打印输出<code>/var/spool/cron/crontabs/admin</code>文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -l</span><br></pre></td></tr></table></figure><p>查看输出内容跟之前输入表达式无误后，就没问题了。</p><p>输入如下命令可以查看cron后台服务状态，状态显示<code>Active: active (running)</code>就代表服务正常运行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status cron.service</span><br></pre></td></tr></table></figure><div class="flex-column"><img data-src="/images/post-articles/2025-10/auto-emtpy-bin-for-fnos/cron-service.webp">cron后台服务状态运行正常</div><h2 id="关闭飞牛SSH功能">2.4 &nbsp&nbsp<a href="#关闭飞牛SSH功能" class="headerlink" title="关闭飞牛SSH功能"></a>关闭飞牛SSH功能</h2><p>如果读者fnOS系统是接入公网访问的话，上述设置完成之后，切记关闭飞牛SSH功能，避免被网络攻击者恶意攻击。</p><p>或者考虑更换SSH的端口、禁用密码登录仅使用密钥访问、部署Crowdsec或者Fail2Ban工具、端口敲门等手段来保证SSH服务的安全。</p><h1 id="延伸内容：crontab的表达式">3 &nbsp&nbsp<a href="#延伸内容：crontab的表达式" class="headerlink" title="延伸内容：crontab的表达式"></a>延伸内容：crontab的表达式</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* * * * * command_to_execute</span><br><span class="line">- - - - -</span><br><span class="line">| | | | |</span><br><span class="line">| | | | +----- 星期几 (0 - 7) (星期日为0或7)</span><br><span class="line">| | | +------- 月份 (1 - 12)</span><br><span class="line">| | +--------- 日 (1 - 31)</span><br><span class="line">| +----------- 小时 (0 - 23)</span><br><span class="line">+------------- 分钟 (0 - 59)</span><br></pre></td></tr></table></figure><p>特殊符号：<br><code>*</code> : 代表所有可能的值。<br><code>,</code> : 指定多个值，例如「1,3,5」。<br><code>-</code> : 指定一个范围，例如「1-5」。<br><code>/</code> : 指定间隔频率，例如「*&#x2F;2」表示每两单位。</p><p>crontab的表达式示例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0 2 * * * /root/command.sh <span class="comment"># 每天凌晨2点执行脚本，把2改成0，就是每天凌晨0点</span></span><br><span class="line">0 17 * * 1-5 /root/command.sh <span class="comment"># 每周一到周五的下午5点执行脚本</span></span><br><span class="line">*/10 * * * * /root/command.sh <span class="comment"># 每10分钟执行一次脚本</span></span><br></pre></td></tr></table></figure><h1 id="参考文献">4 &nbsp&nbsp<a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>[1] 飞牛能自动清空回收站吗?[EB&#x2F;OL]. <a href="https://club.fnnas.com/forum.php?mod=viewthread&tid=24685">https://club.fnnas.com/forum.php?mod=viewthread&amp;tid=24685</a>.</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;背景&quot;&gt;1 &amp;nbsp&amp;nbsp&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h1&gt;&lt;p&gt;截止2025-10-23，fnOS</summary>
        
      
    
    
    
    <category term="post-articles" scheme="https://mister-kin.github.io/categories/post-articles/"/>
    
    <category term="2025-10" scheme="https://mister-kin.github.io/categories/post-articles/2025-10/"/>
    
    
    <category term="fnOS" scheme="https://mister-kin.github.io/tags/fnOS/"/>
    
    <category term="飞牛" scheme="https://mister-kin.github.io/tags/%E9%A3%9E%E7%89%9B/"/>
    
    <category term="NAS" scheme="https://mister-kin.github.io/tags/NAS/"/>
    
    <category term="homelab" scheme="https://mister-kin.github.io/tags/homelab/"/>
    
    <category term="回收站" scheme="https://mister-kin.github.io/tags/%E5%9B%9E%E6%94%B6%E7%AB%99/"/>
    
  </entry>
  
</feed>

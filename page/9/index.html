<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222" media="(prefers-color-scheme: light)"><meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images_public/favicon/logo180_180.webp"><link rel="icon" type="image/png" sizes="32x32" href="/images_public/favicon/logo32_32.webp"><link rel="icon" type="image/png" sizes="16x16" href="/images_public/favicon/logo16_16.webp"><link rel="mask-icon" href="/images_public/favicon/logo.svg" color="#222"><meta name="google-site-verification" content="E78y8h8qjkh_kGDJlxSABXGg9Ei2mZHevxnXZkj_ypQ"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.36/fancybox/fancybox.css" integrity="sha256-zM8WXtG4eUn7dKKNMTuoWZub++VnSfaOpA/8PJfvTBo=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-bounce.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous" defer></script><script class="next-config" data-name="main" type="application/json">{"hostname":"mister-kin.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.23.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":null},"fold":{"enable":true,"height":600},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js" defer></script><meta name="description" content="Since you have chosen to chase, don&#39;t give up."><meta property="og:type" content="website"><meta property="og:title" content="Mr. Kin&#39;s Blog"><meta property="og:url" content="https://mister-kin.github.io/page/9/index.html"><meta property="og:site_name" content="Mr. Kin&#39;s Blog"><meta property="og:description" content="Since you have chosen to chase, don&#39;t give up."><meta property="og:locale" content="zh_CN"><meta property="article:author" content="Mr. Kin"><meta property="article:tag" content="Mr. Kin, MisterKin, Kin, CG, blender, 健先生, 技术分享, 编程, 自媒体, 开源"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://mister-kin.github.io/page/9/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/9/index.html","title":""}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Mr. Kin's Blog</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-170785127-1"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-170785127-1","only_pageview":false,"measure_protocol_api_secret":null}</script><script src="/js/third-party/analytics/google-analytics.js" defer></script><script size="300" alpha="0.6" zindex="-1" src="https://cdnjs.cloudflare.com/ajax/libs/ribbon.js/1.0.2/ribbon.min.js" defer></script><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script><script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous" defer></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.36/fancybox/fancybox.umd.js" integrity="sha256-hiUEBwFEpLF6DlB8sGXlKo4kPZ46Ui4qGpd0vrVkOm4=" crossorigin="anonymous" defer></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous" defer></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous" defer></script><script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script><script src="/js/pjax.js" defer></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous" defer></script><script src="/js/third-party/search/local-search.js" defer></script><script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.3.1/pdfobject.min.js","integrity":"sha256-jI72I8ZLVflVOisZIOaLvRew3tyvzeu6aZXFm7P7dEo="},"url":"/lib/pdf/web/viewer.html"}</script><script src="/js/third-party/tags/pdf.js" defer></script><script src="/js/third-party/fancybox.js" defer></script><script src="/js/third-party/pace.js" defer></script><script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"ams","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script><script src="/js/third-party/math/mathjax.js" defer></script><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><link rel="alternate" href="/atom.xml" title="Mr. Kin's Blog" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">Mr. Kin's Blog</h1><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">计算机知识分享/软件应用讲解</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="搜索" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-works"><a href="/works/" rel="section"><i class="fa fa-briefcase fa-fw"></i>作品</a></li><li class="menu-item menu-item-manuals"><a href="/manuals/" rel="section"><i class="fa fa-book fa-fw"></i>手册</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-commonweal"><a href="/404/" rel="section"><i class="fa fa-spinner fa-fw"></i>404</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-overview-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Mr. Kin" src="/images_public/avatar_alpha.webp"><p class="site-author-name" itemprop="name">Mr. Kin</p><div class="site-description" itemprop="description">Since you have chosen to chase, don't give up.</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">84</span> <span class="site-state-item-name">文章</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">14</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">188</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=2312463626&website=www.oicqzone.com" title="QQ → tencent:&#x2F;&#x2F;AddContact&#x2F;?fromId&#x3D;45&amp;fromSubId&#x3D;1&amp;subcmd&#x3D;all&amp;uin&#x3D;2312463626&amp;website&#x3D;www.oicqzone.com" rel="noopener me" target="_blank"><i class="fab fa-qq fa-fw"></i>QQ</a> </span><span class="links-of-author-item"><a href="mailto:im.misterkin@gmail.com" title="GMail → mailto:im.misterkin@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>GMail</a> </span><span class="links-of-author-item"><a href="/images_public/follow_me/wechat_official_accounts.webp" title="WeChat → &#x2F;images_public&#x2F;follow_me&#x2F;wechat_official_accounts.webp" rel="noopener me"><i class="fab fa-weixin fa-fw"></i>WeChat</a> </span><span class="links-of-author-item"><a href="https://github.com/mister-kin" title="Github → https:&#x2F;&#x2F;github.com&#x2F;mister-kin" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>Github</a> </span><span class="links-of-author-item"><a href="https://www.acfun.cn/u/73269306" title="AcFun → https:&#x2F;&#x2F;www.acfun.cn&#x2F;u&#x2F;73269306" rel="noopener me" target="_blank"><i class="fa fa-user-astronaut fa-fw"></i>AcFun</a> </span><span class="links-of-author-item"><a href="http://space.bilibili.com/17025250" title="Bilibli → http:&#x2F;&#x2F;space.bilibili.com&#x2F;17025250?" rel="noopener me" target="_blank"><i class="fa-brands fa-bilibili fa-fw"></i>Bilibli</a> </span><span class="links-of-author-item"><a href="http://i.youku.com/i/UNjA3MTk5Mjgw?spm=a2hzp.8253869.0.0" title="Youku → http:&#x2F;&#x2F;i.youku.com&#x2F;i&#x2F;UNjA3MTk5Mjgw?spm&#x3D;a2hzp.8253869.0.0" rel="noopener me" target="_blank"><i class="fa fa-chevron-circle-right fa-fw"></i>Youku</a> </span><span class="links-of-author-item"><a href="https://weibo.com/6270111192/profile?topnav=1&wvr=6&is_all=1" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;6270111192&#x2F;profile?topnav&#x3D;1&amp;wvr&#x3D;6&amp;is_all&#x3D;1" rel="noopener me" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a> </span><span class="links-of-author-item"><a href="https://www.toutiao.com/c/user/835254071079053/#mid=1663279303982091" title="Headline → https:&#x2F;&#x2F;www.toutiao.com&#x2F;c&#x2F;user&#x2F;835254071079053&#x2F;#mid&#x3D;1663279303982091" rel="noopener me" target="_blank"><i class="far fa-newspaper fa-fw"></i>Headline</a> </span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/drwu-94" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;drwu-94" rel="noopener me" target="_blank"><i class="fab fa-zhihu fa-fw"></i>Zhihu</a> </span><span class="links-of-author-item"><a href="https://www.youtube.com/channel/UCXqjfWLzMlRKxGC8syWj17Q?view_as=public" title="Youtube → https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCXqjfWLzMlRKxGC8syWj17Q?view_as&#x3D;public" rel="noopener me" target="_blank"><i class="fab fa-youtube fa-fw"></i>Youtube</a> </span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → &#x2F;atom.xml" rel="noopener me"><i class="fa fa-rss fa-fw"></i>RSS</a></span></div><div style="margin-top:15px"><a href="/about#联系方式"><button class="button-box">联系我</button></a> <a href="/about#关注我"><button class="button-box">关注我</button></a> <a href="/about#免费支持我"><button class="button-box">支持我</button></a></div><style type="text/css">.button-box{background:var(--btn-default-bg);border:2px solid var(--btn-default-border-color);border-radius:2px;color:var(--btn-default-color);display:inline-block;font-size:.875em;line-height:2;padding:0 12px;text-decoration:none;transition-property:background-color;transition-delay:0s;transition-duration:.2s;transition-timing-function:ease-in-out}.button-box:hover{background:var(--btn-default-hover-bg);border-color:var(--btn-default-hover-border-color);color:var(--btn-default-hover-color);cursor:pointer}</style></div></div><div class="back-to-top animated" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div><div class="sidebar-inner sidebar-blogroll"><div class="links-of-blogroll animated"><div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i> 链接推荐</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://william-wu97.github.io/vuepress-blog/" title="https:&#x2F;&#x2F;william-wu97.github.io&#x2F;vuepress-blog&#x2F;" rel="noopener" target="_blank">友链-William Wu's Blog</a></li></ul></div></div></aside></div><div class="main-inner index posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://mister-kin.github.io/software/nvidia-jetson/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images_public/avatar_alpha.webp"><meta itemprop="name" content="Mr. Kin"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Mr. Kin's Blog"><meta itemprop="description" content="Since you have chosen to chase, don't give up."></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="undefined | Mr. Kin's Blog"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/software/nvidia-jetson/" class="post-title-link" itemprop="url">英伟达Jetson开发板踩坑记录总结</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2023-09-23 04:19:03" itemprop="dateCreated datePublished" datetime="2023-09-23T04:19:03+08:00">2023-09-23</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-01-02 19:33:24" itemprop="dateModified" datetime="2025-01-02T19:33:24+08:00">2025-01-02</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/software/" itemprop="url" rel="index"><span itemprop="name">software</span></a> </span></span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>11k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>39 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><div class="note info no-icon"><p>文章推荐：<a target="_blank" rel="noopener" href="https://www.guyuehome.com/42097">Jetson nano 系统安装</a></p></div><div class="note danger no-icon"><p>本文绝大部分命令都是在<code>sudo -i</code>切换到root权限后操作的。</p></div><h1 id="测试项目">1 &nbsp&nbsp<a href="#测试项目" class="headerlink" title="测试项目"></a>测试项目</h1><ul><li>人体骨架检测：<a target="_blank" rel="noopener" href="https://github.com/facebookresearch/VideoPose3D">VideoPose3d</a></li><li>安卓版人体骨架检测，支持网络摄像头<a target="_blank" rel="noopener" href="https://github.com/serviceberry3/videopose3d_android">videopose3d_android</a></li><li>人体骨架检测（多人追踪版）：<a target="_blank" rel="noopener" href="https://github.com/LynnZhang9/VideoPose3D-for-multi-person-tracking">VideoPose3D-for-multi-person-tracking</a></li><li>谷歌的人体骨架检测：<a target="_blank" rel="noopener" href="https://github.com/michellelychan/posenet-pytorch">posenet-pytorch</a></li><li>人脸年龄修改：<a target="_blank" rel="noopener" href="https://github.com/InterDigitalInc/HRFAE">HRFAE</a></li></ul><h1 id="VideoPose3d">2 &nbsp&nbsp<a href="#VideoPose3d" class="headerlink" title="VideoPose3d"></a>VideoPose3d</h1><ul><li>Human3.6M数据集下载：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/425608868">Human3.6M全部数据集</a>和Human3.6M部分数据集</li></ul><h2 id="训练推理自定义视频">2.1 &nbsp&nbsp<a href="#训练推理自定义视频" class="headerlink" title="训练推理自定义视频"></a>训练推理自定义视频</h2><p>设置过程参见：<a target="_blank" rel="noopener" href="https://github.com/facebookresearch/VideoPose3D/blob/main/INFERENCE.md">Inference in the wild</a></p><h3 id="安装ffmpeg">2.1.1 &nbsp&nbsp<a href="#安装ffmpeg" class="headerlink" title="安装ffmpeg"></a>安装ffmpeg</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install ffmpeg</span><br></pre></td></tr></table></figure><h3 id="安装detectron2">2.1.2 &nbsp&nbsp<a href="#安装detectron2" class="headerlink" title="安装detectron2"></a>安装detectron2</h3><div class="note danger no-icon"><p><a target="_blank" rel="noopener" href="https://detectron2.readthedocs.io/en/latest/tutorials/install.html#install-pre-built-detectron2-linux-only">官方提供的whl安装包</a>并没有arm架构，因此需手动从源码构建安装。</p><p>也不要用命令安装最新版的detectron2：<code>python -m pip install &#39;git+https://github.com/facebookresearch/detectron2.git&#39;</code>，因为新版detectron2要求python3.8版本。问题参见：<a target="_blank" rel="noopener" href="https://github.com/facebookresearch/detectron2/issues/4910">Cannot import name &#39;cached_property&#39;</a></p></div><p>配置流程参照：<a target="_blank" rel="noopener" href="https://detectron2.readthedocs.io/en/latest/tutorials/install.html">Installation</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方案1：直接pip安装</span></span><br><span class="line"><span class="comment"># 指定特定commit，安装适合python3.7的版本</span></span><br><span class="line">pip3.7 install <span class="string">&#x27;git+https://github.com/facebookresearch/detectron2.git@d779ea63faa54fe42b9b4c280365eaafccb280d6&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方案2：手动从源码构建安装</span></span><br><span class="line"><span class="comment"># 如果网络不佳，直接访问网页下载压缩包：https://github.com/facebookresearch/detectron2/tree/d779ea63faa54fe42b9b4c280365eaafccb280d6</span></span><br><span class="line"><span class="comment"># zip包链接：https://github.com/facebookresearch/detectron2/archive/d779ea63faa54fe42b9b4c280365eaafccb280d6.zip</span></span><br><span class="line">git <span class="built_in">clone</span> -b d779ea63faa54fe42b9b4c280365eaafccb280d6 https://github.com/facebookresearch/detectron2.git</span><br><span class="line">python3.7 -m pip install -e detectron2</span><br></pre></td></tr></table></figure><h3 id="下载预训练模型">2.1.3 &nbsp&nbsp<a href="#下载预训练模型" class="headerlink" title="下载预训练模型"></a>下载预训练模型</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果VideoPose3D目录下没有checkpoint文件夹的话，先mkdir checkpoint</span></span><br><span class="line"><span class="built_in">cd</span> checkpoint</span><br><span class="line">wget https://dl.fbaipublicfiles.com/video-pose-3d/pretrained_h36m_detectron_coco.bin</span><br></pre></td></tr></table></figure><h3 id="推理2D关键点">2.1.4 &nbsp&nbsp<a href="#推理2D关键点" class="headerlink" title="推理2D关键点"></a>推理2D关键点</h3><ol><li>在 inference 文件夹中新建两个文件夹 input_directory 和 output_directory，input_directory用来存放需要处理的自定义视频，output_directory用来存放程序生成的每个视频的2D关键点数据文件，后缀名是.npz。</li><li>将需要处理自定义视频放入VideoPose3D&#x2F;inference&#x2F;input_directory&#x2F;中，切记需要先放入视频后再执行后面的命令。若不提前放入视频，最后执行run.py是会出现报错：keyError:output.mp4。其中「推理2D关键点」步骤中不会有ffmpeg相关视频处理的日志输出，「创建自定义数据集」步骤中不会显示出处理了xxx.npz文件和处理了多少帧frame，只输出saving和done这两句简单的日志，并且这种情况在data目录中生成data_2d_custom_myvideos.npz的数据集文件只有798字节，不到1KB的大小，属于无效文件。</li><li>执行命令推理2D关键点</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> inference</span><br><span class="line">python3.7 infer_video_d2.py \</span><br><span class="line">    --cfg COCO-Keypoints/keypoint_rcnn_R_101_FPN_3x.yaml \</span><br><span class="line">    --output-dir output_directory \</span><br><span class="line">    --image-ext mp4 \</span><br><span class="line">    input_directory</span><br></pre></td></tr></table></figure><ol><li>创建自定义数据集：程序根据VideoPose3D&#x2F;inference&#x2F;output_directory&#x2F;的每个视频的2D关键点数据文件.npz，在data目录下生成自定义的data_2d_custom_myvideos.npz文件。</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> data</span><br><span class="line">python3.7 prepare_data_2d_custom.py -i /home/nvidia/VideoPose3D/inference/output_directory/ -o myvideos</span><br><span class="line"><span class="built_in">cd</span> ..</span><br></pre></td></tr></table></figure><ol><li>渲染自定义视频并导出坐标：output.mp4是在VideoPose3D根目录下，不是inference&#x2F;output_directory&#x2F;。</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python3.7 run.py -d custom -k myvideos -arc 3,3,3,3,3 -c checkpoint --evaluate pretrained_h36m_detectron_coco.bin --render --viz-subject test_video.mp4 --viz-action custom --viz-camera 0 --viz-video /home/nvidia/VideoPose3D/inference/input_directory/test_video.mp4 --viz-output output.mp4 --viz-size 6</span><br><span class="line"><span class="comment"># 下面输入视频路径是绝对路径</span></span><br><span class="line"><span class="comment"># python3.7 run.py -d custom -k myvideos -arc 3,3,3,3,3 -c checkpoint --evaluate pretrained_h36m_detectron_coco.bin --render --viz-subject test_video.mp4 --viz-action custom --viz-camera 0 --viz-video /home/nvidia/VideoPose3D/inference/input_directory/test_video.mp4 --viz-output output.mp4 --viz-size 6</span></span><br></pre></td></tr></table></figure><h2 id="训练推理h36m视频">2.2 &nbsp&nbsp<a href="#训练推理h36m视频" class="headerlink" title="训练推理h36m视频"></a>训练推理h36m视频</h2><p>数据集设置步骤参考：<a target="_blank" rel="noopener" href="https://github.com/facebookresearch/VideoPose3D/blob/main/DATASETS.md#2d-detections-for-human36m">Dataset setup</a></p><ol><li>准备数据文件：在data目录下新建h36m文件夹，传入3d数据集的压缩包，目录结构图如下</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">data/</span><br><span class="line">  └── h36m/</span><br><span class="line">    ├── Poses_D3_Positions_S1.tgz</span><br><span class="line">    ├── Poses_D3_Positions_S5.tgz</span><br><span class="line">    ├── Poses_D3_Positions_S6.tgz</span><br><span class="line">    ├── Poses_D3_Positions_S7.tgz</span><br><span class="line">    ├── Poses_D3_Positions_S8.tgz</span><br><span class="line">    ├── Poses_D3_Positions_S9.tgz</span><br><span class="line">    └── Poses_D3_Positions_S11.tgz</span><br></pre></td></tr></table></figure><ol start="2"><li>数据处理</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解压数据集：</span></span><br><span class="line"><span class="built_in">cd</span> /home/nvidia/data/h36m/</span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> *.tgz; <span class="keyword">do</span> tar -xvzf <span class="variable">$file</span>; <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /home/nvidia/data</span><br><span class="line">pip3.7 install cdflib</span><br><span class="line">python3.7 prepare_data_h36m.py --from-source-cdf /home/nvidia/data/h36m/</span><br><span class="line"><span class="comment"># 运行成功后，data目录下生成两个文件：data_3d_h36m.npz和data_2d_h36m_gt.npz。</span></span><br></pre></td></tr></table></figure><ol start="3"><li>下载预训练模型</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> checkpoint</span><br><span class="line"><span class="built_in">cd</span> checkpoint</span><br><span class="line">wget https://dl.fbaipublicfiles.com/video-pose-3d/pretrained_h36m_cpn.bin</span><br><span class="line">wget https://dl.fbaipublicfiles.com/video-pose-3d/pretrained_humaneva15_detectron.bin</span><br><span class="line"><span class="built_in">cd</span> ..</span><br></pre></td></tr></table></figure><ol start="4"><li>测试Human3.6M模型数据</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python run.py -k cpn_ft_h36m_dbb -arc 3,3,3,3,3 -c checkpoint --evaluate pretrained_h36m_cpn.bin</span><br></pre></td></tr></table></figure><h1 id="HRFAE">3 &nbsp&nbsp<a href="#HRFAE" class="headerlink" title="HRFAE"></a>HRFAE</h1><p>官方要求的依赖库（注意torch需要是cuda版本的，因为源码是使用cuda设备的方法）</p><ul><li>Python 3.7</li><li>Pytorch 1.1</li><li>Numpy</li><li>Opencv</li><li>TensorboardX</li><li>Tensorboard_logger</li></ul><p>别人测试成功的依赖库版本：参见<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_52179028/article/details/127397877">成功运行HRFAE面部年龄编辑</a></p><ul><li>Python 3.7.13</li><li>Pytorch 1.10.2</li><li>Numpy 1.21.5</li><li>Opencv 4.6.0</li><li>Tensorboard 1.14.0</li><li>TensorboardX</li><li>Tensorboard-logger</li></ul><h2 id="预训练模型的配置步骤">3.1 &nbsp&nbsp<a href="#预训练模型的配置步骤" class="headerlink" title="预训练模型的配置步骤"></a>预训练模型的配置步骤</h2><ol><li>安装依赖库</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3.7 install TensorboardX Tensorboard_logger</span><br></pre></td></tr></table></figure><ol start="2"><li>修改test.py代码</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> HRFAE</span><br><span class="line">nano test.py</span><br><span class="line"><span class="comment"># 找到下面该行代码，将load函数，改成safe_load或者full_load</span></span><br><span class="line"><span class="comment"># config = yaml.load(open(&#x27;./configs/&#x27; + opts.config + &#x27;.yaml&#x27;, &#x27;r&#x27;))</span></span><br></pre></td></tr></table></figure><ol start="3"><li>下载预训练模型</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 科学网络条件好的，可以直接参考官方命令下载checkpoint</span></span><br><span class="line"><span class="built_in">cd</span> ./logs/001</span><br><span class="line">./download.sh</span><br><span class="line"><span class="comment"># 如果网络条件不行的话，直接使用链接下载后在传入logs目录，注意上传后记得修改属性权限755或者777</span></span><br><span class="line"><span class="comment"># https://partage.imt.fr/index.php/s/7DzqFHQggfJDw79/download</span></span><br></pre></td></tr></table></figure><ol start="4"><li>运行命令生成结果</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> HRFAE</span><br><span class="line"><span class="comment"># 年龄区间：20-70</span></span><br><span class="line">python3.7 test.py --config 001 --target_age 40</span><br></pre></td></tr></table></figure><h2 id="进程被Killed的故障排查">3.2 &nbsp&nbsp<a href="#进程被Killed的故障排查" class="headerlink" title="进程被Killed的故障排查"></a>进程被Killed的故障排查</h2><p>现象：终端输出一句「Killed」后，进程就闪退退出了。</p><p>原因：这是由于pytroch程序占用过多内存，引起系统OOM（Out of memory）机制。</p><p>解决方式：无。在我的尝试方法中，尝试了增加虚拟内存的大小至13GB，仍然是无法解决，依然是触发OOM了（即使我对pytorch进程禁用系统OOM killer，并观察内存占用情况，物理4GB全部吃满，虚拟内存zram占用到3.6GB后就整个系统卡死了）。推测可能还因为显存不足。</p><p>内存管理的相关命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看虚拟内存使用分配机制，vm.swappiness = 0：最大限度使用物理内存，vm.swappiness = 100：积极的使用交换空间</span></span><br><span class="line">sysctl -a| grep vm.swappiness</span><br><span class="line"><span class="comment"># vm.swappiness = 60</span></span><br><span class="line"><span class="comment"># 临时设置swappiness</span></span><br><span class="line"><span class="built_in">echo</span> 10 &gt; /proc/sys/vm/swappiness</span><br><span class="line"><span class="comment"># 查看内存使用率高的进程id</span></span><br><span class="line">top</span><br><span class="line"><span class="comment"># 对某个进程禁用系统OOM killer，$PID替换为进程ID数字即可</span></span><br><span class="line"><span class="built_in">echo</span> -17 &gt; /proc/<span class="variable">$PID</span>/oom_adj</span><br></pre></td></tr></table></figure><p>查看系统是否主动杀掉进程的日志排查：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看系统内核日志中最后7行</span></span><br><span class="line"><span class="built_in">sudo</span> dmesg | <span class="built_in">tail</span> -7</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过以下三种命令查看系统是否主动杀死程序进程</span></span><br><span class="line"><span class="comment"># 将dmesg命令的输出通过管道传递给egrep命令进行过滤。egrep命令使用正则表达式&#x27;killed process&#x27;来匹配包含&quot;killed process&quot;的行，并且使用-i选项忽略大小写。-B100选项会在匹配到的行之前显示100行的上下文。</span></span><br><span class="line">dmesg | egrep -i -B100 <span class="string">&#x27;killed process&#x27;</span></span><br><span class="line"><span class="comment"># 在/var/log/messages文件中搜索包含&quot;killed process&quot;的行，并且使用-i选项忽略大小写</span></span><br><span class="line">egrep -i <span class="string">&#x27;killed process&#x27;</span> /var/log/messages</span><br><span class="line"><span class="comment"># 在/var/log目录及其子目录下递归地搜索包含&quot;killed process&quot;的行，并且使用-i选项忽略大小写</span></span><br><span class="line">egrep -i -r <span class="string">&#x27;killed process&#x27;</span> /var/log</span><br><span class="line"><span class="comment"># 将journalctl -xb命令的输出通过管道传递给egrep命令进行过滤。journalctl -xb命令用于查看系统启动时的日志，并且使用-i选项忽略大小写</span></span><br><span class="line">journalctl -xb | egrep -i <span class="string">&#x27;killed process&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果未发现/var/log/messages文件，编辑50-default.conf文件，取消注释一行内容</span></span><br><span class="line">nano /etc/rsyslog.d/50-default.conf</span><br><span class="line"><span class="comment">#       mail,news.none          -/var/log/messages</span></span><br></pre></td></tr></table></figure><h2 id="自训练模型的配置步骤">3.3 &nbsp&nbsp<a href="#自训练模型的配置步骤" class="headerlink" title="自训练模型的配置步骤"></a>自训练模型的配置步骤</h2><h2 id="Windows-x86版环境搭建">3.4 &nbsp&nbsp<a href="#Windows-x86版环境搭建" class="headerlink" title="Windows x86版环境搭建"></a>Windows x86版环境搭建</h2><ol><li>安装miniconda3：<a target="_blank" rel="noopener" href="https://docs.conda.io/projects/miniconda/en/latest/">跳转下载</a></li><li>创建并切换新的虚拟环境</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda create -n hrfae python=3.7</span><br><span class="line">conda activate hrfae</span><br></pre></td></tr></table></figure><ol><li>先下载并安装torch和torchvision的cuda版whl（建议先关闭科学上网，避免浪费科学上网的流量），使用<code>pip install</code>即可：<a target="_blank" rel="noopener" href="https://download.pytorch.org/whl/cu117/torch-1.13.1%2Bcu117-cp37-cp37m-win_amd64.whl">torch-1.13.1+cu117-cp37-cp37m-win_amd64.whl</a>和<a target="_blank" rel="noopener" href="https://download.pytorch.org/whl/cu117/torchvision-0.14.1%2Bcu117-cp37-cp37m-win_amd64.whl">torchvision-0.14.1+cu117-cp37-cp37m-win_amd64.whl</a>。别使用<code>conda install torch</code>安装torch，否则易出现一些版本依赖的问题。例如：<code>解决python urllib3 v2.0 only supports OpenSSL 1.1.1+, currently</code>。这是因为openSSL版本太低，可以安装低版本解决：<code>pip install urllib3==1.23 -i https://pypi.tuna.tsinghua.edu.cn/simple</code>。</li><li>之后一一安装其他库，如果<code>conda install</code>找不到库，就使用<code>pip install</code>，例如<code>Tensorboard-logger</code>。</li></ol><h1 id="硬件型号">4 &nbsp&nbsp<a href="#硬件型号" class="headerlink" title="硬件型号"></a>硬件型号</h1><p>NVIDIA Jetson TX2 NX，16GB eMMC，额外挂载一个120G的固态盘。</p><h1 id="烧录系统">5 &nbsp&nbsp<a href="#烧录系统" class="headerlink" title="烧录系统"></a>烧录系统</h1><h2 id="烧录前准备">5.1 &nbsp&nbsp<a href="#烧录前准备" class="headerlink" title="烧录前准备"></a>烧录前准备</h2><ul><li>一台Ubuntu 18.00 LTS系统的PC（其他的jetson设备不能作为刷机主机，必须用ubuntu电脑。也不能用vbox或者vmware之类的虚拟机创建ubuntu刷机主机，因为虚拟机系统无法处理usb等底层的驱动，这会导致刷机时一直提示未正确进入刷机模式，但实际机器已经真正进入到刷机模式的）</li><li>一条micro-usb数据线</li><li>根据硬件型号选择<a target="_blank" rel="noopener" href="https://developer.nvidia.com/embedded/jetson-linux-archive">对应版本</a>的<a target="_blank" rel="noopener" href="https://developer.nvidia.com/downloads/embedded/l4t/r32_release_v7.4/t186/jetson_linux_r32.7.4_aarch64.tbz2">驱动包（BSP包）</a>和<a target="_blank" rel="noopener" href="https://developer.nvidia.com/downloads/embedded/l4t/r32_release_v7.4/t186/tegra_linux_sample-root-filesystem_r32.7.4_aarch64.tbz2">示例根文件系统</a>（目前适配TX2 NX的最新版为<a target="_blank" rel="noopener" href="https://developer.nvidia.com/embedded/linux-tegra-r3274">R32.7.4</a>）。</li></ul><h2 id="烧录步骤">5.2 &nbsp&nbsp<a href="#烧录步骤" class="headerlink" title="烧录步骤"></a>烧录步骤</h2><ol><li>在刷机主机ubuntu系统中启用ssh。</li><li>通过<a target="_blank" rel="noopener" href="https://winscp.net/eng/download.php">WinSCP</a>将驱动包（BSP包）和示例根文件系统复制至刷机主机系统中的家目录<code>/home</code>。</li><li>刷机命令</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装必要库</span></span><br><span class="line"><span class="built_in">sudo</span> apt-get install qemu-user-static</span><br><span class="line"><span class="built_in">sudo</span> apt-get install python</span><br><span class="line"><span class="comment"># j为使用bzip2算法，x为解压，v为显示操作的详细信息，f为指定操作的文件</span></span><br><span class="line"><span class="built_in">sudo</span> tar -jxvf Jetson_Linux_R32.7.4_aarch64.tbz2</span><br><span class="line"><span class="built_in">cd</span> Linux_for_Tegra/rootfs</span><br><span class="line"><span class="comment"># p为于保留文件的权限和属性，即保持原有文件的权限模式和时间戳信息</span></span><br><span class="line"><span class="built_in">sudo</span> tar -jxpf ../../Tegra_Linux_Sample-Root-Filesystem_R32.7.4_aarch64.tbz2</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"><span class="comment"># 拷贝NVIDIA库文件到文件系统</span></span><br><span class="line"><span class="built_in">sudo</span> ./apply_binaries.sh</span><br><span class="line"><span class="built_in">cd</span> Linux_for_Tegra/tools</span><br><span class="line"><span class="comment"># u为用户名，p为密码</span></span><br><span class="line"><span class="built_in">sudo</span> ./l4t_create_default_user.sh -u nvidia -p nvidia</span><br><span class="line"><span class="comment"># NVIDIA Jetson是通过Micro USB接口烧录系统。Recovery模式下可以进行文件系统更新包含：内核Kernel，启动Bootloader，文件系统Rootfs等。</span></span><br><span class="line"><span class="comment"># 进入Recovery模式的步骤：</span></span><br><span class="line"><span class="comment"># 1）使用Micro USB 的数据线连接Jetson和Ubuntu Host主机(一端插在开发板的OTG口,一端插在Ubuntu Host主机的usb插口)；</span></span><br><span class="line"><span class="comment"># 2）连接开发板的电源;</span></span><br><span class="line"><span class="comment"># 3) 按住RECOVERY按键，同时按下RESET复位按键1-2秒后释放，等待3秒释放RECOVERY按键，此时开发板进入Recovery刷机模式 （可通过在Ubuntu Host主机上运行命令：lsusb查看是否有Nvidia Corporation 设备（不同Jetson模块USB VID/PID 不同）来确认是否进入正常）</span></span><br><span class="line"><span class="comment"># 执行刷机命令</span></span><br><span class="line"><span class="built_in">cd</span> Linux_for_Tegra</span><br><span class="line"><span class="built_in">sudo</span> ./flash.sh jetson-xavier-nx-devkit-tx2-nx mmcblk0p1</span><br></pre></td></tr></table></figure><h2 id="烧录后无法进入到桌面环境">5.3 &nbsp&nbsp<a href="#烧录后无法进入到桌面环境" class="headerlink" title="烧录后无法进入到桌面环境"></a>烧录后无法进入到桌面环境</h2><p>Jetson报错无法进到桌面环境： Failed to start nvpmode1 server. 和Failed to start load kernel modules</p><p>无桌面环境的条件下进入到终端操作的两种方式：</p><ul><li>ssh连接虚拟ip：jetson的usb有虚拟ip，可以通过ssh远程连接，用上位机通过USB数据线（有的USB线不能传数据只能充电，因为只有电源线和地线）连接jetson。打开上位机远程登陆开发板，登陆ip为：192.168.55.1：<code>ssh nvidia@192.168.55.1</code></li><li>按ctrl+alt+F1-F6等组合键切换命令窗口1-6</li></ul><p>Failed to start nvpmode1 server一般是桌面环境出问题引起的，重装桌面环境即可。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install nvidia-l4t-x11</span><br><span class="line"><span class="built_in">sudo</span> reboot</span><br></pre></td></tr></table></figure><p>Failed to start load kernel modules一般配置方面出问题，重新运行更新配置。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换到root模式，并保留当前终端环境</span></span><br><span class="line"><span class="built_in">sudo</span> -i</span><br><span class="line">apt-get update</span><br><span class="line">dpkg --configure -a</span><br><span class="line">apt-get dist-upgrade</span><br><span class="line">apt-get -f install</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><h2 id="为TX2-NX这种老硬件安装Ubuntu-20-04">5.4 &nbsp&nbsp<a href="#为TX2-NX这种老硬件安装Ubuntu-20-04" class="headerlink" title="为TX2 NX这种老硬件安装Ubuntu 20.04"></a>为TX2 NX这种老硬件安装Ubuntu 20.04</h2><p>为Jetson TX2 NX或者Jetson Nano这种老硬件安装Ubuntu 20.04（官方最新只支持Ubuntu 18.04）的两种方式：</p><ul><li>使用社区提供的三方系统ubuntu 20.04：<a target="_blank" rel="noopener" href="https://qengineering.eu/install-pytorch-on-jetson-nano.html">Install PyTorch on Jetson Nano</a>和<a target="_blank" rel="noopener" href="https://github.com/Qengineering/Jetson-Nano-Ubuntu-20-image">Jetson-Nano-Ubuntu-20-image</a>。这种方式需要烧录到SD卡，并且系统解压后高达19.1GB，建议是准备一个64GB容量的SD卡，即TF卡。</li><li>设置软件源更新（我尝试过按官方升级的方式修改源，并未成功，估计是连20.04也太老了）：<a target="_blank" rel="noopener" href="https://www.guyuehome.com/36629">Jetson Nano 系统升级至Ubuntu 20.04</a></li></ul><h1 id="为开发板设置SSD固态为系统盘">6 &nbsp&nbsp<a href="#为开发板设置SSD固态为系统盘" class="headerlink" title="为开发板设置SSD固态为系统盘"></a>为开发板设置SSD固态为系统盘</h1><p>NVMe SSD固态硬盘仅作为系统盘（rootfs和用户区），系统的启动引导依然是通过SD卡或者内置EMMC的存储，比如升级设备树dtb仍然是在SD卡或者EMMC中。</p><ol><li>格式化硬盘：打开软件列表搜索disk，打开ubuntu自带的Disks工具，选择识别到的SSD，按Ctrl+F对硬盘进行快速格式化，点击Format（不覆盖已存在的数据），点击Format（只是弹窗查看确认该操作影响到的设备），输入密码提权操作。默认最大分区，直接下一步。分区名字填ssd，其他选项默认（Type：ext4），点击create创建。点击分区左下角的三角符号（▶）进行挂载（状态变化：Not Mounted -&gt; Mounted at &#x2F;media&#x2F;nvidia&#x2F;ssd）。</li><li>下载系统盘转换程序的源码：<code>git clone https://github.com/jetsonhacks/rootOnNVMe.git</code>。如果克隆仓库失败，访问网页下载压缩包，再解压通过WinSCP上传到开发板家目录（上传后记得将文件的权限设置为0755，否则运行程序时会提示无权限）。</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> rootOnNVMe</span><br><span class="line"><span class="comment"># 这个过程耗时较久，请耐心等待执行完毕再执行下一步</span></span><br><span class="line"><span class="comment"># 建议是刚烧录好系统之后就执行这一步转换，否则EMMC数据一旦很多的话，这步操作的转换过程十分漫长</span></span><br><span class="line">./copy-rootfs-ssd.sh</span><br><span class="line">./setup-service.sh</span><br><span class="line"><span class="built_in">sudo</span> reboot</span><br></pre></td></tr></table></figure><ol start="3"><li>运行命令<code>df -h</code>：可以看到挂载根目录的分区大小已经是SSD固态硬盘的120G的容量，不是以前EMMC的16G。</li></ol><h1 id="Jetson-TX2更换软件源">7 &nbsp&nbsp<a href="#Jetson-TX2更换软件源" class="headerlink" title="Jetson TX2更换软件源"></a>Jetson TX2更换软件源</h1><p>备份并编辑软件源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 备份/etc/lib路径下的source.list文件，</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> /etc/apt/sources.list /etc/apt/sources.list.bak</span><br><span class="line"><span class="comment"># i进入编辑模式。按esc键退出模式，先按gg（到达顶部），然后dG全部删除。:wq保存编辑并退出vi。</span></span><br><span class="line"><span class="built_in">sudo</span> vim /etc/apt/sources.list</span><br><span class="line"><span class="comment"># 编辑软件源后，更新拉取源表</span></span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br></pre></td></tr></table></figure><p>清华源：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial-updates main restricted universe multiverse</span><br><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial-security main restricted universe multiverse</span><br><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial-backports main restricted universe multiverse</span><br><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial main universe restricted</span><br><span class="line">deb-src http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial main universe restricted</span><br></pre></td></tr></table></figure><p>假如默认官方源被删除的话，可以用下面的可用官方源恢复：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">deb http://ports.ubuntu.com/ubuntu-ports/ bionic main restricted</span><br><span class="line">deb-src http://ports.ubuntu.com/ubuntu-ports/ bionic main restricted</span><br><span class="line">deb http://ports.ubuntu.com/ubuntu-ports/ bionic-updates main restricted</span><br><span class="line">deb-src http://ports.ubuntu.com/ubuntu-ports/ bionic-updates main restricted</span><br><span class="line">deb http://ports.ubuntu.com/ubuntu-ports/ bionic universe</span><br><span class="line">deb-src http://ports.ubuntu.com/ubuntu-ports/ bionic universe</span><br><span class="line">deb http://ports.ubuntu.com/ubuntu-ports/ bionic-updates universe</span><br><span class="line">deb-src http://ports.ubuntu.com/ubuntu-ports/ bionic-updates universe</span><br><span class="line">deb http://ports.ubuntu.com/ubuntu-ports/ bionic multiverse</span><br><span class="line">deb-src http://ports.ubuntu.com/ubuntu-ports/ bionic multiverse</span><br><span class="line">deb http://ports.ubuntu.com/ubuntu-ports/ bionic-updates multiverse</span><br><span class="line">deb-src http://ports.ubuntu.com/ubuntu-ports/ bionic-updates multiverse</span><br><span class="line">deb http://ports.ubuntu.com/ubuntu-ports/ bionic-backports main restricted universe multiverse</span><br><span class="line">deb-src http://ports.ubuntu.com/ubuntu-ports/ bionic-backports main restricted universe multiverse</span><br><span class="line"><span class="comment"># deb http://archive.canonical.com/ubuntu bionic partner</span></span><br><span class="line"><span class="comment"># deb-src http://archive.canonical.com/ubuntu bionic partner</span></span><br><span class="line">deb http://ports.ubuntu.com/ubuntu-ports/ bionic-security main restricted</span><br><span class="line">deb-src http://ports.ubuntu.com/ubuntu-ports/ bionic-security main restricted</span><br><span class="line">deb http://ports.ubuntu.com/ubuntu-ports/ bionic-security universe</span><br><span class="line">deb-src http://ports.ubuntu.com/ubuntu-ports/ bionic-security universe</span><br><span class="line">deb http://ports.ubuntu.com/ubuntu-ports/ bionic-security multiverse</span><br><span class="line">deb-src http://ports.ubuntu.com/ubuntu-ports/ bionic-security multiverse</span><br></pre></td></tr></table></figure><h1 id="配置python">8 &nbsp&nbsp<a href="#配置python" class="headerlink" title="配置python"></a>配置python</h1><p>查看<a target="_blank" rel="noopener" href="https://github.com/pytorch/vision#installation">torchvision的README页面</a>，可知torch和torchvision对应版本信息，以及所要求的python版本。</p><table><thead><tr><th align="left">torch</th><th align="left">torchvision</th><th align="left">Python</th></tr></thead><tbody><tr><td align="left">1.10</td><td align="left">0.11</td><td align="left">&gt;&#x3D;3.6, &lt;&#x3D;3.9</td></tr></tbody></table><p>综合考虑，因为需要安装v1.10.2的pytorch，因此python选用v3.7（很多深度学习项目要求最低的python版本是v3.7），避免v3.8-v3.9可能会因此太新导致编译出错。</p><h2 id="pyton3-6">8.1 &nbsp&nbsp<a href="#pyton3-6" class="headerlink" title="pyton3.6"></a>pyton3.6</h2><p>系统自带pyton3.6.9，运行pip3报错：pip3:command not found</p><p>解决方法：<code>sudo apt install python3-pip</code></p><h2 id="pyton3-7">8.2 &nbsp&nbsp<a href="#pyton3-7" class="headerlink" title="pyton3.7"></a>pyton3.7</h2><p>pyton3.7版本需要手动编译。下载<a target="_blank" rel="noopener" href="https://www.python.org/ftp/python/3.7.16/Python-3.7.16.tar.xz">python3.7.16源码压缩包</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过ssh连接到开发板系统，通过winscp上传python源码压缩包到开发板的家目录</span></span><br><span class="line">tar -xf Python-3.7.16.tar.xz</span><br><span class="line"><span class="comment"># 安装构建pyhon所需的包，使用清华源的话，安装libncurses5库可能会出现库依赖错误，这个需要用ubuntu官方源（bionic源）才能解决，其他库可以用清华源</span></span><br><span class="line"><span class="built_in">sudo</span> apt install build-essential zlib1g-dev libncurses5-dev libgdbm-dev libnss3-dev libssl-dev libreadline-dev libffi-dev libbz2-dev liblzma-dev</span><br><span class="line"><span class="comment"># 或者build-dep参数让ubuntu自动搜索相关包。使用这个命令，记得apt list自行核对下其他额外包有无安装好，参照「系统缺乏库的一些报错」小节。</span></span><br><span class="line"><span class="comment"># 如果build-dep报错：Error :: You must put some &#x27;source&#x27; URIs in your sources.list，请启用/etc/apt/sources.list文件中的deb-src源，即取消注释。修改完成后重新运行sudo apt update。</span></span><br><span class="line"><span class="built_in">sudo</span> apt build-dep python3</span><br><span class="line"><span class="comment"># prefix配置安装路径，方便卸载时直接删除prefix的路径即可</span></span><br><span class="line">./configure --prefix=/usr/local/python3.7</span><br><span class="line"></span><br><span class="line"><span class="comment"># 假设使用conda创建虚拟环境的话，可以用以下方式配置安装路径</span></span><br><span class="line"><span class="comment"># 安装到miniconda环境（base）</span></span><br><span class="line">./configure --prefix=/root/miniconda3/lib/python3.7</span><br><span class="line"></span><br><span class="line"><span class="comment"># npro查看处理器核心数，lscpu查看处理器详情，-j无参为使用所有核心，后面跟数字就是并行编译数量</span></span><br><span class="line">make -j</span><br><span class="line"><span class="comment"># 安装python</span></span><br><span class="line"><span class="built_in">sudo</span> make install</span><br><span class="line"><span class="built_in">cd</span> /usr/bin/</span><br><span class="line"><span class="comment"># 创建python3.7和pip3.7软链接</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -s /usr/local/python3.7/bin/python3.7 python3.7</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -s /usr/local/python3.7/bin/pip3.7 pip3.7</span><br><span class="line"><span class="comment"># 配置pip源</span></span><br><span class="line">pip3.7 config <span class="built_in">set</span> global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"><span class="comment"># export bin目录到path</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/usr/local/python3.7/bin</span><br></pre></td></tr></table></figure><h3 id="系统缺乏库的一些报错：">8.2.1 &nbsp&nbsp<a href="#系统缺乏库的一些报错：" class="headerlink" title="系统缺乏库的一些报错："></a>系统缺乏库的一些报错：</h3><ul><li>缺乏libssl-dev库：pip is configured with locations that require TLS&#x2F;SSL, however the ssl module in Python is not available。实际上</li><li>缺乏libffi-dev库：ModuleNotFoundError: No module named &#39;_ctypes&#39;</li><li>缺乏libbz2-dev库（Detectron2需要用到）：ModuleNotFoundError: No module named &#39;_bz2&#39;</li><li>缺乏liblzma-dev库（Detectron2需要用到）：ModuleNotFoundError: No module named &#39;_lzma&#39;</li></ul><h3 id="TLS-SSL报错的另类解决方式">8.2.2 &nbsp&nbsp<a href="#TLS-SSL报错的另类解决方式" class="headerlink" title="TLS&#x2F;SSL报错的另类解决方式"></a>TLS&#x2F;SSL报错的另类解决方式</h3><p>如果因为缺乏libssl-dev库，导致编译出来的python报错TLS&#x2F;SSL的话，实际上这个问题可以通过换pip源解决，必须是http源。</p><p>创建并编辑pip配置文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> ~/.pip</span><br><span class="line"><span class="built_in">cd</span> ~/.pip</span><br><span class="line"><span class="built_in">touch</span> pip.conf</span><br><span class="line">nano pip.conf</span><br></pre></td></tr></table></figure><p>pip源设置内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">index-url = http://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line">[install]</span><br><span class="line">trusted-host = pypi.tuna.tsinghua.edu.cn</span><br></pre></td></tr></table></figure><h3 id="安装系统库时的依赖版本报错">8.2.3 &nbsp&nbsp<a href="#安装系统库时的依赖版本报错" class="headerlink" title="安装系统库时的依赖版本报错"></a>安装系统库时的依赖版本报错</h3><p>报错内容：libssl-dev : Depends: libssl1.0.0 (&#x3D; 1.0.2g-1ubuntu4) but 1.0.2g-1ubuntu4.15 is to be installed</p><p>报错原因：要装的库OpenSSL，它需要依赖的包是X，但需要的X是A版本，但是系统环境中已经存在另外的程序，它也需要的依赖X，并且需要的是X另外一个版本B，两个版本之间发生冲突了。所以无法安装。</p><p>解决方法：<code>sudo apt install libssl1.0.0=1.0.2g-1ubuntu4</code>，即安装推荐的折中版本（报错提示有给出）。</p><h2 id="pypi清华源">8.3 &nbsp&nbsp<a href="#pypi清华源" class="headerlink" title="pypi清华源"></a>pypi清华源</h2><ul><li>临时使用：<code>pip install -i https://pypi.tuna.tsinghua.edu.cn/simple some-package</code></li><li>设置默认 (版本需&gt;&#x3D;10.0.0) ：<code>pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</code></li><li>升级pip本体<ul><li>官方源升级pip：<code>python -m pip install --upgrade pip</code></li><li>清华源升级pip：<code>python -m pip install -i https://pypi.tuna.tsinghua.edu.cn/simple --upgrade pip</code></li></ul></li></ul><h1 id="解决报错「Illegal-instruction-core-dumped-」">9 &nbsp&nbsp<a href="#解决报错「Illegal-instruction-core-dumped-」" class="headerlink" title="解决报错「Illegal instruction (core dumped)」"></a>解决报错「Illegal instruction (core dumped)」</h1><p>为了防止出现 “Illegal instruction (core dumped)” 报错，需要在 ~&#x2F;.bashrc 最后添加如下语句，保存修改后，重启系统</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> OPENBLAS_CORETYPE=ARMV8</span><br></pre></td></tr></table></figure><p>若是export导出环境变量之后，仍是出现相同的报错的话，则可能是安装包版本问题或者程序包问题。</p><h1 id="安装jetson-stats查看开发板情况">10 &nbsp&nbsp<a href="#安装jetson-stats查看开发板情况" class="headerlink" title="安装jetson-stats查看开发板情况"></a>安装jetson-stats查看开发板情况</h1><p>安装<a target="_blank" rel="noopener" href="https://pypi.org/project/jetson-stats/">jetson-stats</a>前记得把pip源更换为清华源：<code>sudo -H pip3.7 install -U jetson-stats</code></p><p>安装好jetson-stats之后，可以安装nvidia-jetpack包，使用jetson_release查看开发板信息（注意需提前装好jetson-stats）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install nvidia-jetpack</span><br><span class="line"><span class="built_in">sudo</span> jetson_release</span><br></pre></td></tr></table></figure><h2 id="The-jetson-stats-service-is-not-active">10.1 &nbsp&nbsp<a href="#The-jetson-stats-service-is-not-active" class="headerlink" title="The jetson_stats.service is not active"></a>The jetson_stats.service is not active</h2><p>报错情况，jtop（jetson_stats.service）不能运行，systemctl查看服务状态为activating：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">The jetson_stats.service is not active. Please run:</span><br><span class="line"><span class="built_in">sudo</span> systemctl restart jetson_stats.service</span><br></pre></td></tr></table></figure><p>解决方法：把pip源更换为清华源后，重新安装jetson-stats。</p><h1 id="为开发板安装CUDA、cuDNN、TensorRT库">11 &nbsp&nbsp<a href="#为开发板安装CUDA、cuDNN、TensorRT库" class="headerlink" title="为开发板安装CUDA、cuDNN、TensorRT库"></a>为开发板安装CUDA、cuDNN、TensorRT库</h1><p>示例根文件系统并未包含cuda等库，因此烧录系统之后，需要手动安装CUDA、cuDNN、TensorRT库。</p><ol><li>打开<a target="_blank" rel="noopener" href="https://developer.nvidia.com/sdk-manager">sdk-manager</a>下载网站，注册英伟达开发者帐号（注意是developer.nvidia.com域名，搜索nvidia register关键字注册的域名可能是partner.nvidia.com，即nvonline）。</li><li>下载最新的deb安装包，当前最新的是NVIDIA SDK Manager 1.9.3.deb。</li><li>安装sdk-manager：<code>sudo apt install sdkmanager_1.9.3-10904_amd64.deb</code></li><li>运行sdk-manager：终端运行命令<code>sdk-manager</code>或者在应用程序列表中找到SDKManager图标打开。</li><li>登录帐号（developer开发者帐号会打开浏览器登录，nvonline是直接在软件内页面登录），建议勾选上「Stay logged in」，避免因为安装出错后重复打开应用又要重新登录。</li><li>sdk-manager第一步：等待程序自动检测出开发板信息，若没正确识别到开发板，请手动在Target Hardware选择正确的开发板型号（比如我的是TX2 NX型号）。剩余默认即可，附加SDK（DeepStreem）不需要勾选上。</li><li>sdk-manager第二步：HOST COMPONENTS设置的是烧录主机的环境（清华镜像源可装），TARGET COMPONENTS（开发板环境，Jetson OS不要勾选，因为前面的步骤已经烧录过了。其他的SDK Components全部勾上）（清华源无法安装，会报错：SDK Manager received errors while using apt commands on your system，需换回官方源，并且是需要编辑开发板上的sources.list，编辑host主机上的sources.list源是没用的）。用micro-usb线连接开发板和烧录主机，点击下一步，提示指定路径不存在，点击create完成创建即可，这里输入烧录主机的密码用来提权。之后弹出一个窗口设置开发板帐号密码信息： 确认开发板型号，IPv4用192.168.55.1（usb连接的虚拟ip），系统账户名和系统密码，其余默认，之后点击Install确认安装库。</li><li>sdk-manager第三步：安装过程。</li><li>sdk-manager第四步：exit退出。</li><li>设置环境变量：sdk-manager安装好库之后，会自动添加export环境变量语句到用户级的.bashrc配置文件中（注意只是添加而已，仍需手动source ~&#x2F;.bashrc，确保是在普通账户的终端下执行该命令）。但是root账户目录的.bashrc配置文件需手动配置</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 刷新bash配置，普通账户nvidia的终端下执行该命令</span></span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br><span class="line"><span class="comment"># 切换root权限</span></span><br><span class="line"><span class="built_in">sudo</span> -i</span><br><span class="line"><span class="comment"># 切换root权限后，工作目录会自动转到root的家目录下</span></span><br><span class="line">nano .bashrc</span><br><span class="line"><span class="comment"># 将以下两条命令添加到.bashrc的底部</span></span><br><span class="line"><span class="built_in">export</span> PATH=/usr/local/cuda-10.2/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=/usr/local/cuda-10.2/lib64:<span class="variable">$LD_LIBRARY_PATH</span></span><br><span class="line"><span class="built_in">source</span> .bashrc</span><br></pre></td></tr></table></figure><ol start="11"><li>查看cuda库的安装状态的命令：<code>jtop</code>和<code>nvcc -V</code>&#x2F;<code>nvcc --version</code>。</li><li>配置 cuDNN：sdk-manager虽然安装了cuDNN，但没有将对应的头文件、库文件放到cuda目录。</li></ol><div class="note danger no-icon"><p>不配置这个也可以，但编译opencv with cuda时需要手动指定路径到&#x2F;usr&#x2F;include和&#x2F;usr&#x2F;lib&#x2F;aarch64-linux-gnu</p></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sdk-manager安装路径</span></span><br><span class="line"><span class="comment"># cuDNN 默认安装路径在 /usr/lib/aarch64-linux-gnu</span></span><br><span class="line"><span class="comment"># CUDA 默认安装路径在 /usr/local/cuda 下</span></span><br><span class="line"><span class="comment"># cuDNN的头文件在：/usr/include，库文件位于：/usr/lib/aarch64-linux-gnu</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制文件到cuda目录下</span></span><br><span class="line"><span class="built_in">cd</span> /usr/include &amp;&amp; <span class="built_in">sudo</span> <span class="built_in">cp</span> cudnn* /usr/local/cuda-10.2/include</span><br><span class="line"><span class="built_in">cd</span> /usr/lib/aarch64-linux-gnu &amp;&amp; <span class="built_in">sudo</span> <span class="built_in">cp</span> libcudnn* /usr/local/cuda-10.2/lib64</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改文件权限，修改复制完的头文件与库文件的权限，所有用户都可读，可写，可执行：</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> 777 /usr/local/cuda-10.2/include/cudnn.h</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> 777 /usr/local/cuda-10.2/lib64/libcudnn*</span><br><span class="line"></span><br><span class="line"><span class="comment"># 软链接移动之后就失效了，需重新软链接，这里的8.2.1和8对应安装的cudnn版本号和首数字</span></span><br><span class="line"><span class="built_in">cd</span> /usr/local/cuda-10.2/lib64</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -sf libcudnn.so /etc/alternatives/libcudnn_so</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -sf libcudnn.so.8.2.1 libcudnn.so.8</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -sf libcudnn_ops_train.so /etc/alternatives/libcudnn_ops_train_so</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -sf libcudnn_ops_train.so.8.2.1 libcudnn_ops_train.so.8</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -sf libcudnn_ops_infer.so /etc/alternatives/libcudnn_ops_infer_so</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -sf libcudnn_ops_infer.so.8.2.1 libcudnn_ops_infer.so.8</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -sf libcudnn_adv_train.so /etc/alternatives/libcudnn_adv_train_so</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -sf libcudnn_adv_train.so.8.2.1 libcudnn_adv_train.so.8</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -sf libcudnn_adv_infer.so /etc/alternatives/libcudnn_adv_infer_so</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -sf libcudnn_adv_infer.so.8.2.1 libcudnn_adv_infer.so.8</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -sf libcudnn_cnn_train.so /etc/alternatives/libcudnn_cnn_train_so</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -sf libcudnn_cnn_train.so.8.2.1 libcudnn_cnn_train.so.8</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -sf libcudnn_cnn_infer.so /etc/alternatives/libcudnn_cnn_infer_so</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -sf libcudnn_cnn_infer.so.8.2.1 libcudnn_cnn_infer.so.8</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> libcudnn_static.a /etc/alternatives/libcudnn_stlib</span><br><span class="line"><span class="comment"># 更新系统动态链接库</span></span><br><span class="line"><span class="built_in">sudo</span> ldconfig</span><br></pre></td></tr></table></figure><ol start="13"><li>测试Cudnn（可选）</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> -r /usr/src/cudnn_samples_v8/ ~/</span><br><span class="line"><span class="built_in">cd</span> ~/cudnn_samples_v8/mnistCUDNN</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> 777 ~/cudnn_samples_v8</span><br><span class="line"><span class="built_in">sudo</span> make clean &amp;&amp; <span class="built_in">sudo</span> make</span><br><span class="line">./mnistCUDNN</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置成功输出：</span></span><br><span class="line"><span class="comment"># Result of classification: 1 3 5</span></span><br><span class="line"><span class="comment"># Test passed!</span></span><br></pre></td></tr></table></figure><h1 id="安装pytorch和pytorch-vision">12 &nbsp&nbsp<a href="#安装pytorch和pytorch-vision" class="headerlink" title="安装pytorch和pytorch vision"></a>安装pytorch和pytorch vision</h1><h2 id="pyton3-6-1">12.1 &nbsp&nbsp<a href="#pyton3-6-1" class="headerlink" title="pyton3.6"></a>pyton3.6</h2><h3 id="为python3-6安装pytorch">12.1.1 &nbsp&nbsp<a href="#为python3-6安装pytorch" class="headerlink" title="为python3.6安装pytorch"></a>为python3.6安装pytorch</h3><p>pyton3.6直接访问<a target="_blank" rel="noopener" href="https://forums.developer.nvidia.com/t/pytorch-for-jetson/72048">nvidia官网PyTorch for Jetson帖子</a>下载官方编译提供的版本：<a target="_blank" rel="noopener" href="https://nvidia.box.com/shared/static/fjtbno0vpo676a25cgvuqc1wty0fkkg6.whl">点击跳转下载whl</a>，安装命令：<code>pip3.6 install torch-1.10.0-cp36-cp36m-linux_aarch64.whl</code></p><h3 id="为python3-6编译torchvision">12.1.2 &nbsp&nbsp<a href="#为python3-6编译torchvision" class="headerlink" title="为python3.6编译torchvision"></a>为python3.6编译torchvision</h3><p>同<a href="#%E4%B8%BApython3-7%E7%BC%96%E8%AF%91torchvision">为python3.7编译torchvision</a></p><h2 id="pyton3-7-1">12.2 &nbsp&nbsp<a href="#pyton3-7-1" class="headerlink" title="pyton3.7"></a>pyton3.7</h2><h3 id="为python3-7编译pytorch">12.2.1 &nbsp&nbsp<a href="#为python3-7编译pytorch" class="headerlink" title="为python3.7编译pytorch"></a>为python3.7编译pytorch</h3><div class="note danger no-icon"><p>注意：编译过程十分耗时，请耐心等待！我测试的机器型号为TX2 NX，编译耗时23个小时（大部分时间都是停留在编译caffe2仓库）。</p></div><p>由于英伟达官方只提供python3.6版本的pytorch安装包，并且<a target="_blank" rel="noopener" href="https://download.pytorch.org/whl/torch_stable.html">torch库官方下载站</a>也没有arm芯片（aarch）的cu102版whl安装包，cpu版倒是有提供，因此pyton3.7的cuda版pytorch需要自行从源码编译。</p><p>编译步骤参考<a target="_blank" rel="noopener" href="https://forums.developer.nvidia.com/t/pytorch-for-jetson/72048">nvidia官网PyTorch for Jetson帖子</a>的Instructions小节的Build from Source内容。</p><ol><li>设置开发板功率模式</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置最大功率模式，CPU和GPU频率最大</span></span><br><span class="line"><span class="comment"># on Xavier NX, use -m 2  instead (15W 6-core mode)</span></span><br><span class="line"><span class="built_in">sudo</span> nvpmodel -m 0</span><br><span class="line"><span class="comment"># 开启最大性能（重启开发板就会自动失效），运行命令不加任何参数就是将CPU、GPU、EMC的频率设置到最大</span></span><br><span class="line"><span class="built_in">sudo</span> jetson_clocks</span><br><span class="line"><span class="comment"># 查询当前工作模式</span></span><br><span class="line"><span class="built_in">sudo</span> nvpmodel -q verbose</span><br><span class="line"><span class="comment"># 查看当前硬件频率情况</span></span><br><span class="line"><span class="built_in">sudo</span> jetson_clocks --show</span><br><span class="line"><span class="comment"># 如果是想要临时开启最大性能模式jetson_clocks</span></span><br><span class="line"><span class="comment"># 请在开启之前，运行sudo jetson_clocks --store记录普通状态的设置</span></span><br><span class="line"><span class="comment"># 之后运行sudo jetson_clocks开启最大性能</span></span><br><span class="line"><span class="comment"># 完成任务后运行sudo jetson_clocks --restore恢复普通状态的设置，就是关闭最大性能模式</span></span><br><span class="line"><span class="comment"># 如果开启最大性能模式之前没有sudo jetson_clocks --store记录状态，那么只能是重启机器，再运行设置</span></span><br></pre></td></tr></table></figure><ol start="2"><li>下载PyTorch源码（v1.10.2）</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/nvidia</span><br><span class="line"><span class="comment"># 其实不推荐用--recursive递归克隆git子项目，容易出现克隆失败</span></span><br><span class="line">git <span class="built_in">clone</span> --recursive --branch v1.10.2 http://github.com/pytorch/pytorch</span><br><span class="line"><span class="comment"># 假如已经执行了上述命令，如果只有子项目报错的话，可以试试直接执行git submodule update --recursive</span></span><br><span class="line"><span class="comment"># 下面是pytorch官方README给出的方法</span></span><br><span class="line"><span class="comment"># if you are updating an existing checkout</span></span><br><span class="line">git submodule <span class="built_in">sync</span></span><br><span class="line">git submodule update --init --recursive --<span class="built_in">jobs</span> 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推荐方式，先克隆主项目，再克隆子项目</span></span><br><span class="line">git <span class="built_in">clone</span> --branch v1.10.2 http://github.com/pytorch/pytorch</span><br><span class="line"><span class="built_in">cd</span> pytorch</span><br><span class="line">git submodule update --init --recursive</span><br><span class="line"><span class="comment"># 如果出现失败，重复执行这条命令，直到克隆成功</span></span><br><span class="line">git submodule update --recursive</span><br><span class="line"><span class="comment"># 我的情况在克隆子项目时，无论是init还是update阶段，linux-syscall-support这个仓库总是克隆不下来，因为它是chromium.googlesource.com域名，没法裸连成功。在github上搜索到镜像仓库https://github.com/cpp-pm/linux-syscall-support（如果是其他的github上的镜像仓库，要注意查看该仓库是否及时从上游获取更新，确保包含有e1e7b0ad8ee99a875b272c8e33e308472e897660这个commit，否则递归处理会提示找不到这个commit）</span></span><br><span class="line"><span class="comment"># 在使用https://github.com/cpp-pm/linux-syscall-support镜像仓库时，我仍然出现了连接失败。奇怪的是，其他github链接可以正常连接，唯独这个库连接不上。没法子，通过ping github.com得到一个返回ip：20.205.243.166。手动指向ip的话，需要关闭ssl证书验证，不然很容易报错（尤其是http的ssl证书验证）</span></span><br><span class="line"><span class="comment"># 如果无法直接ping得到ip，访问网页：https://www.ipaddress.com/，输入对应域名，比如raw.githubusercontent.com，查看返回的真实ip。</span></span><br><span class="line"><span class="comment"># 设置git重定向仓库链接，直接指向ip地址</span></span><br><span class="line">git config --global http.sslVerify <span class="literal">false</span></span><br><span class="line">git config --global https.sslVerify <span class="literal">false</span></span><br><span class="line">git config --global url.<span class="string">&quot;https://20.205.243.166/cpp-pm/linux-syscall-support&quot;</span>.insteadOf <span class="string">&quot;https://chromium.googlesource.com/linux-syscall-support&quot;</span></span><br><span class="line"><span class="comment"># 或者编辑git配置文件，在.gitconfig文件中添加如下参数</span></span><br><span class="line"><span class="comment"># 如果仍然不起作用的话，可以在http类目下添加允许重定向：followRedirects = true。命令操作：git config --global http.followRedirects true</span></span><br><span class="line">nano ~/.gitconfig</span><br><span class="line">[http]</span><br><span class="line">        sslverify = <span class="literal">false</span></span><br><span class="line">[https]</span><br><span class="line">        sslverify = <span class="literal">false</span></span><br><span class="line">[url <span class="string">&quot;https://20.205.243.166/cpp-pm/linux-syscall-support&quot;</span>]</span><br><span class="line">        insteadOf = https://chromium.googlesource.com/linux-syscall-support</span><br><span class="line"></span><br><span class="line"><span class="comment"># chromium.googlesource.com还可以尝试Agora.io提供的镜像网站，具体参考内容https://webrtc.agora.io/mirror/</span></span><br><span class="line"><span class="comment"># 但我的情况设置了，依旧也是连接超时</span></span><br><span class="line"><span class="comment"># git config --global url.http://120.92.49.206:3232/chromiumsrc/linux-syscall-support.git.insteadOf https://chromium.googlesource.com/linux-syscall-support.git</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 假设在克隆或者构建子项目出错时，想全部清除所有子项目的话，通过下面的命令完成（下面的目录是我对.gitmodules文件通过正则表达式处理得到的）</span></span><br><span class="line"><span class="comment"># cd pytorch</span></span><br><span class="line"><span class="comment"># rm third_party/pybind11 third_party/cub third_party/eigen third_party/googletest third_party/benchmark third_party/protobuf third_party/ios-cmake third_party/NNPACK third_party/gloo third_party/pthreadpool third_party/FXdiv third_party/FP16 third_party/psimd third_party/zstd third_party/cpuinfo third_party/python-enum third_party/python-peachpy third_party/python-six third_party/onnx third_party/onnx-tensorrt third_party/sleef third_party/ideep third_party/nccl/nccl third_party/gemmlowp/gemmlowp third_party/QNNPACK third_party/neon2sse third_party/fbgemm third_party/foxi third_party/tbb android/libs/fbjni third_party/XNNPACK third_party/fmt third_party/tensorpipe third_party/cudnn_frontend third_party/kineto third_party/pocketfft third_party/breakpad</span></span><br></pre></td></tr></table></figure><ol start="3"><li>根据<a target="_blank" rel="noopener" href="https://gist.github.com/dusty-nv/ce51796085178e1f38e3c6a1663a93a1#file-pytorch-1-10-jetpack-4-5-1-patch">patch内容</a>手动为patch新修复的代码：就是根据patch文件内容查找对应文件的对应行数，同步改动的代码。如果懒得改动的话，直接下载我修改好的文件，上传替换就行。patch代码主要解决编译报错的问题（详见编译步骤参考帖子）</li></ol><ul><li><a href="/post-assets/nvidia-jetson/vec256_float_neon.h">vec256_float_neon.h</a></li><li><a href="/post-assets/nvidia-jetson/CUDAContext.cpp">CUDAContext.cpp</a></li><li><a href="/post-assets/nvidia-jetson/KernelUtils.h">KernelUtils.h</a></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> pytorch</span><br><span class="line"><span class="comment"># 因为WinSCP使用普通账户连接的rscp，权限不够，因此建议先直接用vscode编辑文件，之后再上传到家目录，用root权限替换掉对应文件。</span></span><br><span class="line"><span class="built_in">mv</span> aten/src/ATen/cpu/vec/vec256/vec256_float_neon.h aten/src/ATen/cpu/vec/vec256/vec256_float_neon.h.bak</span><br><span class="line"><span class="built_in">mv</span> ../vec256_float_neon.h aten/src/ATen/cpu/vec/vec256/vec256_float_neon.h</span><br><span class="line"><span class="built_in">mv</span> aten/src/ATen/cuda/CUDAContext.cpp aten/src/ATen/cuda/CUDAContext.cpp.bak</span><br><span class="line"><span class="built_in">mv</span> ../CUDAContext.cpp aten/src/ATen/cuda/CUDAContext.cpp</span><br><span class="line"><span class="built_in">mv</span> aten/src/ATen/cuda/detail/KernelUtils.h aten/src/ATen/cuda/detail/KernelUtils.h.bak</span><br><span class="line"><span class="built_in">mv</span> ../KernelUtils.h aten/src/ATen/cuda/detail/KernelUtils.h</span><br></pre></td></tr></table></figure><ol start="4"><li>设置构建参数的环境变量（如果有改变终端，记得重新export这些环境变量）</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> USE_NCCL=0</span><br><span class="line"><span class="comment"># skip setting this if you want to enable OpenMPI backend</span></span><br><span class="line"><span class="built_in">export</span> USE_DISTRIBUTED=0</span><br><span class="line"><span class="built_in">export</span> USE_QNNPACK=0</span><br><span class="line"><span class="built_in">export</span> USE_PYTORCH_QNNPACK=0</span><br><span class="line"><span class="comment"># or &quot;7.2;8.7&quot; for JetPack 5 wheels for Xavier/Orin</span></span><br><span class="line"><span class="built_in">export</span> TORCH_CUDA_ARCH_LIST=<span class="string">&quot;5.3;6.2;7.2&quot;</span></span><br><span class="line"><span class="comment"># without the leading &#x27;v&#x27;, e.g. 1.3.0 for PyTorch v1.3.0</span></span><br><span class="line"><span class="built_in">export</span> PYTORCH_BUILD_VERSION=1.10.2</span><br><span class="line"><span class="built_in">export</span> PYTORCH_BUILD_NUMBER=1</span><br></pre></td></tr></table></figure><ol start="5"><li>安装构建必要的系统库：<code>sudo apt install cmake libopenblas-dev libopenmpi-dev</code>，这里我使用的ubuntu官方源。</li><li>编译源码构建程序（在构建之前建议先备份pytorch文件夹，毕竟克隆不容易：<code>cp -r pytorch pytorch.bak</code>）：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> pytorch</span><br><span class="line"><span class="comment"># 安装构建必要的pip3.7库</span></span><br><span class="line">pip3.7 install -r requirements.txt</span><br><span class="line">pip3.7 install scikit-build</span><br><span class="line">pip3.7 install ninja</span><br><span class="line"><span class="comment"># 开始编译源码构建程序，生成的安装包输出在dist文件夹：torch-1.10.2-cp37-cp37m-linux_aarch64.whl</span></span><br><span class="line">python3.7 setup.py bdist_wheel</span><br><span class="line"><span class="built_in">cd</span> dist</span><br><span class="line">pip3.7 install torch-1.10.2-cp37-cp37m-linux_aarch64.whl</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在编译过程中，反复出现一个报错：c++: internal compiler error: 已杀死 (program cc1plus)</span></span><br><span class="line"><span class="comment"># 原因：swap交换空间不足，使用jtop命令查看当前开发板只有系统分配的1.9G的zram交换空间，需手动增加swap空间</span></span><br><span class="line"><span class="comment"># 弃用以下传统的swapfile方法，修改zram的大小就好</span></span><br><span class="line"><span class="comment"># 查看所有zram相关文件</span></span><br><span class="line">find / -name <span class="string">&quot;*zram*&quot;</span> 2&gt;/dev/null</span><br><span class="line"><span class="comment"># 编辑zram配置文件</span></span><br><span class="line">nano /etc/systemd/nvzramconfig.sh</span><br><span class="line"><span class="comment"># 修改前</span></span><br><span class="line">mem=$(((totalmem / <span class="number">2</span> / <span class="variable">$&#123;NRDEVICES&#125;</span>) * <span class="number">1024</span>))</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 修改后zram总大小为物理内存大小的三倍</span></span><br><span class="line">mem=$(((totalmem * <span class="number">3</span> / <span class="variable">$&#123;NRDEVICES&#125;</span>) * <span class="number">1024</span>))</span><br><span class="line"><span class="comment"># 查看zram情况</span></span><br><span class="line">zramctl</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新增swapfile文件大小自定义</span></span><br><span class="line"><span class="built_in">sudo</span> fallocate -l 8G /var/swapfile</span><br><span class="line"><span class="comment"># 配置该文件的权限</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> 600 /var/swapfile</span><br><span class="line"><span class="comment"># 建立交换分区</span></span><br><span class="line"><span class="built_in">sudo</span> mkswap /var/swapfile</span><br><span class="line"><span class="comment"># 启用交换分区，再次运行jtop，可看到swap空间已经变成了10G</span></span><br><span class="line"><span class="built_in">sudo</span> swapon /var/swapfile</span><br><span class="line"><span class="comment"># 设置为自动启用swapfile</span></span><br><span class="line"><span class="built_in">sudo</span> bash -c <span class="string">&#x27;echo &quot;/var/swapfile swap swap defaults 0 0&quot; &gt;&gt; /etc/fstab&#x27;</span></span><br><span class="line"><span class="comment"># 关闭交换分区</span></span><br><span class="line"><span class="built_in">sudo</span> swapoff /var/swapfile</span><br><span class="line"><span class="comment"># 在现有的/var//swapfile后面追加30GB（增加容量后，请手动mkswap及swapon）</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=/var/swapfile bs=1M count=30720 oflag=append conv=notrunc</span><br><span class="line"><span class="comment"># 删除交换分区文件</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> /var/swapfile</span><br><span class="line"><span class="comment"># 删除fstab相关设置</span></span><br><span class="line">nano /etc/fstab</span><br></pre></td></tr></table></figure><ol start="7"><li>检测pytorch安装是否成功</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">python3.7</span><br><span class="line">import torch</span><br><span class="line"><span class="comment"># 输出True安装成功</span></span><br><span class="line">torch.cuda.is_available()</span><br><span class="line">torch.backends.cudnn.is_available()</span><br><span class="line"><span class="comment"># 查看cuda版本</span></span><br><span class="line"><span class="built_in">print</span>(torch.version.cuda)</span><br><span class="line"><span class="comment"># 查看cudnn版本</span></span><br><span class="line"><span class="built_in">print</span>(torch.backends.cudnn.version())</span><br></pre></td></tr></table></figure><h3 id="为python3-7编译torchvision">12.2.2 &nbsp&nbsp<a href="#为python3-7编译torchvision" class="headerlink" title="为python3.7编译torchvision"></a>为python3.7编译torchvision</h3><p>查看<a target="_blank" rel="noopener" href="https://github.com/pytorch/vision#installation">torchvision的README页面</a>，可知torch和torchvision对应版本信息，以及所要求的python版本。</p><table><thead><tr><th align="left">torch</th><th align="left">torchvision</th><th align="left">Python</th></tr></thead><tbody><tr><td align="left">1.10</td><td align="left">0.11</td><td align="left">&gt;&#x3D;3.6, &lt;&#x3D;3.9</td></tr></tbody></table><p>编译步骤参阅：<a target="_blank" rel="noopener" href="https://github.com/pytorch/vision/blob/v0.11.3/CONTRIBUTING.md#development-installation">Development installation</a></p><p>下载及编译torchvision源码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 我的网络环境没法直连github域名，手动指向cdn的ip（ping github.com得到ip），确保git的全局设置http的ssl证书验证关闭</span></span><br><span class="line"><span class="comment"># git clone -b v0.11.3 https://github.com/pytorch/vision.git torchvision</span></span><br><span class="line">git <span class="built_in">clone</span> -b v0.11.3 https://20.205.243.166/pytorch/vision.git torchvision</span><br><span class="line"><span class="built_in">cd</span> torchvision</span><br><span class="line"><span class="built_in">sudo</span> apt install libpng-dev libjpeg-turbo8-dev</span><br><span class="line"><span class="comment"># 设置编译的版本，避免生成的whl文件名不显示正确的版本名称（若不设置这个环境变量，生成的whl只有主版本号正确即v0.11，子版本号显示乱码，而不是显示3）</span></span><br><span class="line"><span class="built_in">export</span> BUILD_VERSION=0.11.3</span><br><span class="line"><span class="comment"># 开始编译源码构建程序，生成的安装包输出在dist文件夹：torchvision-0.11.3-cp37-cp37m-linux_aarch64.whl</span></span><br><span class="line">python setup.py bdist_wheel</span><br><span class="line"><span class="built_in">cd</span> dist</span><br><span class="line">pip3.7 install torchvision-0.11.3-cp37-cp37m-linux_aarch64.whl</span><br></pre></td></tr></table></figure><p>测试安装是否成功：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import torchvision</span><br><span class="line"><span class="built_in">print</span>(torchvision.__version__)</span><br></pre></td></tr></table></figure><h1 id="配置opencv-with-cuda">13 &nbsp&nbsp<a href="#配置opencv-with-cuda" class="headerlink" title="配置opencv with cuda"></a>配置opencv with cuda</h1><h2 id="python3-6环境">13.1 &nbsp&nbsp<a href="#python3-6环境" class="headerlink" title="python3.6环境"></a>python3.6环境</h2><p>使用python3.6环境，可以直接使用这个帖子给出的预编译的opencv包——<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/392495001">官方隐藏资源：Jetson伪超频与CUDA版OpenCV</a>。</p><p>预构建好的deb文件：<a target="_blank" rel="noopener" href="https://nvidia.box.com/shared/static/5v89u6g5rb62fpz4lh0rz531ajo2t5ef.gz">OpenCV-4.5.0-aarch64.tar.gz</a></p><p>可以先卸载系统自带的CPU版的opencv4.1.1，再执行安装deb包。</p><p>如果想自行从源码构建opencv with cuda，编译步骤可参考<a target="_blank" rel="noopener" href="https://qengineering.eu/install-opencv-on-jetson-nano.html">Install OpenCV on Jetson Nano</a>。</p><h2 id="python3-7环境">13.2 &nbsp&nbsp<a href="#python3-7环境" class="headerlink" title="python3.7环境"></a>python3.7环境</h2><ol><li>卸载默认不带cuda的opencv</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt purge libopencv*</span><br><span class="line"><span class="built_in">sudo</span> apt autoremove</span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"></span><br><span class="line"><span class="comment"># 确保/usr/lib/中没有其他版本的openCV影响</span></span><br><span class="line">find / -name <span class="string">&quot;*opencv*&quot;</span> 2&gt;/dev/null</span><br></pre></td></tr></table></figure><ol start="2"><li>下载opencv和opencv_contrib源码</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 访问网页离线下载</span></span><br><span class="line"><span class="comment"># https://github.com/opencv/opencv/releases/tag/4.1.1</span></span><br><span class="line"><span class="comment"># https://github.com/opencv/opencv_contrib/releases/tag/4.1.1</span></span><br><span class="line">curl -s -L -O https://github.com/opencv/opencv/archive/refs/tags/4.1.1.zip</span><br><span class="line">curl -s -L -O https://github.com/opencv/opencv_contrib/archive/refs/tags/4.1.1.zip</span><br><span class="line"><span class="built_in">sudo</span> apt install unzip</span><br><span class="line">upzip opencv-4.1.1.zip</span><br><span class="line">unzip opencv_contrib-4.1.1.zip</span><br><span class="line"><span class="comment"># 两个压缩包都放在同一个目录下</span></span><br><span class="line"><span class="built_in">cd</span> opencv-4.1.1</span><br><span class="line"><span class="built_in">mkdir</span> build</span><br><span class="line"><span class="built_in">cd</span> build</span><br></pre></td></tr></table></figure><ol start="4"><li>安装依赖库（参见<a target="_blank" rel="noopener" href="https://qengineering.eu/install-opencv-on-jetson-nano.html">Install OpenCV on Jetson Nano</a>）</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># reveal the CUDA location</span></span><br><span class="line"><span class="built_in">sudo</span> sh -c <span class="string">&quot;echo &#x27;/usr/local/cuda-10.2/lib64&#x27; &gt;&gt; /etc/ld.so.conf.d/nvidia-tegra.conf&quot;</span></span><br><span class="line"><span class="comment"># 更新动态链接库</span></span><br><span class="line"><span class="built_in">sudo</span> ldconfig</span><br><span class="line"><span class="comment"># third-party libraries</span></span><br><span class="line"><span class="built_in">sudo</span> apt install build-essential cmake git unzip pkg-config zlib1g-dev</span><br><span class="line"><span class="built_in">sudo</span> apt install libjpeg-dev libjpeg8-dev libjpeg-turbo8-dev</span><br><span class="line"><span class="built_in">sudo</span> apt install libpng-dev libtiff-dev libglew-dev</span><br><span class="line"><span class="built_in">sudo</span> apt install libavcodec-dev libavformat-dev libswscale-dev</span><br><span class="line"><span class="built_in">sudo</span> apt install libgtk2.0-dev libgtk-3-dev libcanberra-gtk*</span><br><span class="line"><span class="built_in">sudo</span> apt install python-dev python-numpy python-pip</span><br><span class="line"><span class="built_in">sudo</span> apt install python3-dev python3-numpy python3-pip</span><br><span class="line"><span class="built_in">sudo</span> apt install libxvidcore-dev libx264-dev libgtk-3-dev</span><br><span class="line"><span class="built_in">sudo</span> apt install libtbb2 libtbb-dev libdc1394-22-dev libxine2-dev</span><br><span class="line"><span class="built_in">sudo</span> apt install gstreamer1.0-tools libgstreamer-plugins-base1.0-dev</span><br><span class="line"><span class="built_in">sudo</span> apt install libgstreamer-plugins-good1.0-dev</span><br><span class="line"><span class="built_in">sudo</span> apt install libv4l-dev v4l-utils v4l2ucp qv4l2</span><br><span class="line"><span class="built_in">sudo</span> apt install libtesseract-dev libxine2-dev libpostproc-dev</span><br><span class="line"><span class="built_in">sudo</span> apt install libavresample-dev libvorbis-dev</span><br><span class="line"><span class="built_in">sudo</span> apt install libfaac-dev libmp3lame-dev libtheora-dev</span><br><span class="line"><span class="built_in">sudo</span> apt install libopencore-amrnb-dev libopencore-amrwb-dev</span><br><span class="line"><span class="built_in">sudo</span> apt install libopenblas-dev libatlas-base-dev libblas-dev</span><br><span class="line"><span class="built_in">sudo</span> apt install liblapack-dev liblapacke-dev libeigen3-dev gfortran</span><br><span class="line"><span class="built_in">sudo</span> apt install libhdf5-dev libprotobuf-dev protobuf-compiler</span><br><span class="line"><span class="built_in">sudo</span> apt install libgoogle-glog-dev libgflags-dev</span><br></pre></td></tr></table></figure><ol start="5"><li>配置cmake</li></ol><div class="note danger no-icon"><p>配置cmake一定要加上这项参数<code>-D CUDNN_VERSION=&quot;8.0&quot;</code>，否则会报错：Could NOT find CUDNN: Found unsuitable version &quot;..&quot;, but required is at least &quot;6&quot; (found &#x2F;usr&#x2F;lib&#x2F;aarch64-linux-gnu&#x2F;libcudnn.so.8.2.1)，即使是手动指定了库文件的绝对路径，仍然是会报这个错误。cudnn版本参见<a href="#%E4%B8%BA%E5%BC%80%E5%8F%91%E6%9D%BF%E5%AE%89%E8%A3%85CUDA%E3%80%81cuDNN%E3%80%81TensorRT%E5%BA%93">「为开发板安装CUDA、cuDNN、TensorRT库」</a>小节</p></div><div class="note info no-icon"><p>下载的源码压缩包不包含所有modules组件的源码，并且raw.githubusercontent.com是无法直连的，直接ping也无法得到ip，通过网页<a target="_blank" rel="noopener" href="https://www.ipaddress.com/">https://www.ipaddress.com/</a>，得到ip：185.199.110.133。如果不修改hosts进行域名解析映射IP，大概率会报错：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">=======================================================================</span><br><span class="line">  Couldn<span class="string">&#x27;t download files from the Internet.</span></span><br><span class="line"><span class="string">  Please check the Internet access on this host.</span></span><br><span class="line"><span class="string">=======================================================================</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nano /etc/hosts</span><br><span class="line">185.199.110.133 raw.githubusercontent.com</span><br><span class="line">20.205.243.166 github.com</span><br></pre></td></tr></table></figure><p>倘若修改了hosts文件进行域名解析映射IP之后，仍然是报错提示无法连接网络下载文件的话，先移除opencv_contrib-4.1.1目录。</p></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">cmake \</span><br><span class="line">-D CMAKE_BUILD_TYPE=RELEASE \</span><br><span class="line">-D CMAKE_INSTALL_PREFIX=/usr/local \</span><br><span class="line">-D CMAKE_C_COMPILER=/usr/bin/gcc-7 \</span><br><span class="line">-D INSTALL_PYTHON_EXAMPLES=OFF \</span><br><span class="line">-D INSTALL_C_EXAMPLES=OFF \</span><br><span class="line">-D OPENCV_ENABLE_NONFREE=ON \</span><br><span class="line">-D BUILD_opencv_python3=ON \</span><br><span class="line">-D WITH_CUDA=ON \</span><br><span class="line">-D WITH_CUDNN=ON \</span><br><span class="line">-D CUDNN_VERSION=<span class="string">&quot;8.0&quot;</span> \</span><br><span class="line">-D WITH_TBB=ON \</span><br><span class="line">-D OPENCV_DNN_CUDA=ON \</span><br><span class="line">-D ENABLE_FAST_MATH=on \</span><br><span class="line">-D CUDA_FAST_MATH=on \</span><br><span class="line">-D CUDA_ARCH_BIN=6.2 \</span><br><span class="line">-D CUDA_ARCH_PTX=<span class="string">&quot;&quot;</span> \</span><br><span class="line">-D WITH_CUBLAS=on \</span><br><span class="line">-D OPENCV_GENERATE_PKGCONFIG=ON \</span><br><span class="line">-D OPENCV_EXTRA_MODULES_PATH=../../opencv_contrib-4.1.1/modules \</span><br><span class="line">-D PYTHON3_EXECUTABLE=/usr/local/python3.7/bin/python3.7m \</span><br><span class="line">-D PYTHON3_INCLUDE_DIR=/usr/local/python3.7/include/python3.7m \</span><br><span class="line">-D PYTHON3_LIBRARY=/usr/local/python3.7/lib/libpython3.7m.so \</span><br><span class="line">-D PYTHON3_NUMPY_INCLUDE_DIRS=/usr/local/python3.7/lib/python3.7/site-packages/numpy/core/include \</span><br><span class="line">-D PYTHON3_PACKAGES_PATH=/usr/local/python3.7/lib/python3.7/site-packages \</span><br><span class="line">-D PYTHON_DEFAULT_EXECUTABLE=/usr/local/python3.7/bin/python3.7m \</span><br><span class="line">-D CUDNN_LIBRARY=/usr/local/cuda-10.2/lib64/libcudnn.so.8.2.1 \</span><br><span class="line">-D CUDNN_INCLUDE_DIR=/usr/local/cuda-10.2/include  \</span><br><span class="line">-D CUDA_CUDA_LIBRARY=/usr/local/cuda-10.2/targets/aarch64-linux/lib/stubs/libcuda.so \</span><br><span class="line">-D CUDA_TOOLKIT_ROOT_DIR=/usr/local/cuda-10.2/ \</span><br><span class="line">-D OPENCV_PYTHON3_INSTALL_PATH=/usr/local/python3.7/lib/python3.7/site-packages \</span><br><span class="line">-D WITH_WEBP=OFF \</span><br><span class="line">-D WITH_OPENCL=OFF \</span><br><span class="line">-D ETHASHLCL=OFF \</span><br><span class="line">-D ENABLE_CXX11=ON \</span><br><span class="line">-D BUILD_EXAMPLES=OFF \</span><br><span class="line">-D WITH_OPENGL=ON \</span><br><span class="line">-D WITH_GSTREAMER=ON \</span><br><span class="line">-D WITH_V4L=ON \</span><br><span class="line">-D WITH_LIBV4L=ON \</span><br><span class="line">-D WITH_QT=OFF \</span><br><span class="line">-D BUILD_opencv_python3=ON \</span><br><span class="line">-D BUILD_opencv_python2=OFF \</span><br><span class="line">-D WITH_FFMPEG=on \</span><br><span class="line">-D HAVE_opencv_python3=ON \</span><br><span class="line">-D EIGEN_INCLUDE_PATH=/usr/include/eigen3 \</span><br><span class="line">-D WITH_EIGEN=ON \</span><br><span class="line">-D ENABLE_NEON=ON \</span><br><span class="line">-D WITH_OPENMP=ON \</span><br><span class="line">-D BUILD_TIFF=ON \</span><br><span class="line">-D WITH_TBB=ON \</span><br><span class="line">-D BUILD_TBB=ON \</span><br><span class="line">-D BUILD_TESTS=OFF \</span><br><span class="line">-D WITH_PROTOBUF=ON \</span><br><span class="line">..</span><br></pre></td></tr></table></figure><p>如果cmake提示找不到OpenBLAS头文件和库文件的话，可以尝试方法修复：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -- Could not find OpenBLAS include. Turning OpenBLAS_FOUND off</span></span><br><span class="line"><span class="comment"># -- Could not find OpenBLAS lib. Turning OpenBLAS_FOUND off</span></span><br><span class="line"><span class="comment"># -- Could NOT find Atlas (missing: Atlas_CBLAS_LIBRARY Atlas_BLAS_LIBRARY)</span></span><br><span class="line"><span class="built_in">sudo</span> apt install libopenblas-dev libopenblas-base</span><br><span class="line"><span class="built_in">sudo</span> apt install liblapacke-dev</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -s /usr/include/lapacke.h /usr/include/x86_64-linux-gnu <span class="comment"># corrected path for the library</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Open_BLAS_INCLUDE_SEARCH_PATHS path:  /usr/include/x86_64-linux-gnu</span></span><br><span class="line"><span class="comment"># Open_BLAS_LIB_SEARCH_PATHS path: /usr/lib/x86_64-linux-gnu</span></span><br><span class="line"><span class="comment"># 将以上路径分别添加到opencv/cmake/OpenCVFindOpenBLAS.cmake文件中的SET(Open_BLAS_INCLUDE_SEARCH_PATHS和SET(Open_BLAS_LIB_SEARCH_PATHS中。</span></span><br></pre></td></tr></table></figure><ol><li>编译及安装</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用-j参数多线程编译时会报错（makefile文件引起的），可能是由于我修改了opencv/cmake/OpenCVFindOpenBLAS.cmake文件引起的</span></span><br><span class="line">make -j1</span><br><span class="line"><span class="built_in">sudo</span> make install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新动态链接库</span></span><br><span class="line"><span class="built_in">sudo</span> ldconfig</span><br></pre></td></tr></table></figure><ol start="7"><li>测试opencv安装情况</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 假设编译安装好系统opencv with cuda后，python没有找到cv2，则安装opencv-python包启用。</span></span><br><span class="line"><span class="comment"># pip install opencv-python</span></span><br><span class="line"></span><br><span class="line">python3.7</span><br><span class="line">import cv2</span><br><span class="line"><span class="comment"># 返回cuda设备，即cuda显卡的数量</span></span><br><span class="line"><span class="built_in">print</span>(cv2.cuda.getCudaEnabledDeviceCount())</span><br></pre></td></tr></table></figure><h1 id="配置conda（可选，但不推荐）">14 &nbsp&nbsp<a href="#配置conda（可选，但不推荐）" class="headerlink" title="配置conda（可选，但不推荐）"></a>配置conda（可选，但不推荐）</h1><p>不推荐配置，jetson tx2 nx型号能够安装成功的版本较老，并且创建虚拟环境后，默认的base环境一旦conda install任意包之后，再次运行conda的任何命令都会报错：<code>illegal instruction (core dump)</code>，pip可以正常工作。如果是新建其他名称的虚拟环境，则是pip会报错：<code>illegal instruction (core dump)</code>，而conda install可以正常工作。</p><p>anaconda下载：<br>miniconda下载：<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/">点击跳转</a><br>Archiconda下载：<a target="_blank" rel="noopener" href="https://github.com/Archiconda/build-tools/releases">点击跳转</a></p><p>tx2 nx硬件只有这个版本能成功安装：<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/Miniconda3-py37_4.9.2-Linux-aarch64.sh">Miniconda3-py37_4.9.2-Linux-aarch64.sh</a>，而之后的新版本都会报错：<code>illegal instruction (core dump)</code>。</p><h2 id="conda基本操作">14.1 &nbsp&nbsp<a href="#conda基本操作" class="headerlink" title="conda基本操作"></a>conda基本操作</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建了名为xxx的虚拟环境，指定虚拟环境的 Python 版本为3.7</span></span><br><span class="line">conda create -n xxx python=3.7</span><br><span class="line"><span class="comment"># 激活名为xxx的虚拟环境</span></span><br><span class="line">conda activate xxx</span><br><span class="line"><span class="comment"># 退出当前虚拟环境</span></span><br><span class="line">conda deactivate</span><br><span class="line"><span class="comment"># 删除名为xxx的虚拟环境</span></span><br><span class="line">conda remove -n xxx --all</span><br><span class="line"><span class="comment"># 查看本地已有哪些虚拟环境</span></span><br><span class="line">conda info --<span class="built_in">env</span></span><br></pre></td></tr></table></figure><h2 id="修改conda源">14.2 &nbsp&nbsp<a href="#修改conda源" class="headerlink" title="修改conda源"></a>修改conda源</h2><p>参见<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/">Anaconda 镜像使用帮助</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">nano ~/.condarc</span><br><span class="line"><span class="comment"># windows用户可以用下面的命令创建这个文件</span></span><br><span class="line"><span class="comment"># conda config --set show_channel_urls yes</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 为.condarc文件添加如下内容</span></span><br><span class="line">channels:</span><br><span class="line">  - defaults</span><br><span class="line">show_channel_urls: <span class="literal">true</span></span><br><span class="line">default_channels:</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2</span><br><span class="line">custom_channels:</span><br><span class="line">  conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  pytorch-lts: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  deepmodeling: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 清除索引缓存</span></span><br><span class="line">conda clean -i</span><br></pre></td></tr></table></figure><h2 id="使用yml配置文件创建虚拟环境报错（这个我实测没生效）">14.3 &nbsp&nbsp<a href="#使用yml配置文件创建虚拟环境报错（这个我实测没生效）" class="headerlink" title="使用yml配置文件创建虚拟环境报错（这个我实测没生效）"></a>使用yml配置文件创建虚拟环境报错（这个我实测没生效）</h2><p>现象：使用yml文件创建conda环境时出现Solving environment: failed 和 ResolvePackageNotFound 的错误</p><p>原因：因为部分包的版本详细是根据机器配置而定，导出来的版本不一定适用当前的机器</p><p>解决方法：剔除环境配置文件environment.yml中的版本信息，只需删除第二个等号之后的内容即可</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pytorch=1.1.0=py3.7_cuda10.0.130_cudnn7.5.1_0</span><br><span class="line"><span class="comment"># 例如上面这行的修改如下</span></span><br><span class="line">pytorch=1.1.0</span><br></pre></td></tr></table></figure><h1 id="参考文献">15 &nbsp&nbsp<a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>[1] Nvidia xavier NX 通过 flash.sh 烧录 linux 系统[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/Yan_uuu/article/details/126947983">https://blog.csdn.net/Yan_uuu/article/details/126947983</a>.<br>[2] Jetson Xavier NX 镜像制作、烧录及克隆[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/qhdd123/article/details/123815911">https://blog.csdn.net/qhdd123/article/details/123815911</a>.<br>[3] 解决 Jetson：Failed to start nvpmode1 server. 和 Failed to start load kernel modules[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/alianfibakic/article/details/123807606">https://blog.csdn.net/alianfibakic/article/details/123807606</a>.<br>[4] Jetson TX2 更换软件源[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/qlulibin/article/details/80271096">https://blog.csdn.net/qlulibin/article/details/80271096</a>.<br>[5] Ubuntu18.04 默认源恢复默认源恢复备份源[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/ZeyiRTangent/article/details/114885286">https://blog.csdn.net/ZeyiRTangent/article/details/114885286</a>.<br>[6] PyPI 镜像使用帮助[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/help/pypi/">https://mirrors.tuna.tsinghua.edu.cn/help/pypi/</a>.<br>[7] Ubuntu 编译安装 python3.7.10, 解决‘_ctypes‘和 ssl 问题, 建立软链接 python3.7 和 pip3.7[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/tmaccs/article/details/117029067">https://blog.csdn.net/tmaccs/article/details/117029067</a>.<br>[8] ubuntu18.04 下源码编译安装最新版本 Python3[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/62930419">https://zhuanlan.zhihu.com/p/62930419</a>.<br>[9] ubuntu pip is configured with locations that require TLS&#x2F;SSL[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/a1007720052/article/details/107342695">https://blog.csdn.net/a1007720052/article/details/107342695</a>.<br>[10] libssl‑dev : Depends: libssl1.0.0 (&#x3D; 1.0.2g‑1ubuntu4) but 1.0.2g‑1ubuntu4.15 is to be installed[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_38890593/article/details/102783551">https://blog.csdn.net/weixin_38890593/article/details/102783551</a>.<br>[11] TX2开启最大功耗模式[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://www.cnblogs.com/gezhuangzhuang/p/11674062.html">https://www.cnblogs.com/gezhuangzhuang/p/11674062.html</a>.<br>[12] 使用git --recursive进行循环克隆，由于网络原因，出现克隆失败的情况。[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_43212651/article/details/116376103">https://blog.csdn.net/qq_43212651/article/details/116376103</a>.<br>[13] 解决c++: internal compiler error: 已杀死 (program cc1plus)[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/chenmeng0508/article/details/122283442">https://blog.csdn.net/chenmeng0508/article/details/122283442</a>.<br>[14] Jetson nano增加Swap分区大小操作指南[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_33475105/article/details/108372878">https://blog.csdn.net/qq_33475105/article/details/108372878</a>.<br>[15] 玩转NVIDIA Jetson （25）--- jetson 安装pytorch和torchvision[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/huiyuanliyan/article/details/126686036">https://blog.csdn.net/huiyuanliyan/article/details/126686036</a>.<br>[16] Ubuntu 安装PHP找不着BZip2[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/handsome_926/article/details/77933926">https://blog.csdn.net/handsome_926/article/details/77933926</a>.<br>[17] ModuleNotFoundError: No module named &#39;_lzma&#39;[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/404162713">https://zhuanlan.zhihu.com/p/404162713</a>.<br>[18] Error :: You must put some &#39;source&#39; URIs in your sources.list[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://askubuntu.com/questions/496549/error-you-must-put-some-source-uris-in-your-sources-list">https://askubuntu.com/questions/496549/error-you-must-put-some-source-uris-in-your-sources-list</a>.<br>[19] 3d-pose-baseline[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://github.com/una-dinosauria/3d-pose-baseline">https://github.com/una-dinosauria/3d-pose-baseline</a>.<br>[20] How to stop jetson_clocks?[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://forums.developer.nvidia.com/t/how-to-stop-jetson-clocks/144713">https://forums.developer.nvidia.com/t/how-to-stop-jetson-clocks/144713</a>.<br>[21] VideoPose3d:环境搭建+制作自己的视频[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/willbetter01/article/details/120906567">https://blog.csdn.net/willbetter01/article/details/120906567</a>.<br>[22] 【VideoPose3D】可视化自定义视频[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_44942539/article/details/121983187">https://blog.csdn.net/qq_44942539/article/details/121983187</a>.<br>[23] Windows下VideoPose3D成功运行记录2：运行自定义视频[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv19291005/">https://www.bilibili.com/read/cv19291005/</a>.<br>[24] How to Use OpenCV with CUDA Support in Python[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://saturncloud.io/blog/how-to-use-opencv-with-cuda-support-in-python/">https://saturncloud.io/blog/how-to-use-opencv-with-cuda-support-in-python/</a>.<br>[25] Jetson Xavier NX OpenCV 安装[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/411901208">https://zhuanlan.zhihu.com/p/411901208</a>.<br>[26] Nvidia Jetson TX2 配置Cuda 加速的Opencv[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_62651190/article/details/129348245">https://blog.csdn.net/weixin_62651190/article/details/129348245</a>.<br>[27] Guide to build OpenCV from source with GPU support (CUDA and cuDNN)[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://gist.github.com/minhhieutruong0705/8f0ec70c400420e0007c15c98510f133">https://gist.github.com/minhhieutruong0705/8f0ec70c400420e0007c15c98510f133</a>.<br>[28] How to install OpenCV 4.2.0 with CUDA 10.0 in Ubuntu distro 18.04[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://gist.github.com/changx03/b4aa9bb2827217c3a6a7e08365441417">https://gist.github.com/changx03/b4aa9bb2827217c3a6a7e08365441417</a>.<br>[29] Jetson带CUDA编译的opencv4.5安装教程与踩坑指南，cmake配置很重要！[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39298885/article/details/110851373">https://blog.csdn.net/weixin_39298885/article/details/110851373</a>.<br>[30] ubuntu 编译安装支持CUDA的OpenCV[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_44523137/article/details/124098406">https://blog.csdn.net/qq_44523137/article/details/124098406</a>.<br>[31] Install OpenCV on Jetson Nano[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://qengineering.eu/install-opencv-on-jetson-nano.html">https://qengineering.eu/install-opencv-on-jetson-nano.html</a>.<br>[32] 「解析」Jetson Orin NX 安装 CUDA&#x2F;cuDNN[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/ViatorSun/article/details/129909317">https://blog.csdn.net/ViatorSun/article/details/129909317</a>.<br>[33] OpenCV 4.2.0 and CuDNN for Jetson Nano?[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://forums.developer.nvidia.com/t/opencv-4-2-0-and-cudnn-for-jetson-nano/112281?page=2">https://forums.developer.nvidia.com/t/opencv-4-2-0-and-cudnn-for-jetson-nano/112281?page=2</a>.<br>[34] Correction in OpenCV&#39;s default CMAKE search Path for OpenBLAS Library on Ubuntu-64bit Machines [Solution] [EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://github.com/opencv/opencv/issues/12957">https://github.com/opencv/opencv/issues/12957</a>.<br>[35] jetson tx2 安装miniconda失败原因（illegal instruction (core dump）原因解析与简易安装miniconda[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/buxiangyaomingzi/article/details/123297295">https://blog.csdn.net/buxiangyaomingzi/article/details/123297295</a>.<br>[36] TypeError: load() missing 1 required positional argument: &#39;Loader&#39; in Google Colab[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/69564817/typeerror-load-missing-1-required-positional-argument-loader-in-google-col">https://stackoverflow.com/questions/69564817/typeerror-load-missing-1-required-positional-argument-loader-in-google-col</a>.<br>[37] 解决创建conda环境时Solving environment: failed 和 ResolvePackageNotFound 的错误[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/hshudoudou/article/details/126407029">https://blog.csdn.net/hshudoudou/article/details/126407029</a>.<br>[38] 关于Ubuntu下ZRAM的配置和使用[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.xzr.moe/archives/88/">https://blog.xzr.moe/archives/88/</a>.<br>[39] 解决python urllib3 v2.0 only supports OpenSSL 1.1.1+, currently[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43205308/article/details/130830307">https://blog.csdn.net/weixin_43205308/article/details/130830307</a>.<br>[40] 从TensorFlow被kill到增加Swap分区[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://www.zhihu.com/column/p/30562899">https://www.zhihu.com/column/p/30562899</a>.<br>[41] Linux运行程序时，程序进程莫名退出（被杀死）[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/ispringmw/article/details/112719262">https://blog.csdn.net/ispringmw/article/details/112719262</a>.<br>[42] linux 环境下进程被 killed掉原因分析和解决方法[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/ktigerhero3/article/details/80004315">https://blog.csdn.net/ktigerhero3/article/details/80004315</a>.<br>[43] Linux OOM Killer机制 以及防止被OOM Killer杀死的方法[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/top_explore/article/details/107733974">https://blog.csdn.net/top_explore/article/details/107733974</a>.</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://mister-kin.github.io/software/arch-linux/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images_public/avatar_alpha.webp"><meta itemprop="name" content="Mr. Kin"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Mr. Kin's Blog"><meta itemprop="description" content="Since you have chosen to chase, don't give up."></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="undefined | Mr. Kin's Blog"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/software/arch-linux/" class="post-title-link" itemprop="url">安装Arch Linux的踩坑记录总结</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2023-09-23 04:11:36" itemprop="dateCreated datePublished" datetime="2023-09-23T04:11:36+08:00">2023-09-23</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2023-09-24 15:40:08" itemprop="dateModified" datetime="2023-09-24T15:40:08+08:00">2023-09-24</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/software/" itemprop="url" rel="index"><span itemprop="name">software</span></a> </span></span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>1.6k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>6 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="安装arch系统镜像">1 &nbsp&nbsp<a href="#安装arch系统镜像" class="headerlink" title="安装arch系统镜像"></a>安装arch系统镜像</h1><ol><li>下载镜像：<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/archlinux/iso/latest/">点击跳转</a>，使用PE U盘或者虚拟机加载CD方式加载系统镜像。</li><li>选择<code>Arch Linux install medium (x86_64, UEFI)</code>。</li><li>验证启动模式：<code>ls /sys/firmware/efi/efivars</code>。若正确输出目录且无错误，则证明是UEFI模式。</li><li>连接网络（由路由器DHCP自动下发分配IP），ping测试联网状态（<code>ip addr</code>查看IP），可用ssh连接完成后面的工作，方便复制粘贴命令（<code>systemctl status sshd</code>查看ssh保护进程运行状态），passwd修改当前环境root账户的密码。</li><li>重新设置镜像源mirrorlist，使用reflector获取速度最快的6个镜像，并保存至指定路径<code>/etc/pacman.d/mirrorlist</code>。</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">reflector -c China -a 6 --<span class="built_in">sort</span> rate --save /etc/pacman.d/mirrorlist</span><br><span class="line">reflector -c China -a 6 --<span class="built_in">sort</span> rate --save /mnt/etc/pacman.d/mirrorlist</span><br></pre></td></tr></table></figure><p>手动设置镜像源：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/pacman.d/mirrorlist</span><br><span class="line"><span class="comment"># 顶部添加如下镜像源</span></span><br><span class="line">Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/<span class="variable">$repo</span>/os/<span class="variable">$arch</span></span><br><span class="line">Server = https://repo.archlinuxcn.org/<span class="variable">$arch</span></span><br></pre></td></tr></table></figure><ol start="5"><li>打开自动同步时间：<code>timedatectl set-ntp true</code>。检测命令生效情况：<code>timedatectl status</code>。</li><li><code>lsblk</code>或者<code>fdisk -l</code>查看硬盘情况（rom、loop、airoot的设备可忽略掉）。使用fdisk分区：<code>fdisk /dev/sda</code>，按<code>g</code>并回车将磁盘分区表设置为GPT格式，按<code>n</code>并回车新增一个分区，分区号默参直接回车，起始扇区默参直接回车，结束位置输入<code>+300M</code>并回车表示分区大小为300M。重复<code>n</code>命令三次，完成剩余的三个分区的工作。按<code>t</code>并回车更改分区类型，输入分区编号1并回车，输入分区类型1并回车（1代表EFI system partition）。重复<code>t</code>命令，将2、3、4号分区分别改为类型19（SWAP），类型23（Linux root (x86-64)），类型42（Linux home）。最后按<code>w</code>并回车保存分区表。<code>df -h</code>查看分区情况。</li><li>磁盘格式化</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkfs.fat -F 32 /dev/sda1</span><br><span class="line">mkswap /dev/sda2</span><br><span class="line">mkfs.ext4 /dev/sda3</span><br><span class="line">mkfs.ext4 /dev/sda4</span><br></pre></td></tr></table></figure><ol start="8"><li>挂载文件系统<br>挂载boot</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/sda3 /mnt</span><br><span class="line"><span class="built_in">mkdir</span> -p /mnt/home <span class="comment">#创建/mnt/home目录供挂载</span></span><br><span class="line">mount /dev/sda4 /mnt/home</span><br><span class="line"><span class="built_in">mkdir</span> -p /mnt/boot <span class="comment">#创建/mnt/boot目录供挂载</span></span><br><span class="line">mount /dev/sda1 /mnt/boot</span><br></pre></td></tr></table></figure><p>挂载swap：<code>swapon /dev/sda2</code><br>9. 安装系统：<code>pacstrap /mnt base linux linux-firmware nano</code><br>10. 生成fstab文件：<code>genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</code>。检查fstab文件内容：<code>cat /mnt/etc/fstab</code>。<br>11. 更换当前的根目录到安装到硬盘上的系统：<code>arch-chroot /mnt</code><br>12. 将时区设置为亚洲&#x2F;上海：<code>ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</code>。<br>13. 同步硬件时钟：<code>hwclock --systohc</code>。<br>14. 配置本地化设置：<code>nano /etc/locale.gen</code>，<code>ctrl+w</code>搜索，分别找到<code>#en_US</code>,<code>#zh_CN</code>带有UTF-8的两行，去掉前面的#号。<code>ctrl+o</code>并回车保存文件，<code>ctrl+x</code>并回车退出nano。生成配置：<code>locale-gen</code>。<br>15. 创建并修改&#x2F;etc&#x2F;locale.conf文件，填入<code>LANG=en_US.UTF-8</code>并保存。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> /etc/locale.conf</span><br><span class="line">nano /etc/locale.conf</span><br></pre></td></tr></table></figure><ol start="16"><li>配置网络主机名：<code>echo &quot;archlinux&quot; &gt;&gt; /etc/hostname</code>，</li><li>设置root密码：<code>passwd</code>。</li><li>设置引导程序</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pacman -S dosfstools grub efibootmgr  <span class="comment"># 安装引导程序</span></span><br><span class="line">grub-install --target=x86_64-efi --efi-directory=/boot --recheck  <span class="comment"># 将grub安装至EFI分区</span></span><br><span class="line">grub-mkconfig -o /boot/grub/grub.cfg  <span class="comment"># 生成grub配置</span></span><br></pre></td></tr></table></figure><ol start="19"><li>安装新系统必要的包：<code>pacman -S networkmanager network-manager-applet dhcpcd dialog os-prober mtools ntfs-3g base-devel linux-headers reflector git</code>。更新软件包缓存：<code>sudo pacman -Syy</code>。更新系统：<code>sudo pacman -Syu</code>。</li><li>开启dhcpcd</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start dhcpcd  <span class="comment"># 启动dhcpcd</span></span><br><span class="line">systemctl <span class="built_in">enable</span> dhcpcd  <span class="comment"># 使dhcpcd自启</span></span><br></pre></td></tr></table></figure><ol start="21"><li>启用sshd服务并远程控制</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">systemctl start sshd</span><br><span class="line">systemctl <span class="built_in">enable</span> sshd</span><br><span class="line">nano /etc/ssh/sshd_config</span><br><span class="line"><span class="comment"># 将其中PermitRootLogin前面#号去掉并且将值设置为yes</span></span><br><span class="line"><span class="comment"># 将其中PasswordAuthentication前面#号去掉并且将值设置为yes</span></span><br><span class="line">systemctl restart sshd</span><br></pre></td></tr></table></figure><ol start="22"><li>添加普通用户</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">useradd -m kin <span class="comment"># 添加用户名为kin的用户</span></span><br><span class="line">passwd kin <span class="comment"># 为用户kin设置密码</span></span><br><span class="line"><span class="comment"># 添加用户的更多选项</span></span><br><span class="line"><span class="comment"># useradd -m -G additional_groups -s login_shell username</span></span><br><span class="line">pacman -S <span class="built_in">sudo</span></span><br><span class="line">nao /etc/sudoers</span><br><span class="line"><span class="comment"># 打开/etc/sudoers文件后，在root ALL=(ALL:ALL) ALL一行下，添加kin ALL=(ALL:ALL) ALL。</span></span><br></pre></td></tr></table></figure><ol start="23"><li>退出chroot环境，卸载掉挂载的硬盘并重启</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exit</span>  <span class="comment"># 返回至arch-chroot之前的环境</span></span><br><span class="line">umount /mnt/home</span><br><span class="line">umount /mnt/boot</span><br><span class="line">umount /mnt</span><br><span class="line">reboot  <span class="comment"># 重启</span></span><br></pre></td></tr></table></figure><p><strong>分区方案（列表顺序就是实际的分区顺序）</strong></p><ul><li><code>/boot/efi</code> 300M</li><li><code>swap</code>（内存大小×1.5）</li><li><code>/</code> 40G</li><li><code>/home</code> 剩余全部空间</li></ul><p><strong>Swap分区的大小分配推荐方案</strong></p><table><thead><tr><th>Amount of RAM in the system</th><th>Recommended swap space</th><th>Recommended swap space if allowing for hibernation</th></tr></thead><tbody><tr><td>⩽ 2GB</td><td>2 times the amount of RAM</td><td>3 times the amount of RAM</td></tr><tr><td>&gt; 2GB – 8GB</td><td>Equal to the amount of RAM</td><td>2 times the amount of RAM</td></tr><tr><td>&gt; 8GB – 64GB</td><td>At least 4 GB</td><td>1.5 times the amount of RAM</td></tr><tr><td>&gt; 64GB</td><td>At least 4 GB</td><td>Hibernation not recommended</td></tr></tbody></table><h1 id="安装KDE桌面环境">2 &nbsp&nbsp<a href="#安装KDE桌面环境" class="headerlink" title="安装KDE桌面环境"></a>安装KDE桌面环境</h1><ol><li>安装显示Xorg服务器：<code>sudo pacman -S xorg</code>。</li><li>安装KDE Plasma桌面环境和其他KDE软件包：<code>sudo pacman -S plasma kde-applications</code>。</li><li>安装显示管理器（开机图形界面登录）</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S sddm</span><br><span class="line">systemctl <span class="built_in">enable</span> sddm.service <span class="comment"># 开机自启动sddm服务</span></span><br></pre></td></tr></table></figure><ol start="4"><li>进入桌面环境</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 手动进入桌面环境</span></span><br><span class="line">startx</span><br><span class="line"><span class="comment"># 修改当前帐户bash配置，让账户登录后自动进入桌面环境</span></span><br><span class="line">nano ~/.bash_profile</span><br><span class="line"><span class="comment"># 或者修改Shell的全局启动配置文件</span></span><br><span class="line">nano /etc/profile</span><br><span class="line"><span class="comment"># 文件末尾处添加如下内容</span></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$&#123;DISPLAY&#125;</span>&quot;</span> ] &amp;&amp; [ <span class="string">&quot;<span class="variable">$&#123;XDG_VTNR&#125;</span>&quot;</span> -eq 1 ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">exec</span> startx</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><h1 id="参考文献">3 &nbsp&nbsp<a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>[1] 在ProxmoxVE(PVE)7.0中安装ArchLinux[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://www.raobee.com/archives/343/">https://www.raobee.com/archives/343/</a>.<br>[2] Arch Linux + KDE 的安装和配置[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://peoxin.github.io/blog/2022/05/01/Arch%20Linux%20+%20KDE%20%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE/">https://peoxin.github.io/blog/2022/05/01/Arch%20Linux%20+%20KDE%20%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE/</a>.<br>[3] Installation guide[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Installation_guide">https://wiki.archlinux.org/title/Installation_guide</a>.<br>[4] How to Install Deepin Desktop in Arch Linux [Complete Guide][EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://www.debugpoint.com/2021/01/deepin-arch-linux-install-20/">https://www.debugpoint.com/2021/01/deepin-arch-linux-install-20/</a>.<br>[5] Easy Step - Arch Linux ( EFI ) With Clover ( EFI )[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://www.insanelymac.com/forum/topic/294443-easy-step-arch-linux-efi-with-clover-efi/">https://www.insanelymac.com/forum/topic/294443-easy-step-arch-linux-efi-with-clover-efi/</a>.<br>[6] 10 Commands to Check Disk Partitions and Disk Space on Linux[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://www.binarytides.com/linux-command-check-disk-partitions/">https://www.binarytides.com/linux-command-check-disk-partitions/</a>.<br>[7] Can&#39;t establish an internet connection in Arch Linux[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://superuser.com/questions/751961/cant-establish-an-internet-connection-in-arch-linux">https://superuser.com/questions/751961/cant-establish-an-internet-connection-in-arch-linux</a>.<br>[8] Deepin Desktop Environment (简体中文)[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Deepin_Desktop_Environment_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">https://wiki.archlinux.org/title/Deepin_Desktop_Environment_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)</a>.<br>[9] Localization (简体中文)&#x2F;Simplified Chinese (简体中文)[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Localization_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)/Simplified_Chinese_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">https://wiki.archlinux.org/title/Localization_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)/Simplified_Chinese_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)</a>.<br>[10] VirtualBox&#x2F;Install Arch Linux as a guest[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/VirtualBox/Install_Arch_Linux_as_a_guest">https://wiki.archlinux.org/title/VirtualBox/Install_Arch_Linux_as_a_guest</a>.<br>[11] How to enable a Virtualbox shared folder for Linux guest systems[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://averagelinuxuser.com/virtualbox-shared-folder/">https://averagelinuxuser.com/virtualbox-shared-folder/</a>.<br>[12] Recommended Partitioning Scheme[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/installation_guide/s2-diskpartrecommend-x86">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/installation_guide/s2-diskpartrecommend-x86</a>.</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://mister-kin.github.io/software/pve/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images_public/avatar_alpha.webp"><meta itemprop="name" content="Mr. Kin"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Mr. Kin's Blog"><meta itemprop="description" content="Since you have chosen to chase, don't give up."></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="undefined | Mr. Kin's Blog"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/software/pve/" class="post-title-link" itemprop="url">PVE+iKuai+OpenWrt+fnOS虚拟机折腾记录</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2023-09-11 04:19:30" itemprop="dateCreated datePublished" datetime="2023-09-11T04:19:30+08:00">2023-09-11</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-04-19 01:52:31" itemprop="dateModified" datetime="2025-04-19T01:52:31+08:00">2025-04-19</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/software/" itemprop="url" rel="index"><span itemprop="name">software</span></a> </span></span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>12k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>44 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="背景">1 &nbsp&nbsp<a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>因联通赠送的光猫性能不支持双lan口长时间同时上网，故从海鲜市场（小黄鱼）上淘了一块n3530小工控机（准系统，无内存条），计划用来安装pve虚拟机用以作软路由处理宽带拨号和网关ip分配，光猫仅作为一个光电信号转换器。</p><h1 id="N3530工控机配置">2 &nbsp&nbsp<a href="#N3530工控机配置" class="headerlink" title="N3530工控机配置"></a>N3530工控机配置</h1><ul><li>CPU：Intel(R) Pentium(R) CPU N3530</li><li>内存：海力士DDR3L-8GB单根（从老笔记本电脑上拆一根DDR3条子给它用）</li><li>硬盘：海力士SH920 msata 256GB</li><li>网卡：千兆网卡Intel I211 *2+千兆网卡Realtek mini-pcie RTL8211E&#x2F;F（螃蟹卡，后期自己购买加装至mini pcie无线网卡口位置）</li></ul><h1 id="安装PVE">3 &nbsp&nbsp<a href="#安装PVE" class="headerlink" title="安装PVE"></a>安装PVE</h1><h2 id="N3530工控机BIOS的优化设置">3.1 &nbsp&nbsp<a href="#N3530工控机BIOS的优化设置" class="headerlink" title="N3530工控机BIOS的优化设置"></a>N3530工控机BIOS的优化设置</h2><p>该N3530工控机BIOS是采用经典的<code>AMI(American Megatrends)</code>方案。</p><ul><li>设置来电自启：<code>Chipset-&gt;North Bridge-&gt;Restore AC Power Loss-&gt;Power on</code></li><li>启用CPU内置温度传感器：<code>Advanced-&gt;CPU Configuration-&gt;CPU Thermal Configuration-&gt;DTS-&gt;Enabled</code></li><li>启用VT-x：<code>Advanced-&gt;CPU Configuration-&gt;Intel Virtualization Technology-&gt;Enabled</code></li><li>设置自定义功率模式：<code>Advanced-&gt;CPU Configuration-&gt;Power Technology-&gt;Custom</code>。（默认是Efficient节能模式）</li></ul><h2 id="PVE安装步骤">3.2 &nbsp&nbsp<a href="#PVE安装步骤" class="headerlink" title="PVE安装步骤"></a>PVE安装步骤</h2><ol><li>下载PVE系统镜像：<a target="_blank" rel="noopener" href="https://www.proxmox.com/en/downloads/proxmox-virtual-environment/iso">点击跳转</a>（我的情况就是需要下载pve 7.4的iso镜像文件，因为安装pve 8.x会引起<code>bootloader setup errors</code>报错而导致安装PVE系统失败）</li><li>制作U盘启动项：<a target="_blank" rel="noopener" href="https://github.com/ventoy/Ventoy/releases">ventoy</a>。拷贝镜像iso文件到U盘，启动选择pve镜像进入，选择图形安装界面。</li><li>同意协议。</li><li>点击option按钮，选择硬盘和ext4格式：<ol><li>swapsize&#x3D;8GB（交换分区请根据自己的硬盘容量和使用情况设置）</li><li>maxroot&#x3D;50GB（该分区对应PVE系统的local存储空间，主要用于存放ISO镜像和LXC模板（CT Templates），请根据自己的硬盘和使用情况设置）</li></ol></li><li>国家选择china，时区会自动修改为上海，键盘布局不改。</li><li>设置密码，邮箱随意。</li><li>管理网口，默认第一个做管理（enp1s0，pve系统里面识别的第一个网口，N3530工控机中靠近hdmi接口的rj45），第二个做wan口（方便后续维护）。域名hostname设置为pve.lan（这项随便填写都行，有能用的域名可填写上去，可解析到机器用域名管理pve虚拟机）；ip：192.168.1.2；掩码：255.255.255.0；网关：192.168.1.1（留给ikuai的地址），DNS：223.5.5.5。</li><li>查看确认已设置的内容（弹窗），确认安装。</li><li>访问WEB管理地址并登录：<a target="_blank" rel="noopener" href="https://192.168.1.2:8006/">https://192.168.1.2:8006</a>。账户：root。密码：[前面步骤设置的密码]。</li><li>设置网卡并确保pve能联网。</li></ol><h2 id="PVE升级步骤（7-4-8-x）">3.3 &nbsp&nbsp<a href="#PVE升级步骤（7-4-8-x）" class="headerlink" title="PVE升级步骤（7.4-&gt;8.x）"></a>PVE升级步骤（7.4-&gt;8.x）</h2><h3 id="替换PVE-7-4的Debian系统软件源和PVE软件源">3.3.1 &nbsp&nbsp<a href="#替换PVE-7-4的Debian系统软件源和PVE软件源" class="headerlink" title="替换PVE 7.4的Debian系统软件源和PVE软件源"></a>替换PVE 7.4的Debian系统软件源和PVE软件源</h3><p>注：推荐中科大源，清华源可能会遇到大型NAT局域网宽带频繁访问而导致被禁用IP，从而导致出现403 Forbidden。</p><div class="tabs" id="74sources"><ul class="nav-tabs"><li class="tab active"><a href="#74sources-1">PVE 7.4的Debian系统软件源</a></li><li class="tab"><a href="#74sources-2">PVE 7.4的PVE软件源</a></li><li class="tab"><a href="#74sources-3">PVE 7.4的CEPH分布式源</a></li></ul><div class="tab-content"><div class="tab-pane active" id="74sources-1"><p>修改<code>/etc/apt/sources.list</code>文件内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> /etc/apt/sources.list /etc/apt/sources.list.bak</span><br><span class="line">nano /etc/apt/sources.list</span><br></pre></td></tr></table></figure><div class="tabs" id="74sourcestype"><ul class="nav-tabs"><li class="tab active"><a href="#74sourcestype-1">PVE 7.4的Debian系统软件源（中科大源）</a></li><li class="tab"><a href="#74sourcestype-2">PVE 7.4的Debian系统软件源（清华源）</a></li></ul><div class="tab-content"><div class="tab-pane active" id="74sourcestype-1"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#deb http://ftp.debian.org/debian bullseye main contrib</span></span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian/ bullseye main contrib non-free</span><br><span class="line"></span><br><span class="line"><span class="comment">#deb http://ftp.debian.org/debian bullseye-updates main contrib</span></span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian/ bullseye-updates main contrib non-free</span><br><span class="line"></span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian/ bullseye-backports main contrib non-free</span><br><span class="line"><span class="comment"># security updates</span></span><br><span class="line"><span class="comment">#deb http://security.debian.org bullseye-security main contrib</span></span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian-security bullseye-security main contrib non-free</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="74sourcestype-2"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#deb http://ftp.debian.org/debian bullseye main contrib</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free</span><br><span class="line"></span><br><span class="line"><span class="comment">#deb http://ftp.debian.org/debian bullseye-updates main contrib</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free</span><br><span class="line"></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free</span><br><span class="line"><span class="comment"># security updates</span></span><br><span class="line"><span class="comment">#deb http://security.debian.org bullseye-security main contrib</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free</span><br></pre></td></tr></table></figure></div></div></div></div><div class="tab-pane" id="74sources-2"><p>删除pve-enterprise.list，新建pve-no-subscription.list。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> /etc/apt/sources.list.d/pve-enterprise.list /etc/apt/sources.list.d/pve-enterprise.list.bak</span><br></pre></td></tr></table></figure><div class="tabs" id="74pvesourcestype"><ul class="nav-tabs"><li class="tab active"><a href="#74pvesourcestype-1">PVE 7.4的PVE软件源（中科大源）</a></li><li class="tab"><a href="#74pvesourcestype-2">PVE 7.4的PVE软件源（清华源）</a></li></ul><div class="tab-content"><div class="tab-pane active" id="74pvesourcestype-1"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> deb https://mirrors.ustc.edu.cn/proxmox/debian/pve bullseye pve-no-subscription &gt; /etc/apt/sources.list.d/pve-no-subscription.list</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="74pvesourcestype-2"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> deb https://mirrors.tuna.tsinghua.edu.cn/proxmox/debian/pve bullseye pve-no-subscription &gt; /etc/apt/sources.list.d/pve-no-subscription.list</span><br></pre></td></tr></table></figure></div></div></div></div><div class="tab-pane" id="74sources-3"><p>修改<code>/etc/apt/sources.list.d/ceph.list</code>和<code>/usr/share/perl5/PVE/CLI/pveceph.pm</code>文件内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> /etc/apt/sources.list.d/ceph.list /etc/apt/sources.list.d/ceph.list.bak</span><br><span class="line"><span class="built_in">cp</span> /usr/share/perl5/PVE/CLI/pveceph.pm /usr/share/perl5/PVE/CLI/pveceph.pm.bak</span><br><span class="line">sed -i <span class="string">&quot;s#http://download.proxmox.com#https://mirrors.ustc.edu.cn/proxmox#g&quot;</span> /usr/share/perl5/PVE/CLI/pveceph.pm</span><br></pre></td></tr></table></figure><div class="tabs" id="74cephsourcestype"><ul class="nav-tabs"><li class="tab active"><a href="#74cephsourcestype-1">PVE 7.4的CEPH分布式源（中科大源）</a></li><li class="tab"><a href="#74cephsourcestype-2">PVE 7.4的CEPH分布式源（清华源）</a></li></ul><div class="tab-content"><div class="tab-pane active" id="74cephsourcestype-1"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> deb https://mirrors.ustc.edu.cn/proxmox/debian/ceph-quincy bullseye no-subscription &gt; /etc/apt/sources.list.d/ceph.list</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="74cephsourcestype-2"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> deb https://mirrors.tuna.tsinghua.edu.cn/proxmox/debian/ceph-quincy bullseye no-subscription &gt; /etc/apt/sources.list.d/ceph.list</span><br></pre></td></tr></table></figure></div></div></div></div></div></div><h3 id="升级到PVE-7-4最新的版本">3.3.2 &nbsp&nbsp<a href="#升级到PVE-7-4最新的版本" class="headerlink" title="升级到PVE 7.4最新的版本"></a>升级到PVE 7.4最新的版本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update -y &amp;&amp; apt dist-upgrade -y</span><br><span class="line">pveversion</span><br></pre></td></tr></table></figure><h3 id="检查版本升级的兼容性">3.3.3 &nbsp&nbsp<a href="#检查版本升级的兼容性" class="headerlink" title="检查版本升级的兼容性"></a>检查版本升级的兼容性</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pve7to8</span><br></pre></td></tr></table></figure><h3 id="替换PVE-8-x的Debian系统软件源和PVE软件源（国内镜像）">3.3.4 &nbsp&nbsp<a href="#替换PVE-8-x的Debian系统软件源和PVE软件源（国内镜像）" class="headerlink" title="替换PVE 8.x的Debian系统软件源和PVE软件源（国内镜像）"></a>替换PVE 8.x的Debian系统软件源和PVE软件源（国内镜像）</h3><p>注：推荐中科大源，清华源可能会遇到大型NAT局域网宽带频繁访问而导致被禁用IP，从而导致出现403 Forbidden。</p><div class="tabs" id="8xsources"><ul class="nav-tabs"><li class="tab active"><a href="#8xsources-1">PVE 8.x的Debian系统软件源</a></li><li class="tab"><a href="#8xsources-2">PVE 8.x的PVE软件源</a></li><li class="tab"><a href="#8xsources-3">PVE 8.x的CEPH分布式源</a></li></ul><div class="tab-content"><div class="tab-pane active" id="8xsources-1"><p>修改&#x2F;etc&#x2F;apt&#x2F;sources.list文件内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> /etc/apt/sources.list /etc/apt/sources.list.bak</span><br><span class="line">nano /etc/apt/sources.list</span><br></pre></td></tr></table></figure><div class="tabs" id="8xsourcestype"><ul class="nav-tabs"><li class="tab active"><a href="#8xsourcestype-1">PVE 8.x的中科大镜像源</a></li><li class="tab"><a href="#8xsourcestype-2">PVE 8.x的清华镜像源</a></li></ul><div class="tab-content"><div class="tab-pane active" id="8xsourcestype-1"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># deb http://ftp.debian.org/debian bookworm main contrib</span></span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian/ bookworm main contrib non-free non-free-firmware</span><br><span class="line"></span><br><span class="line"><span class="comment"># deb http://ftp.debian.org/debian bookworm-updates main contrib</span></span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian/ bookworm-updates main contrib non-free non-free-firmware</span><br><span class="line"></span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian/ bookworm-backports main contrib non-free non-free-firmware</span><br><span class="line"><span class="comment"># security updates</span></span><br><span class="line"><span class="comment"># deb http://security.debian.org bookworm-security main contrib</span></span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian-security bookworm-security main contrib non-free non-free-firmware</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="8xsourcestype-2"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># deb http://ftp.debian.org/debian bookworm main contrib</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm main contrib non-free non-free-firmware</span><br><span class="line"></span><br><span class="line"><span class="comment"># deb http://ftp.debian.org/debian bookworm-updates main contrib</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm-updates main contrib non-free non-free-firmware</span><br><span class="line"></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm-backports main contrib non-free non-free-firmware</span><br><span class="line"><span class="comment"># security updates</span></span><br><span class="line"><span class="comment"># deb http://security.debian.org bookworm-security main contrib</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian-security bookworm-security main contrib non-free non-free-firmware</span><br></pre></td></tr></table></figure></div></div></div></div><div class="tab-pane" id="8xsources-2"><p>删除pve-enterprise.list，新建pve-no-subscription.list。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> /etc/apt/sources.list.d/pve-enterprise.list /etc/apt/sources.list.d/pve-enterprise.list.bak</span><br></pre></td></tr></table></figure><div class="tabs" id="8xpvesourcestype"><ul class="nav-tabs"><li class="tab active"><a href="#8xpvesourcestype-1">PVE 8.x的PVE软件源（中科大源）</a></li><li class="tab"><a href="#8xpvesourcestype-2">PVE 8.x的PVE软件源（清华源）</a></li></ul><div class="tab-content"><div class="tab-pane active" id="8xpvesourcestype-1"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> deb https://mirrors.ustc.edu.cn/proxmox/debian/pve bookworm pve-no-subscription &gt; /etc/apt/sources.list.d/pve-no-subscription.list</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="8xpvesourcestype-2"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> deb https://mirrors.tuna.tsinghua.edu.cn/proxmox/debian/pve bookworm pve-no-subscription &gt; /etc/apt/sources.list.d/pve-no-subscription.list</span><br></pre></td></tr></table></figure></div></div></div></div><div class="tab-pane" id="8xsources-3"><p>修改<code>/etc/apt/sources.list.d/ceph.list</code>和<code>/usr/share/perl5/PVE/CLI/pveceph.pm</code>文件内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> /etc/apt/sources.list.d/ceph.list /etc/apt/sources.list.d/ceph.list.bak</span><br><span class="line"><span class="built_in">cp</span> /usr/share/perl5/PVE/CLI/pveceph.pm /usr/share/perl5/PVE/CLI/pveceph.pm.bak</span><br><span class="line">sed -i <span class="string">&quot;s#http://download.proxmox.com#https://mirrors.ustc.edu.cn/proxmox#g&quot;</span> /usr/share/perl5/PVE/CLI/pveceph.pm</span><br></pre></td></tr></table></figure><div class="tabs" id="8xcephsourcestype"><ul class="nav-tabs"><li class="tab active"><a href="#8xcephsourcestype-1">PVE 8.x的CEPH分布式源（中科大源）</a></li><li class="tab"><a href="#8xcephsourcestype-2">PVE 8.x的CEPH分布式源（清华源）</a></li></ul><div class="tab-content"><div class="tab-pane active" id="8xcephsourcestype-1"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> deb https://mirrors.ustc.edu.cn/proxmox/debian/ceph-quincy bookworm no-subscription &gt; /etc/apt/sources.list.d/ceph.list</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="8xcephsourcestype-2"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> deb https://mirrors.tuna.tsinghua.edu.cn/proxmox/debian/ceph-quincy bookworm no-subscription &gt; /etc/apt/sources.list.d/ceph.list</span><br></pre></td></tr></table></figure></div></div></div></div></div></div><h3 id="替换LXC模板（CT-Templates）镜像源">3.3.5 &nbsp&nbsp<a href="#替换LXC模板（CT-Templates）镜像源" class="headerlink" title="替换LXC模板（CT Templates）镜像源"></a>替换LXC模板（CT Templates）镜像源</h3><p>修改<code>/usr/share/perl5/PVE/APLInfo.pm</code>文件内容，<strong>针对 <code>/usr/share/perl5/PVE/APLInfo.pm</code> 文件的修改，重启后生效。</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /usr/share/perl5/PVE/APLInfo.pm /usr/share/perl5/PVE/APLInfo.pm.bak</span><br></pre></td></tr></table></figure><div class="tabs" id="lxcsourcestype"><ul class="nav-tabs"><li class="tab active"><a href="#lxcsourcestype-1">PVE LXC模板（CT Templates）（中科大源）</a></li><li class="tab"><a href="#lxcsourcestype-2">PVE LXC模板（CT Templates）（清华源）</a></li></ul><div class="tab-content"><div class="tab-pane active" id="lxcsourcestype-1"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&quot;s#http://download.proxmox.com/images#https://mirrors.ustc.edu.cn/proxmox/images#g&quot;</span> /usr/share/perl5/PVE/APLInfo.pm</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="lxcsourcestype-2"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&quot;s#http://download.proxmox.com/images#https://mirrors.tuna.tsinghua.edu.cn/proxmox/images#g&quot;</span> /usr/share/perl5/PVE/APLInfo.pm</span><br></pre></td></tr></table></figure></div></div></div><h3 id="开始正式升级">3.3.6 &nbsp&nbsp<a href="#开始正式升级" class="headerlink" title="开始正式升级"></a>开始正式升级</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update -y &amp;&amp; apt dist-upgrade -y</span><br></pre></td></tr></table></figure><div class="note info no-icon"><p>升级若遇到提示<code>Upgrade wants to remove package &#39;proxmox-ve&#39;</code>的话，在升级前尝试执行<code>apt remove linux-image-amd64</code>。</p></div><p>升级中会出现一些交互界面，下面是官网的建议（不清楚的选项，可以选择推荐参数）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/etc/issue -&gt; Proxmox VE will auto-generate this file on boot, and it has only cosmetic effects on the login console.</span><br><span class="line">Using the default <span class="string">&quot;No&quot;</span> (keep your currently-installed version) is safe here.</span><br><span class="line"></span><br><span class="line">/etc/lvm/lvm.conf -&gt; Changes relevant <span class="keyword">for</span> Proxmox VE will be updated, and a newer config version might be useful.</span><br><span class="line">If you did not make extra changes yourself and are unsure it<span class="string">&#x27;s suggested to choose &quot;Yes&quot; (install the package maintainer&#x27;</span>s version) here.</span><br><span class="line"></span><br><span class="line">/etc/ssh/sshd_config -&gt; If you have not changed this file manually, the only differences should be a replacement of ChallengeResponseAuthentication no with KbdInteractiveAuthentication no and some irrelevant changes <span class="keyword">in</span> comments (lines starting with <span class="comment">#).</span></span><br><span class="line">If this is the <span class="keyword">case</span>, both options are safe, though we would recommend installing the package maintainer<span class="string">&#x27;s version in order to move away from the deprecated ChallengeResponseAuthentication option. If there are other changes, we suggest to inspect them closely and decide accordingly.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/etc/default/grub -&gt; Here you may want to take special care, as this is normally only asked for if you changed it manually, e.g., for adding some kernel command line option.</span></span><br><span class="line"><span class="string">It&#x27;</span>s recommended to check the difference <span class="keyword">for</span> any relevant change, note that changes <span class="keyword">in</span> comments (lines starting with <span class="comment">#) are not relevant.</span></span><br><span class="line">If unsure, we suggested to selected <span class="string">&quot;No&quot;</span> (keep your currently-installed version)</span><br></pre></td></tr></table></figure><h3 id="去除未订阅提示">3.3.7 &nbsp&nbsp<a href="#去除未订阅提示" class="headerlink" title="去除未订阅提示"></a>去除未订阅提示</h3><p><strong>完成如下文件内容修改后，注销浏览器当前的PVE登录信息，并重新登录就没有提示弹窗了。</strong></p><ul><li><code>/usr/share/pve-manager/js/pvemanagerlib.js</code></li><li><code>/usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /usr/share/pve-manager/js/pvemanagerlib.js /usr/share/pve-manager/js/pvemanagerlib.js.bak</span><br><span class="line"><span class="built_in">cp</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js.bak</span><br><span class="line">sed -i <span class="string">&quot;s/data.status === &#x27;Active&#x27;/true/g&quot;</span> /usr/share/pve-manager/js/pvemanagerlib.js</span><br><span class="line">sed -i <span class="string">&quot;s/if (res === null || res === undefined || \!res || res/if(/g&quot;</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js</span><br><span class="line">sed -i <span class="string">&quot;s/.data.status.toLowerCase() !== &#x27;active&#x27;/false/g&quot;</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js</span><br><span class="line">systemctl restart pveproxy</span><br></pre></td></tr></table></figure><div class="flex-column"><img data-src="/images/pve/no_subscribe.webp">「无有效订阅」的提示弹窗</div><h3 id="后续PVE系统日常更新：">3.3.8 &nbsp&nbsp<a href="#后续PVE系统日常更新：" class="headerlink" title="后续PVE系统日常更新："></a>后续PVE系统日常更新：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update -y &amp;&amp; apt dist-upgrade -y</span><br></pre></td></tr></table></figure><h2 id="PVE安装和使用遇到的坑">3.4 &nbsp&nbsp<a href="#PVE安装和使用遇到的坑" class="headerlink" title="PVE安装和使用遇到的坑"></a>PVE安装和使用遇到的坑</h2><h3 id="PVE安装到99-时出现unable-to-install-the-EFI-boot-loader-on-dev-sda">3.4.1 &nbsp&nbsp<a href="#PVE安装到99-时出现unable-to-install-the-EFI-boot-loader-on-dev-sda" class="headerlink" title="PVE安装到99%时出现unable to install the EFI boot loader on &#39;&#x2F;dev&#x2F;sda&#39;"></a>PVE安装到99%时出现unable to install the EFI boot loader on &#39;&#x2F;dev&#x2F;sda&#39;</h3><p>报错信息：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bootloader setup errors:</span><br><span class="line">- failed to prepare EFI boot using Grub on &#x27;/dev/sda2&#x27;: unable to install the EFI boot loader on &#x27;/dev/sda&#x27;</span><br></pre></td></tr></table></figure><p>原因：PVE 8.0版本镜像īso不兼容N3530工控机，估计是bug。参考其他帖子说的只保留usb的uefi设备，依旧也会报错。并且因为机器的bios设置也比较繁琐，我反复尝试将其设置为csm模式，机器始终无法以csm模式启动，估计该主板的bios也是魔改过有bug的。因此导致也无法以csm模式安装pve。</p><p>解决方法：安装pve 7.4版本，再升级到pve 8.x。</p><h3 id="USB键盘一直插着时会无法响应的，无法进入并操控BIOS，只有CTRL-ALT-DELETE可以响应">3.4.2 &nbsp&nbsp<a href="#USB键盘一直插着时会无法响应的，无法进入并操控BIOS，只有CTRL-ALT-DELETE可以响应" class="headerlink" title="USB键盘一直插着时会无法响应的，无法进入并操控BIOS，只有CTRL+ALT+DELETE可以响应"></a>USB键盘一直插着时会无法响应的，无法进入并操控BIOS，只有CTRL+ALT+DELETE可以响应</h3><p>原因：推测为N3530工控机BIOS的驱动BUG。</p><p>解决方法：先不插键盘启动机器，看屏幕右下角等待主板自检代码走到99阶段，快速插上键盘，摁DEL键。如果一次不成功，就使用<code>CTRL+ALT+DELETE</code>强制重启，继续尝试该操作。</p><h3 id="hdmi屏幕不显bios">3.4.3 &nbsp&nbsp<a href="#hdmi屏幕不显bios" class="headerlink" title="hdmi屏幕不显bios"></a>hdmi屏幕不显bios</h3><p>N3530工控机主板BIOS内置驱动对普通HDMI小屏幕兼容性不好，只有成功启动PVE系统后才会正常显示画面，而在自检阶段和BIOS界面只会显示白屏或者花屏，接大屏驱动板兼容性好点。</p><h3 id="后面加装的RTL8211网卡不识别">3.4.4 &nbsp&nbsp<a href="#后面加装的RTL8211网卡不识别" class="headerlink" title="后面加装的RTL8211网卡不识别"></a>后面加装的RTL8211网卡不识别</h3><p>原因：因为安装pve系统之前未加装好螃蟹卡RTL8211，因此后续加装之后，pve系统并未识别到。</p><p>解决方法：重装pve系统。（驱动源码编译方案，也有编译报错，不好解决，推荐是重装pve，让pve自动打驱动）</p><h3 id="工控机重启bug，看门狗导致重启很长时间">3.4.5 &nbsp&nbsp<a href="#工控机重启bug，看门狗导致重启很长时间" class="headerlink" title="工控机重启bug，看门狗导致重启很长时间"></a>工控机重启bug，看门狗导致重启很长时间</h3><p>原因：未查明，只要一重启，就会长时间卡在看门狗的错误提示。</p><p>错误提示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">watchgod: watchdog0: watchdog did<span class="string">&#x27;t did not stop!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">systemd-shutdown: Failed to finalzie DM services, ignorening.</span></span><br></pre></td></tr></table></figure><p>解决方法：无法解决，只能长时间等待完成重启或者强制关机重开。</p><p><strong>P.S. 尝试在主板BIOS中主动启用看门狗计时器设置<code>Advanced-&gt;SIO MISC Configuration-&gt;Watchdog Dog Timer-&gt;Enabled</code>仍无法解决，该问题暂未查明原因。</strong></p><h3 id="Repository-Debian-bookworm-changed-its-non-free-component-value-from-non-free-to-non-free-non-free-firmware">3.4.6 &nbsp&nbsp<a href="#Repository-Debian-bookworm-changed-its-non-free-component-value-from-non-free-to-non-free-non-free-firmware" class="headerlink" title="Repository &#39;Debian bookworm&#39; changed its &#39;non-free component&#39; value from &#39;non-free&#39; to &#39;non-free non-free-firmware&#39;"></a>Repository &#39;Debian bookworm&#39; changed its &#39;non-free component&#39; value from &#39;non-free&#39; to &#39;non-free non-free-firmware&#39;</h3><p>问题现象：运行<code>apt update</code>出现报错：Repository &#39;Debian bookworm&#39; changed its &#39;non-free component&#39; value from &#39;non-free&#39; to &#39;non-free non-free-firmware&#39;</p><p>问题原因：Debian 12版本（bookworm）的非自有固件包（如硬件驱动程序）不再放在non-free目录中，而是non-free-firmware目录。</p><p>解决方法1（修正<code>/etc/apt/sources.list</code>软件源）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 确保软件源中添加了non-free-firmware目录，而不仅仅只有non-free目录</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm main contrib non-free non-free-firmware</span><br></pre></td></tr></table></figure><p>解决方法2（直接屏蔽该错误）：<br>创建一个文件<code>/etc/apt/apt.conf.d/no-bookworm-firmware.conf</code>，写入内容如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">APT::Get::Update::SourceListWarnings::NonFreeFirmware <span class="string">&quot;false&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="安装独立显卡的机器中PVE系统里面识别不到核显设备">3.4.7 &nbsp&nbsp<a href="#安装独立显卡的机器中PVE系统里面识别不到核显设备" class="headerlink" title="安装独立显卡的机器中PVE系统里面识别不到核显设备"></a>安装独立显卡的机器中PVE系统里面识别不到核显设备</h3><p>问题现象：华硕Z690-A Gaming WiFi D4主板在安装独立显卡后，运行<code>ls pci | grep VGA</code>找不到核显的VGA设备。</p><p>问题原因：主板BIOS未有开启核显。</p><p>解决方法：</p><ul><li>开启iGPU设置：<code>Advanced-&gt;System Agent (SA) Configuration-&gt;Graphics Configuration-&gt;iGPU Multi-Monitor-&gt;Enabled</code><ul><li>Intel 11代及以后的CPU核显不支持传统Legacy显示方式，如果看不到在主板BIOS中找不到iGPU设置选项的话，请设置关闭CSM：<code>BOOT-&gt;CSM (Compatibility Support Module)-&gt;Launch CSM-&gt;Disabled</code></li></ul></li><li>设置首选显示设备为核显：<code>Advanced-&gt;System Agent (SA) Configuration-&gt;Graphics Configuration-&gt;Primary Display-&gt;PEG Slot</code><ul><li>一般其他主板型号可能有的选项值：<ul><li>Auto</li><li>CPU Graphics：核显</li><li>PEG Slot (PCI-e Graphics Device)：独立显卡</li><li>PCIE (PCI-e Graphics Device)</li><li>IGD (Internal Graphics Device)：一般多指核显，除非主板自带有北桥显示芯片</li><li>PCI (PCI Graphics Device)</li></ul></li></ul></li></ul><h3 id="PVE概要页面利用率图标信息无法显示">3.4.8 &nbsp&nbsp<a href="#PVE概要页面利用率图标信息无法显示" class="headerlink" title="PVE概要页面利用率图标信息无法显示"></a>PVE概要页面利用率图标信息无法显示</h3><p>问题原因：rrdcached服务异常，某些情况下也可能会导致所有虚拟机显示「状态: unknown」。</p><p>解决方法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop rrdcached</span><br><span class="line"><span class="built_in">rm</span> -rf /var/lib/rrdcached/*</span><br><span class="line"><span class="comment"># 或者mv /var/lib/rrdcached /var/lib/rrdcached.bck</span></span><br><span class="line">systemctl start rrdcached</span><br></pre></td></tr></table></figure><h3 id="PVE面板节点和所有虚拟机显示「状态-unknown」，虚拟机正常运行">3.4.9 &nbsp&nbsp<a href="#PVE面板节点和所有虚拟机显示「状态-unknown」，虚拟机正常运行" class="headerlink" title="PVE面板节点和所有虚拟机显示「状态: unknown」，虚拟机正常运行"></a>PVE面板节点和所有虚拟机显示「状态: unknown」，虚拟机正常运行</h3><p>问题原因：pve的节点状态守护程序<code>pvestatd</code>异常。</p><p>解决方法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看状态和重启服务</span></span><br><span class="line">systemctl status pvestatd</span><br><span class="line">systemctl restart pvestatd</span><br></pre></td></tr></table></figure><h1 id="PVE硬件直通">4 &nbsp&nbsp<a href="#PVE硬件直通" class="headerlink" title="PVE硬件直通"></a>PVE硬件直通</h1><div class="note default no-icon"><p>如果机器本身就支持VT-X和VT-d等CPU虚拟化和直通硬件功能，则PVE启用IOMMU方面不需要额外设置。只需要设置好主板BIOS对应的CPU虚拟化和直通硬件功能即可，因为安装PVE系统阶段就会自动设置好启动IOMMU。</p></div><p>IOMMU允许系统设备在虚拟内存中进行寻址，也就是将虚拟内存地址映射为物理内存地址，让实体设备可以在虚拟的内存环境中工作，这样可以帮助系统扩充内存容量，提升性能。</p><p>换而言之，IOMMU可以使VM虚拟机能够接入一些物理设备，比如PCIe中的网卡、声卡、显卡，VM虚拟机可以直接或间接使用这些设备。</p><blockquote><p>在创建虚拟机时，芯片组一定要q35。因为Q35，才能PCIE直通，否则就是PCI直通。</p></blockquote><h2 id="检查硬件是否支持直通（BIOS内查看Advanced高级选项）">4.1 &nbsp&nbsp<a href="#检查硬件是否支持直通（BIOS内查看Advanced高级选项）" class="headerlink" title="检查硬件是否支持直通（BIOS内查看Advanced高级选项）"></a>检查硬件是否支持直通（BIOS内查看Advanced高级选项）</h2><ol><li>开启CPU虚拟化：Intel: VT-X(Intel Virtual Technology)。AMD: AMD-V(SVM, Secure Virtual Machine)。</li><li>开启硬件直通功能：Intel: Intel VT-d。AMD: IOMMU。</li><li>部分主板会有和Intel VT-d&#x2F;IOMMU相关联的<code>Memory Remap Feature</code>设置。</li></ol><div class="note danger no-icon"><p>如果主板BIOS中没有VT-d或者IOMMU功能选项，则很可能不支持直通硬件功能。一般确认CPU是否支持该特性即可，例如确认Intel CPU是否支持VT-d，请查询Intel 官方CPU SKU规格页面资料即可。</p></div><div class="note info no-icon"><p>若机器CPU明确支持VT-d特性，但在主板BIOS中却找不到该选项的话，则很可能是机器主板BIOS默认设置关闭，并隐藏了该设置选项。</p><p>解决方法：使用<code>UniversalAMDFormBrowser</code>工具查看隐藏设定并开启。</p><ol><li>下载<code>UniversalAMDFormBrowser</code>工具<ul><li><strong>方案1（推荐）</strong>：<a target="_blank" rel="noopener" href="https://github.com/mio-19/UniversalAMDFormBrowser-Ventoy">UniversalAMDFormBrowser-Ventoy</a>的<code>UniversalAMDFormBrowser.img</code>文件：该方案只需要将img文件拷贝到ventoy引导盘即可。</li><li>方案2：<a target="_blank" rel="noopener" href="https://github.com/DavidS95/Smokeless_UMAF">Smokeless_UMAF</a>的<code>UniversalAMDFormBrowser.zip</code>文件：该方案需要制作FAT32分区格式的U盘制作引导盘。</li></ul></li><li>重启机器，选择U盘启动项，引导加载<code>UniversalAMDFormBrowser</code>镜像。</li><li>在<code>UniversalAMDFormBrowser</code>中查看隐藏设定，例如隐藏的VT-d选项或者解除功耗限制选项等。</li></ol></div><h2 id="PVE提示No-IOMMU-detected">4.2 &nbsp&nbsp<a href="#PVE提示No-IOMMU-detected" class="headerlink" title="PVE提示No IOMMU detected"></a>PVE提示<code>No IOMMU detected</code></h2><p>当pve未启用IOMMU或者硬件不支持直通（即使手动设置PVE开启IOMMU）时，在ProxmoxVE(PVE)的VM&#x2F;VPS中添加PCI设备时候提示：<code>No IOMMU detected, please activate it.See Documentation for further information</code>.</p><p>解决方法：请确认自己的机器是否支持VT-X和VT-d等CPU虚拟化和直通硬件功能，并是否已开启IOMMU。若硬件不支持，建议更换支持这些功能特性的硬件设备。</p><h2 id="PVE启用IOMMU">4.3 &nbsp&nbsp<a href="#PVE启用IOMMU" class="headerlink" title="PVE启用IOMMU"></a>PVE启用IOMMU</h2><div class="note info no-icon"><p>内核版本为5.15或之前的，在ProxmoxVE(PVE)系统内核中，需要手动启用IOMMU。5.15版本以后的ProxmoxVE(PVE)系统内核自带默认开启了IOMMU支持。</p><p>但我的硬件（N3530工控机）本身不支持VT-d功能（<a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/products/sku/81074/intel-pentium-processor-n3530-2m-cache-up-to-2-58-ghz/specifications.html">N3530 SKU规格页面明确写到不支持VT-d</a>），因此安装PVE时并未自动启用IOMMU。</p></div><div class="tabs" id="引导类型"><ul class="nav-tabs"><li class="tab active"><a href="#引导类型-1">GRUD引导类型（PVE默认引导方式）</a></li><li class="tab"><a href="#引导类型-2">systemd-boot引导类型（非PVE现行版本常见引导方式）</a></li></ul><div class="tab-content"><div class="tab-pane active" id="引导类型-1"><ol><li>编辑grub文件：<code>nano /etc/default/grub</code></li><li>找到GRUB_CMDLINE_LINUX_DEFAULT这一行：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">GRUB_DEFAULT=0</span><br><span class="line">GRUB_TIMEOUT=5</span><br><span class="line">GRUB_DISTRIBUTOR=`lsb_release -i -s &lt;strong&gt;2&lt;/strong&gt;&gt; /dev/null || echo Debian`</span><br><span class="line">GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet&quot;</span><br><span class="line">GRUB_CMDLINE_LINUX=&quot;&quot;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><ol start="3"><li>根据CPU类型修改</li></ol><div class="tabs" id="grub-cpu类型"><ul class="nav-tabs"><li class="tab active"><a href="#grub-cpu类型-1">Intel CPU</a></li><li class="tab"><a href="#grub-cpu类型-2">AMD CPU</a></li></ul><div class="tab-content"><div class="tab-pane active" id="grub-cpu类型-1"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet intel_iommu=on&quot;</span><br><span class="line">...</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="grub-cpu类型-2"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet amd_iommu=on&quot;</span><br><span class="line">...</span><br></pre></td></tr></table></figure></div></div></div>4. 更新grub：`update-grub` 5. 重启PVE</div><div class="tab-pane" id="引导类型-2"><ol><li>编辑cmdline：<code>nano /etc/kernel/cmdline</code>。（若不存在，则新建该文件）</li><li>根据CPU类型在第一行末尾添加：</li></ol><div class="tabs" id="systemd-boot-cpu类型"><ul class="nav-tabs"><li class="tab active"><a href="#systemd-boot-cpu类型-1">Intel CPU</a></li><li class="tab"><a href="#systemd-boot-cpu类型-2">AMD CPU</a></li></ul><div class="tab-content"><div class="tab-pane active" id="systemd-boot-cpu类型-1"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">quiet intel_iommu=on</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="systemd-boot-cpu类型-2"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">quiet amd_iommu=on</span><br></pre></td></tr></table></figure></div></div></div></div></div></div><h2 id="验证PVE的IOMMU是否启用">4.4 &nbsp&nbsp<a href="#验证PVE的IOMMU是否启用" class="headerlink" title="验证PVE的IOMMU是否启用"></a>验证PVE的IOMMU是否启用</h2><ol><li>查询命令：<code>dmesg | grep -e DMAR -e IOMMU</code>。输出显示<code>DMAR: IOMMU enabled</code>或者<code>DMAR: Intel(R) Virtualization Technology for Directed I/O</code>证明已启用。</li><li>实操验证：虚拟机分配PCI设备时可见。</li></ol><h2 id="PVE启用PT模式">4.5 &nbsp&nbsp<a href="#PVE启用PT模式" class="headerlink" title="PVE启用PT模式"></a>PVE启用PT模式</h2><div class="note info no-icon"><p>PT模式：会在IOMMU需要使用时候启动，适配器不需要使用 DMA 转换到内存，因此可以提高其他没有分配过设备的性能。</p></div><ol><li>编辑grub文件：<code>nano /etc/default/grub</code></li><li>找到GRUB_CMDLINE_LINUX_DEFAULT这一行：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">GRUB_DEFAULT=0</span><br><span class="line">GRUB_TIMEOUT=5</span><br><span class="line">GRUB_DISTRIBUTOR=`lsb_release -i -s &lt;strong&gt;2&lt;/strong&gt;&gt; /dev/null || echo Debian`</span><br><span class="line">GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet&quot;</span><br><span class="line">GRUB_CMDLINE_LINUX=&quot;&quot;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><ol start="3"><li>附加参数iommu&#x3D;pt，Intel和AMD芯片均可使用这个参数。</li><li>添加模块设置（5.4内核需自行添加，现行版本自带有添加）：<code>nano /etc/modules</code>。没有如下内容需添加。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vfio</span><br><span class="line">vfio_iommu_type1</span><br><span class="line">vfio_pci</span><br><span class="line">vfio_virqfd</span><br></pre></td></tr></table></figure><ol start="5"><li>刷新 initramfs：<code>update-initramfs -u -k all</code></li><li>更新 grub：<code>update-grub</code></li></ol><h1 id="创建PVE虚拟机">5 &nbsp&nbsp<a href="#创建PVE虚拟机" class="headerlink" title="创建PVE虚拟机"></a>创建PVE虚拟机</h1><blockquote><p>若机器硬件性能不太足够的话，不建议安装win系统，win系统极度消耗硬件性能（即便是空载待机状态也消耗很大），而这影响openwrt的性能。比如我的情况：安装了tiny10系统，千兆网线，宽带500M实测不到300Mbp&#x2F;s（这里是指用<a target="_blank" rel="noopener" href="http://speed.unicomgd.com:8080/">广东联通宽带测速平台</a>测试的结果，实际ikuai主路由测试速率却又正常），局域网速率最高只能到700Mbp&#x2F;s的速率。关闭后tiny10后，实测宽带速率恢复正常，局域网速率跑到900Mbp&#x2F;s出头）</p></blockquote><h2 id="PVE基础设置">5.1 &nbsp&nbsp<a href="#PVE基础设置" class="headerlink" title="PVE基础设置"></a>PVE基础设置</h2><ol><li>访问WEB管理地址并登录：<a target="_blank" rel="noopener" href="https://192.168.1.2:8006/">https://192.168.1.2:8006</a>，账户：root。密码：[前面安装步骤设置的密码]。</li><li>根据硬件网卡情况，添加并设置好虚拟网桥Linux Bridge：创建&gt;Linux Bridge&gt;桥接接口填写物理网口地址名称。以我的机器为例，机器三个物理网口，PVE新建5个网桥，前三个网桥和物理网口绑定，第四个网桥用作iKuai和OpenWrt之间的传输，第五个网桥用作其他虚拟机系统的传输。</li></ol><h2 id="安装爱快iKuai">5.2 &nbsp&nbsp<a href="#安装爱快iKuai" class="headerlink" title="安装爱快iKuai"></a>安装爱快iKuai</h2><ol><li>下载iKuai镜像：<a target="_blank" rel="noopener" href="https://www.ikuai8.com/component/download">点击跳转</a></li><li>local-内容-上传：iKuai的安装镜像文件。</li><li>创建虚拟机，命名虚拟机名称ikuai，VM编号100。</li><li>CD&#x2F;DVD光盘镜像文件选择刚上传的ISO镜像。</li><li>主硬盘分配2G，额外添加EFI磁盘（不勾选添加密钥），CPU给4核（KVM64），内存分配4G（64位iKuai要求4G内存），网卡模型选择VirtIO（半虚拟化）。</li><li>完成新建后，在硬件标签页中继续完成添加所有网桥，网桥的防火墙全部关掉（使用iKuai的），模型都选择半虚拟化。</li><li>在选项标签页中把「开机自启动」开启，启动顺序设置为1，引导顺序只开disk‘xxxx’磁盘，把网络启动关掉，CD启动上移到第一位。</li><li>点击启动虚拟机，完成安装即可。</li><li>iKuai内识别的第一个网卡设置为lan1。</li><li>输入字母o回车进入其「其他选项」，开启外网访问web。</li><li>访问WEB管理地址并登录：<a target="_blank" rel="noopener" href="http://192.168.1.1/">http://192.168.1.1:80</a>。默认账户：admin。默认密码：admin。</li></ol><h2 id="安装OpenWrt">5.3 &nbsp&nbsp<a href="#安装OpenWrt" class="headerlink" title="安装OpenWrt"></a>安装OpenWrt</h2><h3 id="OpenWrt镜像的选择">5.3.1 &nbsp&nbsp<a href="#OpenWrt镜像的选择" class="headerlink" title="OpenWrt镜像的选择"></a>OpenWrt镜像的选择</h3><ul><li><a target="_blank" rel="noopener" href="https://openwrt.mpdn.fun:8443/?dir=lede/x86_64">Bleach OpenWrt</a>：推荐（本教程使用该固件）。内置SmartDNS，软件包空间设置为1G，剩余五百多兆。</li><li><a target="_blank" rel="noopener" href="https://drive.google.com/drive/folders/1PsS3c0P7a4A4KY8plQg4Fla8ZI-PGBb1">eSir GDQ 高大全</a>：eSir的高大全固件。不推荐。没有内置SmartDNS拓展（我测试时安装SmartDNS并未出现有服务项，无效）。并且相较于Blench版本，较为繁琐。软件包空间只剩余几兆，需自己手动扩盘。</li></ul><h3 id="安装步骤">5.3.2 &nbsp&nbsp<a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h3><ol><li>创建虚拟机，命名虚拟机名称openwrt，VM编号101。</li><li>CD&#x2F;DVD光盘镜像文件设置为无介质。</li><li>主硬盘随便分配（后续会删除），额外添加EFI磁盘（不勾选添加密钥），CPU给4核（KVM64），内存分配4G，网卡模型选择VirtIO（半虚拟化）。</li><li>网桥只选择第四个网桥（用作iKuai和OpenWrt之间的传输），网卡的防火墙全部关掉（使用iKuai的），模型选择半虚拟化。</li><li>下载OpenWrt镜像：<a href="#OpenWrt%E9%95%9C%E5%83%8F%E7%9A%84%E9%80%89%E6%8B%A9">见上一小节</a></li><li>local-内容-上传：OpenWrt的镜像文件。</li><li>向虚拟机导入OpenWrt镜像：<code>qm importdisk 101 /var/lib/vz/template/iso/bleach-plus-20230826-openwrt-x86-64-generic-squashfs-combined-efi.img local-lvm</code>。（直接写盘即可，无需安装）。</li><li>在pve管理页面中，加载刚才导入镜像生成的磁盘。</li><li>在选项标签页中把「开机自启动」开启，启动顺序设置为2，引导顺序只开disk‘xxxx’磁盘，把网络启动关掉。</li><li>点击启动虚拟机。</li><li>pve中用shell：<code>vi /etc/config/network</code>，将lan口ip改为<code>192.168.1.3</code>，<code>reboot</code>重启。vim编辑：按i进入修改模式，按esc退出编辑模式，输入 :wq回车保存修改。</li><li>访问WEB管理地址并登录：<a target="_blank" rel="noopener" href="http://192.168.1.3/">http://192.168.1.3</a>。默认账户：root。默认密码：password。</li></ol><h2 id="安装飞牛私有云fnOS">5.4 &nbsp&nbsp<a href="#安装飞牛私有云fnOS" class="headerlink" title="安装飞牛私有云fnOS"></a>安装飞牛私有云fnOS</h2><ol><li>下载飞牛私有云fnOS镜像：<a target="_blank" rel="noopener" href="https://www.fnnas.com/download">点击跳转</a></li><li>local-内容-上传：fnOS的安装镜像文件。</li><li>创建虚拟机，命名虚拟机名称fnOS，VM编号102。</li><li>CD&#x2F;DVD光盘镜像文件选择刚上传的ISO镜像。</li><li>主硬盘分配64G，额外添加EFI磁盘（不勾选添加密钥），CPU给4核（KVM64），内存分配6G（fnOS系统内存需求还是有点大的），网卡模型选择VirtIO（半虚拟化）。<ul><li>其他硬盘后续自行根据需求添加。</li></ul></li><li>网桥只选择第五个网桥（用作iKuai和fnOS之间的传输），网卡的防火墙全部关掉（使用iKuai的），模型选择半虚拟化。</li><li>在选项标签页中把「开机自启动」开启，启动顺序设置为3，引导顺序只开disk‘xxxx’磁盘，把网络启动关掉，CD启动上移到第一位。</li><li>点击启动虚拟机。</li><li>选择<code>Graphical Install</code>进行图形化安装流程。</li><li>选择系统主硬盘进行安装。</li><li>系统分区大小：64GB；Swap大小：0GB。（有论坛帖子反馈开启<code>Swap cache</code>时，某些下载应用例如<code>QBittorrent</code>可能会引导硬盘持续读取和CPU的异常占用。永久禁用Swap还需要修改fstab文件。）</li><li>点击确认安装，选择网卡界面，直接默认选项确认即可。</li><li>安装完成后，点击确认开始重启。摁<code>ESC</code>键，进入虚拟机BIOS设置界面，重新选择硬盘分区作为启动项启动。（否则默认启动CD）</li><li>出现<code>Debian GNU/Linux</code>系统引导选项就是安装成功了</li><li>进入到传统Linux登录界面（无GUI），这里能看到WEB管理地址。若需要固定IP地址，在<code>ikuai</code>中找到对应MAC地址加入静态分配表即可。</li><li>访问WEB管理地址并登录：<a target="_blank" rel="noopener" href="http://192.168.1.5:5666/">http://192.168.1.5:5666/</a>。首次访问会提示创建NAS<code>设备名称``超级管理员账号``密码``确认密码</code>。</li></ol><h2 id="创建虚拟机遇到的坑">5.5 &nbsp&nbsp<a href="#创建虚拟机遇到的坑" class="headerlink" title="创建虚拟机遇到的坑"></a>创建虚拟机遇到的坑</h2><h3 id="添加EFI磁盘后，启动无法引导磁盘，出现shell界面。">5.5.1 &nbsp&nbsp<a href="#添加EFI磁盘后，启动无法引导磁盘，出现shell界面。" class="headerlink" title="添加EFI磁盘后，启动无法引导磁盘，出现shell界面。"></a>添加EFI磁盘后，启动无法引导磁盘，出现shell界面。</h3><p>原因：创建EFI磁盘时，勾选了添加密钥。</p><p>解决方法：创建EFI磁盘时，取消勾选添加密钥。</p><h3 id="安装windows镜像，无法识别找到磁盘">5.5.2 &nbsp&nbsp<a href="#安装windows镜像，无法识别找到磁盘" class="headerlink" title="安装windows镜像，无法识别找到磁盘"></a>安装windows镜像，无法识别找到磁盘</h3><p>原因：scsi不适合windows镜像，windows安装解决识别不到硬盘。</p><p>解决方法：创建硬盘时，总线&#x2F;设备选择：SATA硬盘或者IDE。</p><h3 id="安装windows镜像，网卡无驱动">5.5.3 &nbsp&nbsp<a href="#安装windows镜像，网卡无驱动" class="headerlink" title="安装windows镜像，网卡无驱动"></a>安装windows镜像，网卡无驱动</h3><p>现象：当网卡设置为virtio模型时，安装并进入到windows系统后，网卡无驱动。</p><p>原因：windows系统自带的驱动无此虚拟硬件的驱动。</p><p>解决方式：加载virtio镜像，并运行x64程序安装驱动即可。</p><p>VirtIO镜像下载地址：<a target="_blank" rel="noopener" href="https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/archive-virtio/">点击跳转</a></p><h2 id="创建LXC容器遇到的坑">5.6 &nbsp&nbsp<a href="#创建LXC容器遇到的坑" class="headerlink" title="创建LXC容器遇到的坑"></a>创建LXC容器遇到的坑</h2><h3 id="使用debian-12的CT模板创建LXC容器SSH终端中文乱码">5.6.1 &nbsp&nbsp<a href="#使用debian-12的CT模板创建LXC容器SSH终端中文乱码" class="headerlink" title="使用debian-12的CT模板创建LXC容器SSH终端中文乱码"></a>使用<code>debian-12</code>的CT模板创建LXC容器SSH终端中文乱码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">apt install locales -y</span><br><span class="line"><span class="comment"># 需要重新设置语言的，也可以重新执行该命令</span></span><br><span class="line">dpkg-reconfigure locales</span><br><span class="line"><span class="comment"># 使用Page Up和Page Down翻页查找这两种语言，使用空格确认复选框，tab键切换「确认」，然后回车执行</span></span><br><span class="line"><span class="comment"># en_US.UTF-8 UTF-8</span></span><br><span class="line"><span class="comment"># zh_CN.UTF-8 UTF-8</span></span><br><span class="line"><span class="comment"># 然后重启机器</span></span><br><span class="line">init 6</span><br></pre></td></tr></table></figure><h2 id="非特权（unprivileged）LXC容器无法设置vm-max-map-count内核参数">5.7 &nbsp&nbsp<a href="#非特权（unprivileged）LXC容器无法设置vm-max-map-count内核参数" class="headerlink" title="非特权（unprivileged）LXC容器无法设置vm.max_map_count内核参数"></a>非特权（unprivileged）LXC容器无法设置<code>vm.max_map_count</code>内核参数</h2><p>报错提示：<code>error: permission denied on key &#39;vm.max_map_count&#39;</code></p><p>报错原因：因为非特权的LXC容器的<code>/proc/sys</code>是以只读方式挂载到容器里面，无法修改sysctl内核参数。</p><p>解决方法：在PVE宿主机上，使用<code>sysctl -w vm.max_map_count=2000000</code>命令设置<code>vm.max_map_count</code>内核参数。<code>max_map_count</code>默认值是262144。</p><h3 id="补充知识点：namespace化的sysctl内核参数">5.7.1 &nbsp&nbsp<a href="#补充知识点：namespace化的sysctl内核参数" class="headerlink" title="补充知识点：namespace化的sysctl内核参数"></a>补充知识点：namespace化的sysctl内核参数</h3><p><code>vm.max_map_count</code>属于内核参数，而<code>vm.*</code>参数并没有namespace化。只有namespace化的sysctl内核参数在容器内直接修改设置的时候，不会影响宿主机和其他容器。</p><p>已经namespace化的sysctl内核参数：</p><ul><li>kernel.shm*</li><li>kernel.msg*</li><li>kernel.sem</li><li>fs.mqueue.*</li><li>net.*<ul><li>net.netfilter.nf_conntrack_max（Linux 5.12.2之前并未namespace化）</li><li>net.netfilter.nf_conntrack_expect_max（Linux 5.12.2之前并未namespace化）</li></ul></li></ul><p>给LXC容器单独设置sysctl内核参数的方式：</p><ul><li>为LXC容器开启特权选项<code>--privileged</code>，对应<code>/proc</code>目录的挂载方式为<code>rw</code>，可以直接在容器内使用命令修改参数了。若修改的是<code>namespaced</code>参数，则不会影响宿主机和其他容器。</li><li>把<code>/proc/sys</code>bind到容器里面，该方式和<code>--privileged</code>效果类似。</li></ul><p>给docker容器单独设置sysctl内核参数的方式：</p><ul><li><code>--privileged</code>：<code>docker run --privileged -it ubuntu bash</code>，该方式启动后，可以通过命令任意修改sysctl参数。</li><li>把&#x2F;proc&#x2F;sys bind到容器里面，再具体写值，和上面的效果类似。<ol><li><code>docker run -v /proc/sys:/writable-sys -it ubuntu bash</code></li><li><code>echo 62 &gt; /writable-sys/net/ipv4/ip_default_ttl</code></li></ol></li><li><code>--sysctl</code>：<code>docker run -it --sysctl &#39;net.ipv4.ip_default_ttl=63&#39; ubuntu sysctl net.ipv4.ip_default_ttl</code>。<ul><li>只有namespaced参数才可以。否则会报错&quot;invalid argument...&quot;</li><li>这种方式只是在容器初始化过程中完成内核参数的修改，容器运行起来以后，&#x2F;proc&#x2F;sys仍然是以只读方式挂载的，在容器中不能再次修改sysctl内核参数。</li></ul></li></ul><h1 id="iKuai-OpenWRT-做旁路由网络拓扑">6 &nbsp&nbsp<a href="#iKuai-OpenWRT-做旁路由网络拓扑" class="headerlink" title="iKuai +OpenWRT 做旁路由网络拓扑"></a>iKuai +OpenWRT 做旁路由网络拓扑</h1><p>iKuai作为主路由，负责拨号及DHCP，OpenWRT做旁路由。SmartDNS+AdGuardHome设置分流与去广告。SmartDNS作为DNS管理并提供DNS缓存，实现国内国外DNS分流，彻底解决DNS污染问题、实现秒开网页。同时搭配AdGuardHome实现整个局域网去广告。</p><p>DNS转发流程：设置最核心的部分就是DNS转发端口的衔接，就是把DNSMASQ、Adguardhome、SmartDNS三个插件里的DNS服务器功能分成三个层级，实现层层转发。依次是第一级DNSMASQ，第二级Adguardhome，第三级SmartDNS，第四级OpenClash。</p><h2 id="iKuai的设置">6.1 &nbsp&nbsp<a href="#iKuai的设置" class="headerlink" title="iKuai的设置"></a>iKuai的设置</h2><ul><li><del>系统设置&gt;重启关机&gt;添加一个重启计划：每天05:00时重启。</del></li><li>网络设置&gt;内外网设置<ul><li>外网接口（选择iKuai识别到的第二个网口）：填入宽带拨号信息。</li><li>内网接口（iKuai识别到的第一个网口，IP地址192.168.1.1）：链路桥接（选择剩余的其他全部接口）</li></ul></li><li>DHCP设置&gt;DHCP服务端<ul><li>单iKuai版：<ul><li>客户端地址：192.168.1.10-192.168.1.254（1-9留给专用设备的管理地址）</li><li>子网掩码：255.255.255.0</li><li>网关：192.168.1.1</li><li>首选DNS：223.5.5.5</li><li>备选DNS：114.114.114.114</li></ul></li><li>iKuai+OpenWrt版本：<ul><li>客户端地址：192.168.1.10-192.168.1.254（1-9留给专用设备的管理地址）</li><li>子网掩码：255.255.255.0</li><li>网关：192.168.1.3</li><li>首选DNS：192.168.1.3</li><li>备选DNS：192.168.1.3</li></ul></li></ul></li><li>DNS设置&gt;DNS设置<ul><li>单iKuai版：<ul><li>首选DNS：223.5.5.5</li><li>备选DNS：114.114.114.114</li></ul></li><li>iKuai+OpenWrt版本：<ul><li>首选DNS：192.168.1.3</li><li>备选DNS：192.168.1.3</li></ul></li></ul></li><li>UPnP设置&gt;UPnP设置<ul><li>UPnP即插即用服务：开启</li><li>允许内网IP映射：0.0.0.0-255.255.255.255</li><li>默认线路设置：任意</li><li>掉线检测：开启</li><li>检测周期：2</li><li>定时重启：开启</li><li>重启周期：全选</li><li>重启时间：05:00。</li></ul></li></ul><h2 id="OpenWrt设置">6.2 &nbsp&nbsp<a href="#OpenWrt设置" class="headerlink" title="OpenWrt设置"></a>OpenWrt设置</h2><h3 id="定时重启">6.2.1 &nbsp&nbsp<a href="#定时重启" class="headerlink" title="定时重启"></a><del>定时重启</del></h3><p><del>系统&gt;定时重启：启用，设置每天05:00。</del></p><h3 id="网络">6.2.2 &nbsp&nbsp<a href="#网络" class="headerlink" title="网络"></a>网络</h3><h4 id="接口-LAN">6.2.2.1 &nbsp&nbsp<a href="#接口-LAN" class="headerlink" title="接口&gt;LAN"></a>接口&gt;LAN</h4><ul><li>IPv4地址：192.168.1.3。管理OpenWrt的地址。</li><li>和ikuai一致保证同一个网段。</li><li>IPv4网关：指向iKuai的网关。保证OpenWrt的上网数据传输到iKuai再传输到外网。</li><li>使用自定义的DNS服务器：223.5.5.5（初始先设置阿里云DNS保证设置过程的上网）。后面等设置好SmartDNS之后改由OpenWrt代理，即输入192.168.1.3。</li><li>关闭DHCP服务，统一由iKuai分配。</li><li>禁用掉IPv6服务。</li><li>物理设置：桥接接口。（因为选用的也是）</li><li>lan高级设置：不勾选IPv6，勾选【开启开机自动运行】和【强制链路】。</li></ul><h4 id="Turbo-ACC-加速">6.2.2.2 &nbsp&nbsp<a href="#Turbo-ACC-加速" class="headerlink" title="Turbo ACC 加速"></a>Turbo ACC 加速</h4><p>只开启前三个即可，DNS缓存后面由SmartDNS来管理。</p><h4 id="防火墙设置">6.2.2.3 &nbsp&nbsp<a href="#防火墙设置" class="headerlink" title="防火墙设置"></a>防火墙设置</h4><ul><li>SYN-flood 防御：关闭（此项开启关闭都行）</li><li>丢弃无效数据包：启用（此项开启关闭都行）</li><li>启用FullCone-NAT：高性能模式</li><li>入站数据、出站数据、转发都设置为接受。</li><li>lan口开启：IP 动态伪装（只保留lan口的规格，其他接口全部删除）</li><li>防火墙自定义规则（一般默认就有前四条规则，没有需加上）</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">iptables -t nat -A PREROUTING -p udp —dport 53 -j REDIRECT —to-ports 53</span><br><span class="line">iptables -t nat -A PREROUTING -p tcp —dport 53 -j REDIRECT —to-ports 53</span><br><span class="line">[ -n “$(command -v ip6tables)” ] &amp;&amp; ip6tables -t nat -A PREROUTING -p udp —dport 53 -j REDIRECT —to-ports 53</span><br><span class="line">[ -n “$(command -v ip6tables)” ] &amp;&amp; ip6tables -t nat -A PREROUTING -p tcp —dport 53 -j REDIRECT —to-ports 53</span><br><span class="line">iptables -t nat -I POSTROUTING -o eth0 -j MASQUERADE</span><br></pre></td></tr></table></figure><h3 id="SmartDNS">6.2.3 &nbsp&nbsp<a href="#SmartDNS" class="headerlink" title="SmartDNS"></a>SmartDNS</h3><div class="note info no-icon"><p>Bleach OpenWrt固件自带SmartDNS，eSir GDQ高大全固件需自行手动安装。</p></div><ul><li>基本设置<ul><li>启用</li><li>本地端口6053</li></ul></li><li>高级设置<ul><li>开启TCP服务器</li><li>勾选域名预加载</li><li>勾选缓存过期服务</li><li>缓存大小设为：1000000</li><li>域名TTL最大值设为：3600</li></ul></li><li>第二DNS服务器<ul><li>启用</li><li>本地端口5335</li><li>TCP服务器</li><li>服务器组：oversea</li><li>跳过测速</li><li>跳过address规则</li><li>跳过address SOA(#)规则</li><li>跳过双栈优选</li><li>跳过cache</li><li>停用IPV6地址解析</li></ul></li><li>上游服务器（添加DNS的设置里面可以设置服务器组）<ul><li>服务器组名称：china（10条左右，包含iKuai路由宽带拨号返回的两个宽带供应商提供的DNS）<ol><li>iKuai路由宽带拨号返回的宽带供应商提供的DNS1，udp协议</li><li>iKuai路由宽带拨号返回的宽带供应商提供的DNS2，udp协议</li><li>114dns，114.114.114.114，udp协议</li><li>114dns，114.114.115.115，udp协议</li><li>opener dns，42.120.21.30，udp协议</li><li>阿里dns，223.5.5.5，udp协议</li><li>阿里dns，223.6.6.6，udp协议</li><li>腾讯dns，119.29.29.29，udp协议</li><li>百度dns，180.76.76.76，udp协议</li><li>华为dns，122.112.208.1，udp协议</li></ol></li><li>服务器组名称：oversea（10条左右）<ol><li>google dns，8.8.8.8，udp协议</li><li>google dns，8.8.4.4，tls协议</li><li>CloudFlare，1.1.1.1，udp协议</li><li>IBM Quad9，9.9.9.9，udp协议</li><li>Norton ConnectSafe，199.85.126.10，udp协议</li><li>Norton ConnectSafe，199.85.127.10，udp协议</li><li>OpenDNS，208.67.222.222，tls协议</li><li>OpenDNS，208.67.220.220，udp协议</li><li>V2EX DNS，199.91.73.222，tls协议</li><li>V2EX DNS，178.79.131.110，tls协议</li></ol></li></ul></li><li>域名规则<ul><li>服务器组：china</li><li>域名分流设置：跳过测试</li></ul></li><li>自定义设置（只设置两条，其他全部注释掉）</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bind:6053 -group china</span><br><span class="line">bind:5335 -group oversea</span><br></pre></td></tr></table></figure><ul><li>保存&amp;应用</li></ul><h3 id="AdGuard-Home">6.2.4 &nbsp&nbsp<a href="#AdGuard-Home" class="headerlink" title="AdGuard Home"></a>AdGuard Home</h3><h4 id="手动更新内核">6.2.4.1 &nbsp&nbsp<a href="#手动更新内核" class="headerlink" title="手动更新内核"></a>手动更新内核</h4><ol><li>下载最新的AdGuardHome内核（AdGuardHome_linux_amd64.tar.gz）：<a target="_blank" rel="noopener" href="https://github.com/AdguardTeam/AdGuardHome/releases">点击跳转</a></li><li>解压获取「AdGuardHome」文件。</li><li>使用WinSCP登录openwrt虚拟机，进入到路径<code>/usr/bin/AdGuardHome/</code>，上传「AdGuardHome」文件。右击属性，分配权限0755（rwxr-xr-x）。</li></ol><div class="note info no-icon"><p>能科学上网时，点击检查更新，直接更新核心即可。</p></div><h4 id="设置AdGuard-Home">6.2.4.2 &nbsp&nbsp<a href="#设置AdGuard-Home" class="headerlink" title="设置AdGuard Home"></a>设置AdGuard Home</h4><ul><li>启用</li><li>AdGuardHome重定向模式：作为dnsmasq的上游服务器</li><li>详细日志</li><li>开机后网络准备好时重启</li><li>在关机时备份工作目录文件（所有的选项）</li><li>打开192.168.1.3:3000地址并配置</li><li>网页管理界面&gt;监听接口&gt;所有接口，端口号设置为默认的3000</li><li>DNS 服务器&gt;监听接口&gt;所有接口，端口号设置为5351</li><li>网页管理界面登录密码</li><li>设置&gt;常规设置&gt;使用过滤器和Hosts文件以拦截指定域名（其他选项全部关闭）</li><li>设置&gt;DNS设置<ul><li>上游 DNS 服务器<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6053</span><br><span class="line">127.0.0.1:5335</span><br></pre></td></tr></table></figure><ul><li>并行请求</li><li>Bootstrap DNS：<code>127.0.0.1:6053</code></li><li>应用</li></ul></li><li>DNS服务配置<ul><li>速度限制：0</li><li>DNS 缓存配置：都空着（采用上游DNS服务器，让SmartDNS来管理）</li></ul></li></ul></li><li>设置&gt;过滤器&gt;DNS黑名单设置（将阻止匹配 DNS 拦截清单的域名）：综合性的规则列表启用几个即可。</li></ul><h3 id="DNSMASQ设置">6.2.5 &nbsp&nbsp<a href="#DNSMASQ设置" class="headerlink" title="DNSMASQ设置"></a>DNSMASQ设置</h3><p>打开网络&gt;DHCP&#x2F;DNS。主要是解除DNSMASQ的DNS功能，只保留转发功能，让DNSMASQ作为AdGuard Home的下级服务生效。</p><ul><li>DNS转发：<code>127.0.0.1#5351</code>。如果未自动设置成这个，手动强制改成这个。</li><li>HOSTS 和解析文件：忽略掉解析文件，不用DNSMASQ的解析。</li><li>高级设置<ul><li>DNS服务器端口：53</li><li>DNS查询缓存的大小：0</li><li>最大并发查询数：1500</li></ul></li><li>保存&amp;应用</li></ul><h3 id="OpenClash">6.2.6 &nbsp&nbsp<a href="#OpenClash" class="headerlink" title="OpenClash"></a>OpenClash</h3><div class="note danger no-icon"><p>实测，Meta内核因DNS转发问题，导致无法正常上网。例如GOOGLE可能会出现证书异常的问题，YOUTUBE点击视频后会存在一直转圈圈的情况，无法加载视频。现阶段稳定工作的模式为：Fake-IP的普通TUN模式，模型模式可调TUN或者混合（TUN模式需要有TUN内核支持）。代理模式使用规则上网即可。</p></div><div class="note info no-icon"><p><a target="_blank" rel="noopener" href="https://github.com/vernesong/OpenClash/releases/tag/v0.46.014-beta">v0.46.014-beta</a>是最后一版支持TUN内核的版本，往后一版的<a target="_blank" rel="noopener" href="https://github.com/vernesong/OpenClash/releases/tag/v0.46.031-beta">v0.46.031-beta</a>版本就开始移除Dev和TUN内核的支持，如果手动操作更新OpenClash版本，会自动移除Dev和TUN内核文件。即使手动通过WinSCP上传Dev和TUN内核文件，软件内也是无法识别到的。</p></div><h4 id="更新客户端">6.2.6.1 &nbsp&nbsp<a href="#更新客户端" class="headerlink" title="更新客户端"></a>更新客户端</h4><ol><li>下载客户端安装包：<a target="_blank" rel="noopener" href="https://github.com/vernesong/OpenClash/releases">点击跳转</a></li><li>使用WinSCP登录openwrt虚拟机，进入到路径家目录home，上传安装包，运行安装<code>opkg install ./luci-app-openclash_0.46.014-beta_all.ipk</code>。如果报错，尝试<code>opkg update</code>。</li></ol><h4 id="手动更新内核-1">6.2.6.2 &nbsp&nbsp<a href="#手动更新内核-1" class="headerlink" title="手动更新内核"></a>手动更新内核</h4><p>内核下载地址：</p><ul><li>老的Release页面<ul><li><a target="_blank" rel="noopener" href="https://github.com/vernesong/OpenClash/releases/tag/Clash">Dev 内核</a></li><li><a target="_blank" rel="noopener" href="https://github.com/vernesong/OpenClash/releases/tag/TUN-Premium">Tun 内核</a></li><li><a target="_blank" rel="noopener" href="https://github.com/vernesong/OpenClash/releases/tag/TUN">Tun 游戏内核</a></li></ul></li><li>当前发布的最新内核<ul><li><a target="_blank" rel="noopener" href="https://github.com/vernesong/OpenClash/tree/core/master/dev">Dev 内核</a></li><li><a target="_blank" rel="noopener" href="https://github.com/vernesong/OpenClash/tree/core/master/premium">Tun 内核</a></li><li><a target="_blank" rel="noopener" href="https://github.com/vernesong/OpenClash/tree/core/master/meta">Meta 内核</a></li></ul></li></ul><div class="note danger no-icon"><p>新的内核只支持fake-ip，需要上传Meta内核。</p></div><div class="note info no-icon"><p>能科学上网时，点击检查并更新，直接更新核心即可。</p></div><p>更新步骤：</p><ol><li>下载内核。</li><li>使用WinSCP登录openwrt虚拟机，进入到路径<code>/etc/openclash/core</code>，上传内核文件。右击属性，分配权限0755（rwxr-xr-x）。</li></ol><p>内核对应的名称（压缩包解压出来的名称不一定对应，需手动修改）：</p><ul><li>Dev 内核: clash</li><li>Tun 内核: clash_tun</li><li>Meta 内核: clash_meta</li></ul><h4 id="OpenClash设置">6.2.6.3 &nbsp&nbsp<a href="#OpenClash设置" class="headerlink" title="OpenClash设置"></a>OpenClash设置</h4><ul><li>运行状态：启动OPENCLASH</li><li>插件设置<ul><li>模式设置&gt;运行模式：Fake-IP（TUN-混合）模式【UDP-TUN，TCP-转发】</li><li>DNS设置&gt;本地DNS劫持：停用</li><li>GEO数据库订阅：设置自动更新</li><li>大陆白名单订阅：设置自动更新</li></ul></li><li>配置订阅：设置自动更新，更新间隔60分钟</li></ul><h3 id="扩容Overlay软件安装空间">6.2.7 &nbsp&nbsp<a href="#扩容Overlay软件安装空间" class="headerlink" title="扩容Overlay软件安装空间"></a>扩容Overlay软件安装空间</h3><ol><li>关闭openwrt虚拟机。</li><li>硬件&gt;硬盘&gt;更多，调整磁盘大小（只能增加大小，按需增加所需硬盘的空间大小）。</li><li>打开openwrt虚拟机。</li><li>系统&gt;磁盘管理L：将新增磁盘大小新建一个分区并格式化为ext4，保存并应用</li><li>挂载刚才新增的分区，举例sda3：<code>mount /dev/sda3 /mnt/sda3</code>，保存并应用。</li><li>拷贝源overlay目录的文件到新分区内：<code>cp -r /overlay/* /mnt/sda3</code>。</li><li>系统&gt;挂载点：添加sda3挂载点为「作为外部overlay使用（&#x2F;overlay）」，保存并应用。</li><li>重启openwrt虚拟机，检查扩容情况。</li><li>根据情况可能需手动移除之前挂载的<code>/mnt/sda3</code>状态。</li></ol><h1 id="PVE总结">7 &nbsp&nbsp<a href="#PVE总结" class="headerlink" title="PVE总结"></a>PVE总结</h1><h2 id="（强烈推荐）PVETOOLS脚本程序推荐">7.1 &nbsp&nbsp<a href="#（强烈推荐）PVETOOLS脚本程序推荐" class="headerlink" title="（强烈推荐）PVETOOLS脚本程序推荐"></a>（<strong>强烈推荐</strong>）PVETOOLS脚本程序推荐</h2><ul><li>PVETOOLS仓库地址：<a target="_blank" rel="noopener" href="https://github.com/ivanhao/pvetools">点击跳转</a></li><li>安装步骤（PVE SHELL执行命令）：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> LC_ALL=en_US.UTF-8</span><br><span class="line">apt update &amp;&amp; apt -y install git &amp;&amp; git <span class="built_in">clone</span> https://github.com/ivanhao/pvetools.git</span><br><span class="line"><span class="built_in">cd</span> pvetools</span><br><span class="line">./pvetools.sh</span><br></pre></td></tr></table></figure><ul><li>执行脚本程序后，可以一键执行「安装配置CPU省电」「配置PVE的web界面显示传感器温度」「去除订阅提示」等功能。</li></ul><h2 id="PVE虚拟机各硬件模型总结">7.2 &nbsp&nbsp<a href="#PVE虚拟机各硬件模型总结" class="headerlink" title="PVE虚拟机各硬件模型总结"></a>PVE虚拟机各硬件模型总结</h2><p>TODO</p><h1 id="iKuai总结">8 &nbsp&nbsp<a href="#iKuai总结" class="headerlink" title="iKuai总结"></a>iKuai总结</h1><h2 id="iKuai爱快内网测试">8.1 &nbsp&nbsp<a href="#iKuai爱快内网测试" class="headerlink" title="iKuai爱快内网测试"></a>iKuai爱快内网测试</h2><p>iKuai爱快内置支持iperf3内网测试工具，但服务端默认并未开启。</p><p>开启服务端设置和测试的步骤</p><ol><li>在iKuai爱快中设置：应用工具-&gt;吞吐测试-&gt;服务端功能开关（勾选启用）</li><li>下载<a target="_blank" rel="noopener" href="https://iperf.fr/iperf-download.php">iperf3</a>到客户端机器。</li><li>运行测试命令：<code>iperf3 -c 192.168.1.1</code></li></ol><p>客户端机器作为服务端的设置步骤：</p><ol><li>下载<a target="_blank" rel="noopener" href="https://iperf.fr/iperf-download.php">iperf3</a>到客户端机器。</li><li>运行测试命令：<code>iperf3 -s -p 5201</code></li><li>在iKuai爱快的客户端工具连接客户端IP测试。</li></ol><h1 id="飞牛私有云fnOS（NAS总结）">9 &nbsp&nbsp<a href="#飞牛私有云fnOS（NAS总结）" class="headerlink" title="飞牛私有云fnOS（NAS总结）"></a>飞牛私有云fnOS（NAS总结）</h1><h2 id="下载应用例如QBittorrent在后台上传时可能会引导硬盘持续读取和CPU的异常占用。">9.1 &nbsp&nbsp<a href="#下载应用例如QBittorrent在后台上传时可能会引导硬盘持续读取和CPU的异常占用。" class="headerlink" title="下载应用例如QBittorrent在后台上传时可能会引导硬盘持续读取和CPU的异常占用。"></a>下载应用例如<code>QBittorrent</code>在后台上传时可能会引导硬盘持续读取和CPU的异常占用。</h2><p>问题原因：系统Swap cache功能引起引起硬盘持续读取和CPU的异常占用。</p><p>解决方法：永久禁用<code>Swap cache</code>功能。</p><ol><li>访问fnOS虚拟机控制台。</li><li>登录fnOS账户。</li><li><code>sudo vim /etc/fstab</code></li><li>摁<code>I</code>键进入vim编辑器编辑模式</li><li>找到<code>/swapfile none swap sw 0 0</code>一行内容并注释掉，即在行头加上<code>#</code>。</li><li>摁<code>ESC</code>键，摁<code>:</code>键然后输入<code>wq!</code>保存退出。</li><li><code>cat /etc/fstab</code>可以查看文件内容是否修改成功，输出内容如下：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UUID=ea545bcc-cd3f-479f-902a-ab2b02db25 / ext4 errors=remount-ro 0 1</span><br><span class="line"><span class="comment"># /swapfile none swap sw 0 0</span></span><br><span class="line">UUID=676D-A1AF /boot/efi vfat <span class="built_in">umask</span>=0077 0 1</span><br></pre></td></tr></table></figure><h1 id="宽带网络总结">10 &nbsp&nbsp<a href="#宽带网络总结" class="headerlink" title="宽带网络总结"></a>宽带网络总结</h1><h2 id="会话数（连接数）">10.1 &nbsp&nbsp<a href="#会话数（连接数）" class="headerlink" title="会话数（连接数）"></a>会话数（连接数）</h2><p>会话数（连接数）在线测试工具：<a target="_blank" rel="noopener" href="https://qps.itzmx.com/">https://qps.itzmx.com</a></p><p>连接数为应用产生的网络连接数，例如在爱快首页上看到连接数。并发连接数为 qps ，即每秒发起请求，等于在同一秒内，产生了 250 个请求。</p><p>会话数（连接数）的限制，一般普通线路带宽会有会话数限制，专线则没有该限制。触发限制的常见现象为：超过并发连接数上限后，此前已建立连接数的软件和网络请求可正常通信，并且期间ping一切正常，延迟没有任何抖动现象，但是新开软件则连不上网络。</p><h1 id="后记">11 &nbsp&nbsp<a href="#后记" class="headerlink" title="后记"></a>后记</h1><p><del>这光猫还是有断流情况，估计是过热导致掉线，后续考虑下加装小风扇。</del></p><p>断流降速故障已查明：虚拟网卡模型设置为<code>Intel E1000</code>导致的故障，重设为<code>VirtIO (半虚拟化)</code>即可解决。</p><div class="note info no-icon"><p>在这台工控机上实际使用openwrt内网测速工具发现，虚拟机网卡模型设置为<code>Intel E1000</code>或者<code>Realtek RTL8139</code>都无法正常发挥网卡的性能，<code>Intel E1000</code>大约测试性能为100Mbps~300Mbps不等，<code>Realtek RTL8139</code>模型是最为拉跨的，直接为10Mbps。使用<code>VirtIO (半虚拟化)</code>模型内网测速才能恢复到900Mbps以上的正常速度。</p></div><h1 id="All-in-One-All-in-Boom-机器硬件选型总结">12 &nbsp&nbsp<a href="#All-in-One-All-in-Boom-机器硬件选型总结" class="headerlink" title="All in One (All in Boom) 机器硬件选型总结"></a>All in One (All in Boom) 机器硬件选型总结</h1><h2 id="CPU选型对比">12.1 &nbsp&nbsp<a href="#CPU选型对比" class="headerlink" title="CPU选型对比"></a>CPU选型对比</h2><div class="note primary no-icon"><p>All in One用途大多是使用虚拟机方案实现各子系统，其中虚拟化直通硬件方案需要CPU中一个很重要的功能才能实现。对于Intel CPU来说，就是VT-d（该功能可以在Intel官方每个CPU SKU规格页面查看是否支持）；对于AMD CPU来说，就是IOMMU，也称AMD-Vi（暂未找到AMD官方资料特性说明，根据维基百科资料所言，所有 Ryzen 处理器均支持该功能）。</p></div><table><thead><tr><th align="center">CPU型号</th><th align="center">内核&#x2F;线程</th><th align="center">功耗&#x2F;W</th><th align="center">频率&#x2F;GHz</th><th align="center">核显最大分辨率</th><th align="center">最大内存规格&#x2F;GB</th><th align="center">VT-x</th><th align="center">VT-d</th></tr></thead><tbody><tr><td align="center"><a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/products/sku/78867/intel-celeron-processor-j1900-2m-cache-up-to-2-42-ghz/specifications.html">赛扬®J1900</a></td><td align="center">4&#x2F;4</td><td align="center">10</td><td align="center">2~2.42</td><td align="center">未知</td><td align="center">2×8 DDR3L 1333MT&#x2F;s</td><td align="center">支持</td><td align="center">不支持</td></tr><tr><td align="center"><a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/products/sku/81074/intel-pentium-processor-n3530-2m-cache-up-to-2-58-ghz/specifications.html">奔腾®N3530</a></td><td align="center">4&#x2F;4</td><td align="center">4.5~7.5</td><td align="center">2.16~2.58</td><td align="center">未知</td><td align="center">2×8 DDR3L 1333MT&#x2F;s</td><td align="center">支持</td><td align="center">不支持</td></tr><tr><td align="center"><a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/products/sku/95591/intel-pentium-processor-j4205-2m-cache-up-to-2-60-ghz/specifications.html">奔腾®J4205</a></td><td align="center">4&#x2F;4</td><td align="center">10</td><td align="center">1.5~2.6</td><td align="center">未知</td><td align="center">2×8 LPDDR4 2400 MT&#x2F;s<br>DDR3L&#x2F;LPDDR3 1866 MT&#x2F;s;</td><td align="center">支持</td><td align="center">支持</td></tr><tr><td align="center"><a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/products/sku/197305/intel-celeron-processor-j4125-4m-cache-up-to-2-70-ghz/specifications.html">赛扬®J4125</a></td><td align="center">4&#x2F;4</td><td align="center">10</td><td align="center">2~2.7</td><td align="center">DP：4096x2160@60Hz<br>HDMI：4096x2160@30Hz<br>eDP：4096x2160@60Hz</td><td align="center">2×8 DDR4&#x2F;LPDDR4 2400MT&#x2F;s</td><td align="center">支持</td><td align="center">支持</td></tr><tr><td align="center"><a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/products/sku/214758/intel-celeron-processor-j6412-1-5m-cache-up-to-2-60-ghz/specifications.html">赛扬®J6412</a></td><td align="center">4&#x2F;4</td><td align="center">10</td><td align="center">2~2.6</td><td align="center">DP：4096 x 2160@60Hz<br>eDP：4096 x 2160@60Hz</td><td align="center">4x32 LPDDR4&#x2F;x 3733MT&#x2F;s<br>2x64 DDR4 3200MT&#x2F;s</td><td align="center">支持</td><td align="center">支持</td></tr><tr><td align="center"><a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/products/sku/231803/intel-processor-n100-6m-cache-up-to-3-40-ghz/specifications.html">N100</a></td><td align="center">4&#x2F;4</td><td align="center">6</td><td align="center">3.4</td><td align="center">DP：4096 x 2160@60Hz<br>HDMI：4096 x 2160@60Hz</td><td align="center">16 DDR5 4800 MT&#x2F;s<br>16 DDR4 3200 MT&#x2F;s<br>16 LPDDR5 4800 MT&#x2F;s</td><td align="center">支持</td><td align="center">支持</td></tr><tr><td align="center"><a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/products/sku/226259/intel-core-i71255u-processor-12m-cache-up-to-4-70-ghz/specifications.html">酷睿™ i7-1255U</a></td><td align="center">10&#x2F;12</td><td align="center">12~55</td><td align="center">E核3.5<br>P核4.7</td><td align="center">DP：7680 x 4320 @ 60Hz<br>HDMI：4096 x 2304 @ 60Hz<br>eDP：4096 x 2304 @ 120Hz</td><td align="center">64 LDDR5 4800 MT&#x2F;s<br>64 DDR4 3200 MT&#x2F;s<br>64 LPDDR5 5200 MT&#x2F;s<br>64 LPDDR4x 4267 MT&#x2F;s</td><td align="center">支持</td><td align="center">支持</td></tr><tr><td align="center"><a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/products/sku/134584/intel-core-i312100-processor-12m-cache-up-to-4-30-ghz/specifications.html">酷睿™ i3-12100</a></td><td align="center">4&#x2F;8</td><td align="center">60~89</td><td align="center">无E核<br>P核3.3~4.3</td><td align="center">DP：7680 x 4320 @ 60Hz<br>HDMI：4096 x 2160 @ 60Hz<br>eDP：5120 x 3200 @ 120Hz</td><td align="center">128 DDR5 4800 MT&#x2F;s<br>128 DDR4 3200 MT&#x2F;s</td><td align="center">支持</td><td align="center">支持</td></tr><tr><td align="center"><a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/products/sku/223095/intel-core-i312300-processor-12m-cache-up-to-4-40-ghz/specifications.html">酷睿™ i3-12300</a></td><td align="center">4&#x2F;8</td><td align="center">60~89</td><td align="center">无E核<br>P核3.5~4.4</td><td align="center">DP：7680 x 4320 @ 60Hz<br>HDMI：4096 x 2160 @ 60Hz<br>eDP：5120 x 3200 @ 120Hz</td><td align="center">128 DDR5 4800 MT&#x2F;s<br>128 DDR4 3200 MT&#x2F;s</td><td align="center">支持</td><td align="center">支持</td></tr><tr><td align="center"><a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/products/sku/134586/intel-core-i512400-processor-18m-cache-up-to-4-40-ghz/specifications.html">酷睿™ i5-12400</a></td><td align="center">6&#x2F;12</td><td align="center">65~117</td><td align="center">无E核<br>P核2.5~4.4</td><td align="center">DP：7680 x 4320 @ 60Hz<br>HDMI：4096 x 2160 @ 60Hz<br>eDP：5120 x 3200 @ 120Hz</td><td align="center">128 DDR5 4800 MT&#x2F;s<br>128 DDR4 3200 MT&#x2F;s</td><td align="center">支持</td><td align="center">支持</td></tr><tr><td align="center"><a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/products/sku/230575/intel-core-i313100-processor-12m-cache-up-to-4-50-ghz/specifications.html">酷睿™ i3-13100</a></td><td align="center">4&#x2F;8</td><td align="center">60~110</td><td align="center">无E核<br>P核3.4~4.5</td><td align="center">DP：7680 x 4320 @ 60Hz<br>HDMI：4096 x 2160 @ 60Hz<br>eDP：5120 x 3200 @ 120Hz</td><td align="center">192 DDR5 4800 MT&#x2F;s<br>192 DDR4 3200 MT&#x2F;s</td><td align="center">支持</td><td align="center">支持</td></tr><tr><td align="center"><a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/products/sku/236774/intel-core-i3-processor-14100-12m-cache-up-to-4-70-ghz/specifications.html">酷睿™ i3-14100</a></td><td align="center">4&#x2F;8</td><td align="center">60~110</td><td align="center">无E核<br>P核3.5~4.7</td><td align="center">DP：7680 x 4320 @ 60Hz<br>HDMI：4096 x 2160 @ 60Hz<br>eDP：5120 x 3200 @ 120Hz</td><td align="center">192 DDR5 4800 MT&#x2F;s<br>192 DDR4 3200 MT&#x2F;s</td><td align="center">支持</td><td align="center">支持</td></tr><tr><td align="center"><a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/products/sku/134594/intel-core-i712700k-processor-25m-cache-up-to-5-00-ghz/specifications.html">酷睿™ i7-12700K</a></td><td align="center">12&#x2F;20</td><td align="center">125-190</td><td align="center">E核2.7~3.8<br>P核3.6~4.9</td><td align="center">DP：7680 x 4320 @ 60Hz<br>HDMI：4096 x 2160 @ 60Hz<br>eDP：5120 x 3200 @ 120Hz</td><td align="center">128 DDR5 4800 MT&#x2F;s<br>128 DDR4 3200 MT&#x2F;s</td><td align="center">支持</td><td align="center">支持</td></tr><tr><td align="center"><a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/products/sku/226258/intel-core-i71265u-processor-12m-cache-up-to-4-80-ghz/specifications.html">酷睿™ i7-1265U</a></td><td align="center">10&#x2F;12</td><td align="center">12~55</td><td align="center">E核3.6<br>P核4.8</td><td align="center">DP：7680 x 4320 @ 60Hz<br>HDMI：4096 x 2304 @ 60Hz<br>eDP：4096 x 2304 @ 120Hz</td><td align="center">64 DDR5 4800 MT&#x2F;s<br>64 DDR4 3200 MT&#x2F;s<br>64 LPDDR5 5200 MT&#x2F;s<br>64 LPDDR4x 4267 MT&#x2F;s</td><td align="center">支持</td><td align="center">支持</td></tr></tbody></table><div class="note default no-icon"><p>BUG处理器的折腾性思考：小黄鱼上面流通不少Intel 12代ES测试版处理器，不同步进版本存在不同问题，例如CPU没有内建直连独立显卡的PCI-E通道，会导致所有主板上第一根直连独立显卡的PCI-E X16插槽无效。这类BUG CPU虽然价格看着很诱惑，但可能实际运行不稳定，因此不纳入All in One硬件选型考虑范围。</p></div><h2 id="主板选型对比">12.2 &nbsp&nbsp<a href="#主板选型对比" class="headerlink" title="主板选型对比"></a>主板选型对比</h2><table><thead><tr><th align="center">主板型号</th><th align="center">内存插槽</th><th align="center">供电</th><th align="center">网口情况</th><th align="center">SATA支持</th><th align="center">M.2支持</th><th align="center">PCIe通道</th><th align="center">显示接口</th><th align="center">PCB设计板层</th></tr></thead><tbody><tr><td align="center">云星Matx-Z690 NAS主板</td><td align="center">4 x DDR4内存槽<br>最大支持4 x 32G&#x3D;128G</td><td align="center">8+1+1相</td><td align="center">4 x Intel I226-V 2.5G</td><td align="center">8 x SATA 3.0</td><td align="center">2 x PCIe4.0 x4正面<br>2 x PCIe3.0 x4反面</td><td align="center">2 x PCIe4.0 x16插槽（x8带宽）<br>PCIe4.0 x4插槽（x4带宽）</td><td align="center">HDMI2.0<br>DP1.4</td><td align="center">6层</td></tr></tbody></table><h1 id="参考文献">13 &nbsp&nbsp<a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>[1] Installation Failing: &quot;Failed to prepare EFI boot using Grub&quot;[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://forum.proxmox.com/threads/installation-failing-failed-to-prepare-efi-boot-using-grub.122002/">https://forum.proxmox.com/threads/installation-failing-failed-to-prepare-efi-boot-using-grub.122002/</a>.<br>[2] 软路由科普系列 篇二：PVE安装iKuai OpenWrt 旁路由 基础设置 保姆级全教程[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://post.smzdm.com/p/awrx4lxm/">https://post.smzdm.com/p/awrx4lxm/</a>.<br>[3] ProxmoxVE 7.4 升级到 8.0，详细步骤[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.margrop.net/post/pve-7-upgrade-to-8/">https://blog.margrop.net/post/pve-7-upgrade-to-8/</a>.<br>[4] PVE 联网及更换国内源[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://www.cnblogs.com/pdblogs/p/16218543.html">https://www.cnblogs.com/pdblogs/p/16218543.html</a>.<br>[5] Force update from unsigned repository[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://askubuntu.com/questions/732985/force-update-from-unsigned-repository">https://askubuntu.com/questions/732985/force-update-from-unsigned-repository</a>.<br>[6] ProxmoxVE(PVE) 启用 IOMMU[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://www.insilen.com/post/501.html">https://www.insilen.com/post/501.html</a>.<br>[7] Enable IOMMU or VT-d in your motherboard BIOS[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://us.informatiweb.net/tutorials/it/bios/enable-iommu-or-vt-d-in-your-bios.html">https://us.informatiweb.net/tutorials/it/bios/enable-iommu-or-vt-d-in-your-bios.html</a>.<br>[8] ProxmoxVE(PVE) 使用 IMG 镜像文件，img 转 qcow2[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://www.lxtx.tech/index.php/archives/65/">https://www.lxtx.tech/index.php/archives/65/</a>.<br>[9]『软路由踩坑指南』篇三：ESXi 8.0 虚拟机安装 iKuai 主路由及保姆级配置[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://post.smzdm.com/p/a5op28x7/">https://post.smzdm.com/p/a5op28x7/</a>.<br>[10]『软路由踩坑指南』篇四：ESXi 8.0 虚拟机安装 openWrt 路由系统终极指南[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://post.smzdm.com/p/a7ngxeel/">https://post.smzdm.com/p/a7ngxeel/</a>.<br>[11]『软路由踩坑指南』篇五：OpenWrt 旁路由进阶篇 SmartDNS+AdGuardHome 设置 DNS 分流、秒开网页、去广告[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://post.smzdm.com/p/axz6z7w9/">https://post.smzdm.com/p/axz6z7w9/</a>.<br>[12] [openwrt(x86)] OPenWRT 旁路由 +MosDNS+OpenClash+AdGuard Home 傻瓜配置图文教程[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://www.right.com.cn/forum/thread-8284982-1-1.html">https://www.right.com.cn/forum/thread-8284982-1-1.html</a>.<br>[13] OpenWrt 扩容 Overlay 和 Docker 软件安装空间教程（内置硬盘版）附：Samba 网络共享设置[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://www.right.com.cn/forum/thread-7470757-1-1.html">https://www.right.com.cn/forum/thread-7470757-1-1.html</a>.<br>[14] [OpenWrt] 使用 OpenClash 科学上网[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="http://suyu0925.github.io/blog/2022/07/25/openwrt-openclash/">http://suyu0925.github.io/blog/2022/07/25/openwrt-openclash/</a>.<br>[15] 镜像站使用帮助-Proxmox 软件仓库[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/help/proxmox/">https://mirrors.tuna.tsinghua.edu.cn/help/proxmox/</a>.<br>[16] 开启直通[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://skyao.io/learning-pve/docs/pass-through/enable/">https://skyao.io/learning-pve/docs/pass-through/enable/</a>.<br>[17] [经验分享] 在线连接数测试网页，简单一键测试宽带并发连接数限制[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://bbs.ikuai8.com/thread-87196-1-1.html">https://bbs.ikuai8.com/thread-87196-1-1.html</a>.<br>[18] 禁用Swap cache[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://club.fnnas.com/forum.php?mod=viewthread&tid=2492">https://club.fnnas.com/forum.php?mod=viewthread&amp;tid=2492</a>.<br>[19] 镜像站使用帮助-Debian 软件源[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/help/debian/">https://mirrors.tuna.tsinghua.edu.cn/help/debian/</a>.<br>[20] 第 5 章 bookworm 中需要注意的问题[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://www.debian.org/releases/bookworm//amd64/release-notes/ch-information.zh-cn.html">https://www.debian.org/releases/bookworm//amd64/release-notes/ch-information.zh-cn.html</a>.<br>[21] 【装机帮扶站】第881期：BUG处理器能选否？聊聊12代ES处理器[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/458166029">https://zhuanlan.zhihu.com/p/458166029</a>.<br>[22] 爱快ikuai和windows电脑使用iperf3测试内网传输速度[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://www.mulingyuer.com/archives/1073/">https://www.mulingyuer.com/archives/1073/</a>.<br>[23] PVE8.3.0折腾记（一）——PVE初次安装后更换国内源[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_52626278/article/details/144147244">https://blog.csdn.net/weixin_52626278/article/details/144147244</a>.<br>[23] 解决PVE安装独显后，核显消失，无法直通的问题。[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="http://157.0.230.2:8090/archives/owKXsHkN">http://157.0.230.2:8090/archives/owKXsHkN</a>.<br>[24] PVE下LXC ubuntu 中文乱码解决[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/zyr920425/article/details/131126045">https://blog.csdn.net/zyr920425/article/details/131126045</a>.<br>[25] Proxmox VE常见问题以及解决办法（持续更新）[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_40858216/article/details/106784329">https://blog.csdn.net/qq_40858216/article/details/106784329</a>.<br>[26] Proxmox VE面板节点和虚拟机提示问号，节点状态 unknown,储存一直打不开，虚拟机正常的诊断思路[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://www.wjxy.net.cn/?p=2629">https://www.wjxy.net.cn/?p=2629</a>.<br>[27] 给容器设置内核参数[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1583736">https://cloud.tencent.com/developer/article/1583736</a>.<br>[27] Using sysctls in a Kubernetes Cluster[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://kubernetes.io/docs/tasks/administer-cluster/sysctl-cluster/#listing-all-sysctl-parameters">https://kubernetes.io/docs/tasks/administer-cluster/sysctl-cluster/#listing-all-sysctl-parameters</a>.<br>[28] setting key &quot;vm.max_map_count&quot;: Read-only file system[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://forum.proxmox.com/threads/setting-key-vm-max_map_count-read-only-file-system.28720/">https://forum.proxmox.com/threads/setting-key-vm-max_map_count-read-only-file-system.28720/</a>.</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://mister-kin.github.io/code/python/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images_public/avatar_alpha.webp"><meta itemprop="name" content="Mr. Kin"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Mr. Kin's Blog"><meta itemprop="description" content="Since you have chosen to chase, don't give up."></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="undefined | Mr. Kin's Blog"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/code/python/" class="post-title-link" itemprop="url">Python总结笔记</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2023-09-09 04:26:25" itemprop="dateCreated datePublished" datetime="2023-09-09T04:26:25+08:00">2023-09-09</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2024-11-26 18:26:31" itemprop="dateModified" datetime="2024-11-26T18:26:31+08:00">2024-11-26</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a> </span></span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>950</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>3 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="Python-语法摘记">1 &nbsp&nbsp<a href="#Python-语法摘记" class="headerlink" title="Python 语法摘记"></a>Python 语法摘记</h1><p>python在相对路径import导入时，包名前面的小数点.是必要的，python3之后都是严格模式。</p><h1 id="安装python的踩坑记录">2 &nbsp&nbsp<a href="#安装python的踩坑记录" class="headerlink" title="安装python的踩坑记录"></a>安装python的踩坑记录</h1><h2 id="vscode-无法设置python解释器">2.1 &nbsp&nbsp<a href="#vscode-无法设置python解释器" class="headerlink" title="vscode 无法设置python解释器"></a>vscode 无法设置python解释器</h2><p>原因：安装路径在<code>C:\Program Files</code>，vscode权限不够时会导致无法设置python解释器。</p><p>解决方法：安装路径直接按默认路径，不装program路径。</p><h2 id="pip安装某些包异常">2.2 &nbsp&nbsp<a href="#pip安装某些包异常" class="headerlink" title="pip安装某些包异常"></a>pip安装某些包异常</h2><p>情况：如果pip安装某些包一直有异常，反复安装卸载包都无法解决的话，并且确认不是包的问题的话。</p><p>原因：python环境异常。</p><p>解决方法：重装python。</p><ol><li>直接删除python主安装路径的文件</li><li>运行安装程序repair</li><li>点击卸载，再点击安装（必须要卸载再安装，否则site-packages路径下没有任何包，repair操作不会恢复这个路径的文件）</li></ol><h1 id="卸载python">3 &nbsp&nbsp<a href="#卸载python" class="headerlink" title="卸载python"></a>卸载python</h1><h2 id="卸载清除已安装的pip包的bat批处理脚本">3.1 &nbsp&nbsp<a href="#卸载清除已安装的pip包的bat批处理脚本" class="headerlink" title="卸载清除已安装的pip包的bat批处理脚本"></a>卸载清除已安装的pip包的bat批处理脚本</h2><div class="tabs" id="purge_pip_packages"><ul class="nav-tabs"><li class="tab active"><a href="#purge_pip_packages-1">python 3.11</a></li><li class="tab"><a href="#purge_pip_packages-2">python 3.10</a></li><li class="tab"><a href="#purge_pip_packages-3">python 3.9</a></li></ul><div class="tab-content"><div class="tab-pane active" id="purge_pip_packages-1"><p>purge_py311_packages.bat</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">py -<span class="number">3</span>.<span class="number">11</span> -m pip freeze &gt; py311_requirements.txt</span><br><span class="line">py -<span class="number">3</span>.<span class="number">11</span> -m pip uninstall -r py311_requirements.txt -y</span><br><span class="line"><span class="built_in">del</span> py311_requirements.txt</span><br><span class="line"></span><br><span class="line"><span class="built_in">pause</span></span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="purge_pip_packages-2"><p>purge_py310_packages.bat</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">py -<span class="number">3</span>.<span class="number">10</span> -m pip freeze &gt; py310_requirements.txt</span><br><span class="line">py -<span class="number">3</span>.<span class="number">10</span> -m pip uninstall -r py310_requirements.txt -y</span><br><span class="line"><span class="built_in">del</span> py310_requirements.txt</span><br><span class="line"></span><br><span class="line"><span class="built_in">pause</span></span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="purge_pip_packages-3"><p>purge_py39_packages.bat</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">py -<span class="number">3</span>.<span class="number">9</span> -m pip freeze &gt; py39_requirements.txt</span><br><span class="line">py -<span class="number">3</span>.<span class="number">9</span> -m pip uninstall -r py39_requirements.txt -y</span><br><span class="line"><span class="built_in">del</span> py39_requirements.txt</span><br><span class="line"></span><br><span class="line"><span class="built_in">pause</span></span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure></div></div></div><h2 id="清除pip缓存">3.2 &nbsp&nbsp<a href="#清除pip缓存" class="headerlink" title="清除pip缓存"></a>清除pip缓存</h2><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line">pip cache purge</span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure><h1 id="python的包管理">4 &nbsp&nbsp<a href="#python的包管理" class="headerlink" title="python的包管理"></a>python的包管理</h1><p>Python包管理是指创建、发布和安装Python包的过程。Python包是一种封装和分发Python代码的方式，以便于其他开发者使用和共享。Python包管理涉及的三个关键组件：PyPI、setuptools和wheel。</p><h2 id="PyPI">4.1 &nbsp&nbsp<a href="#PyPI" class="headerlink" title="PyPI"></a>PyPI</h2><p>Python软件包索引（PyPI）是一个在线存储库，用于发布和查找Python包。PyPI允许开发者上传他们的包，并提供一个中心化的搜索引擎，让其他开发者能够找到并安装这些包。PyPI通过pip（Python包安装器）来安装和管理包。</p><p>基本的使用：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 升级pip</span></span><br><span class="line">python -m pip install --upgrade pip</span><br><span class="line">pip install pip -U</span><br><span class="line">pip install -i https://pypi.tuna.tsinghua.edu.cn/simple pip -U</span><br><span class="line"></span><br><span class="line"><span class="comment"># pip设定清华源（升级 pip 到最新的版本 (&gt;=10.0.0) 后进再进行配置）</span></span><br><span class="line">pip config <span class="built_in">set</span> global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"><span class="comment"># win平台pip缓存路径：\%LocalAppData\%&gt;pip&gt;Cache</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 临时一次性使用镜像源安装包</span></span><br><span class="line">pip install -i https://pypi.tuna.tsinghua.edu.cn/simple some-package</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装包</span></span><br><span class="line">pip install &lt;package_name&gt;</span><br><span class="line"><span class="comment"># 升级包</span></span><br><span class="line">pip install --upgrade &lt;package_name&gt;</span><br><span class="line"><span class="comment"># 卸载包</span></span><br><span class="line">pip uninstall &lt;package_name&gt;</span><br><span class="line"><span class="comment"># 显示包文件信息</span></span><br><span class="line">pip show --files &lt;package_name&gt;</span><br><span class="line"><span class="comment"># 列出已过时的包</span></span><br><span class="line">pip list --outdated</span><br><span class="line"></span><br><span class="line"><span class="comment"># 卸载全部包</span></span><br><span class="line">pip freeze &gt; requirements.txt</span><br><span class="line">pip uninstall -r requirements.txt -y</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装全部包</span></span><br><span class="line">pip install -r requirements.txt --upgrade</span><br></pre></td></tr></table></figure><h2 id="setuptools和wheel">4.2 &nbsp&nbsp<a href="#setuptools和wheel" class="headerlink" title="setuptools和wheel"></a>setuptools和wheel</h2><p>setuptools是一个Python包管理工具，用于创建、构建和发布Python包。setuptools通过提供易于使用的命令行接口和配置文件（如setup.py）来简化包管理过程。通过使用setuptools，开发者可以方便地将他们的代码打包成可分发的格式，如源代码分发（sdist）和wheel分发（bdist_wheel）。</p><p>wheel是一种Python分发格式，用于提高安装速度和兼容性。与源代码分发（sdist）相比，wheel分发是预编译的，这意味着它们不需要在安装过程中进行编译。这使得wheel分发在安装速度和跨平台兼容性方面具有优势。</p><p>基本使用：</p><ul><li>安装setuptools和wheel：<code>pip install setuptools wheel</code></li><li>创建setup.py文件：</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> setuptools <span class="keyword">import</span> setup, find_packages</span><br><span class="line"></span><br><span class="line">setup(</span><br><span class="line">    name=<span class="string">&quot;my_package&quot;</span>,</span><br><span class="line">    version=<span class="string">&quot;0.1&quot;</span>,</span><br><span class="line">    packages=find_packages(),</span><br><span class="line">    install_requires=[</span><br><span class="line">        <span class="string">&quot;requests&quot;</span>,</span><br><span class="line">    ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>构建源代码分发和wheel分发：<code>python setup.py sdist bdist_wheel</code></li><li>安装twine并发布包到PyPI：</li></ul><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install twine</span><br><span class="line">twine upload dist/*</span><br></pre></td></tr></table></figure><ul><li>安装wheel分发的包：<code>pip install dist/my_package-0.1-py3-none-any.whl</code></li></ul><h1 id="其他">5 &nbsp&nbsp<a href="#其他" class="headerlink" title="其他"></a>其他</h1><ul><li>官方3.9版本最后提供二进制文件下载的是3.9.13版本，之后都是补丁形式。</li></ul><h1 id="参考文献">6 &nbsp&nbsp<a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>[1]【Python 基础】Python 包管理：PyPI、setuptools 与 wheel[EB&#x2F;OL]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_33578950/article/details/130297451">https://blog.csdn.net/qq_33578950/article/details/130297451</a>.</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://mister-kin.github.io/code-training/cpp-primer-v5/chap6/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images_public/avatar_alpha.webp"><meta itemprop="name" content="Mr. Kin"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Mr. Kin's Blog"><meta itemprop="description" content="Since you have chosen to chase, don't give up."></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="undefined | Mr. Kin's Blog"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/code-training/cpp-primer-v5/chap6/" class="post-title-link" itemprop="url">C++ Primer 第五版：第六章「函数」习题答案</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2023-08-15 03:22:08" itemprop="dateCreated datePublished" datetime="2023-08-15T03:22:08+08:00">2023-08-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2024-08-11 19:02:45" itemprop="dateModified" datetime="2024-08-11T19:02:45+08:00">2024-08-11</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/code-training/" itemprop="url" rel="index"><span itemprop="name">code-training</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/code-training/cpp-primer-v5/" itemprop="url" rel="index"><span itemprop="name">cpp-primer-v5</span></a> </span></span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>4.8k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>17 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="第六章：函数"><a href="#第六章：函数" class="headerlink" title="第六章：函数"></a>第六章：函数</h1><h2 id="练习6-1"><a href="#练习6-1" class="headerlink" title="练习6.1"></a>练习6.1</h2><blockquote><p>实参和形参的区别的什么？</p></blockquote><p>实参是函数调用的实际值，是形参的初始值。</p><h2 id="练习6-2"><a href="#练习6-2" class="headerlink" title="练习6.2"></a>练习6.2</h2><blockquote><p>请指出下列函数哪个有错误，为什么？应该如何修改这些错误呢？</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(a) <span class="function"><span class="type">int</span> <span class="title">f</span><span class="params">()</span> </span>&#123;</span><br><span class="line">          string s;</span><br><span class="line">          <span class="comment">// ...</span></span><br><span class="line">          <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">(b) <span class="built_in">f2</span>(<span class="type">int</span> i) &#123; <span class="comment">/* ... */</span> &#125;</span><br><span class="line">(c) <span class="function"><span class="type">int</span> <span class="title">calc</span><span class="params">(<span class="type">int</span> v1, <span class="type">int</span> v1)</span> </span>&#123; <span class="comment">/* ... */</span> &#125;</span><br><span class="line">(d) <span class="function"><span class="type">double</span> <span class="title">square</span> <span class="params">(<span class="type">double</span> x)</span>  <span class="keyword">return</span> x * x</span>;</span><br></pre></td></tr></table></figure><p>修正如下：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 应定义函数的返回值为string</span></span><br><span class="line">(a) <span class="function">string <span class="title">f</span><span class="params">()</span> </span>&#123;</span><br><span class="line">          string s;</span><br><span class="line">          <span class="comment">// ...</span></span><br><span class="line">          <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// 无返回值时，应定义函数的返回值为void</span></span><br><span class="line">(b) <span class="function"><span class="type">void</span> <span class="title">f2</span><span class="params">(<span class="type">int</span> i)</span> </span>&#123; <span class="comment">/* ... */</span> &#125;</span><br><span class="line"><span class="comment">// 任意两个形参都不能同名</span></span><br><span class="line">(c) <span class="function"><span class="type">int</span> <span class="title">calc</span><span class="params">(<span class="type">int</span> v1, <span class="type">int</span> v2)</span> </span>&#123; <span class="comment">/* ... */</span> &#125;</span><br><span class="line"><span class="comment">// 函数定义构成：返回类型、函数名字、0个或多个形参组成的列表（形参以逗号隔开，位于一对圆括号之内）、函数体（由语句块构成，位于一对花括号之内）。</span></span><br><span class="line">(d) <span class="function"><span class="type">double</span> <span class="title">square</span> <span class="params">(<span class="type">double</span> x)</span> </span>&#123; <span class="keyword">return</span> x * x; &#125;</span><br></pre></td></tr></table></figure><h2 id="练习6-3"><a href="#练习6-3" class="headerlink" title="练习6.3"></a><a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/6_3.cpp">练习6.3</a></h2><blockquote><p>编写你自己的fact函数，上机检查是否正确。</p></blockquote><h2 id="练习6-4"><a href="#练习6-4" class="headerlink" title="练习6.4"></a><a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/6_4.cpp">练习6.4</a></h2><blockquote><p>编写一个与用户交互的函数，要求用户输入一个数字，计算生成该数字的阶乘。在main函数中调用该函数。</p></blockquote><h2 id="练习6-5"><a href="#练习6-5" class="headerlink" title="练习6.5"></a>练习6.5</h2><blockquote><p>编写一个函数输出其实参的绝对值。</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">abs</span><span class="params">(<span class="type">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> i &gt; <span class="number">0</span> ? i : -i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">abs</span>(<span class="number">-5</span>) &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="练习6-6"><a href="#练习6-6" class="headerlink" title="练习6.6"></a>练习6.6</h2><blockquote><p>说明形参、局部变量以及局部静态变量的区别。编写一个函数，同时达到这三种形式。</p></blockquote><p><strong>形参</strong>定义在函数形参列表里面；<strong>局部变量</strong>定义在代码块里面；<strong>局部静态变量</strong>在程序的执行中，第一次经过对象定义语句时初始化，并且直到程序终止时才被销毁。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例子</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">count_add</span><span class="params">(<span class="type">int</span> n)</span>       <span class="comment">// n是形参</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> ctr = <span class="number">0</span>;    <span class="comment">// ctr 是局部静态变量</span></span><br><span class="line">    ctr += n;</span><br><span class="line">    <span class="keyword">return</span> ctr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i != <span class="number">10</span>; ++i)  <span class="comment">// i 是局部变量</span></span><br><span class="line">      cout &lt;&lt; <span class="built_in">count_add</span>(i) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="练习6-7"><a href="#练习6-7" class="headerlink" title="练习6.7"></a>练习6.7</h2><blockquote><p>编写一个函数，当它第一次被调用时返回0，以后每次被调用返回值加1。</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">generate</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> ctr = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> ctr++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="练习6-8"><a href="#练习6-8" class="headerlink" title="练习6.8"></a><a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/Chapter6.h">练习6.8</a></h2><blockquote><p>编写一个名为Chapter6.h的头文件，令其包含6.1节练习中的函数声明。</p></blockquote><h2 id="练习6-9-fact-cc-factMain-cc"><a href="#练习6-9-fact-cc-factMain-cc" class="headerlink" title="练习6.9 : fact.cc | factMain.cc"></a>练习6.9 : <a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/fact.cpp">fact.cc</a> | <a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/factMain.cpp">factMain.cc</a></h2><blockquote><p>编写你自己的fact.cc 和factMain.cc ，这两个文件都应该包含上一小节的练习中编写的 Chapter6.h 头文件。通过这些文件，理解你的编译器是如何支持分离式编译的。</p></blockquote><h2 id="练习6-10"><a href="#练习6-10" class="headerlink" title="练习6.10"></a><a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/6_10.cpp">练习6.10</a></h2><blockquote><p>编写一个函数，使用指针形参交换两个整数的值。在代码中调用该函数并输出交换后的结果，以此验证函数的正确性。</p></blockquote><h2 id="练习6-11"><a href="#练习6-11" class="headerlink" title="练习6.11"></a><a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/6_11.cpp">练习6.11</a></h2><blockquote><p>编写并验证你自己的reset函数，使其作用于引用类型的参数。</p></blockquote><h2 id="练习6-12"><a href="#练习6-12" class="headerlink" title="练习6.12"></a><a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/6_12.cpp">练习6.12</a></h2><blockquote><p>改写6.2.1节练习中<a href="#%E7%BB%83%E4%B9%A06-10">6.10</a>的程序，使用引用而非指针交换两个整数的值。你觉得哪种方法更易于使用呢？为什么？</p></blockquote><p>引用更易于使用，无论是用法理解还是语法编写层面都简洁一些。</p><h2 id="练习6-13"><a href="#练习6-13" class="headerlink" title="练习6.13"></a>练习6.13</h2><blockquote><p>假设 T 是某种类型的名字，说明以下两个函数声明的区别：一个是void f(T), 另一个是 void f(&amp;T)。</p></blockquote><ul><li><code>void f(T)</code> 的参数通过「值传递」，在函数中T是实参的副本，改变T值不会影响到原来的实参值。</li><li><code>void f(&amp;T)</code> 的参数通过「引用传递」，在函数中T是实参的引用（即T是实参的别名），T的改变也就是实参的改变。</li></ul><h2 id="练习6-14"><a href="#练习6-14" class="headerlink" title="练习6.14"></a>练习6.14</h2><blockquote><p>举一个形参应该是引用类型的例子，再举一个形参不能是引用类型的例子。</p></blockquote><p>例如交换两个整数的函数，形参应该是引用</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span>&amp; lhs, <span class="type">int</span>&amp; rhs)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> temp = lhs;</span><br><span class="line">    lhs = rhs;</span><br><span class="line">    rhs = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当实参的值是右值时（比如整型常量，用作右值时，使用的是对象的值（内容），见<a href="/code-training/cpp-primer-v5/chap4/#%E5%B7%A6%E5%80%BC%E5%92%8C%E5%8F%B3%E5%80%BC">左值和右值</a>），形参不能为引用类型</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> i = <span class="built_in">add</span>(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="练习6-15"><a href="#练习6-15" class="headerlink" title="练习6.15"></a>练习6.15</h2><blockquote><p>说明find_char 函数中的三个形参为什么是现在的类型，特别说明为什么s是常量引用而occurs是普通引用？为什么s和occurs是引用类型而c不是？如果令s是普通引用会发生什么情况？如果令occurs是常量引用会发生什么情况？</p></blockquote><ul><li>因为字符串可能很长，因此使用引用避免拷贝；而在函数中我们不希望改变 s 的内容，所以令 s 为常量。</li><li>occurs 是要传到函数外部的变量，所以使用引用，occurs 的值会改变，所以是普通引用。</li><li>因为我们只需要 c 的值，这个实参可能是右值（右值实参无法用于引用形参），所以 c 不能用引用类型。</li><li>如果 s 是普通引用，函数中也可能会意外改变原来字符串的内容。</li><li>occurs 如果是常量引用，那么意味着不能改变它的值，那也就失去意义了。</li></ul><h2 id="练习6-16"><a href="#练习6-16" class="headerlink" title="练习6.16"></a>练习6.16</h2><blockquote><p>下面的这个函数虽然合法，但是不算特别有用。指出它的局限性并设法改善。</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">is_empty</span><span class="params">(string&amp; s)</span> </span>&#123; <span class="keyword">return</span> s.<span class="built_in">empty</span>(); &#125;</span><br></pre></td></tr></table></figure><p>局限性：<strong>常量字符串</strong>和<strong>字符串字面值</strong>无法作为该函数的实参，比如下面这样调用是非法的：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> string str;</span><br><span class="line"><span class="type">bool</span> flag = <span class="built_in">is_empty</span>(str); <span class="comment">//非法</span></span><br><span class="line"><span class="type">bool</span> flag = <span class="built_in">is_empty</span>(<span class="string">&quot;hello&quot;</span>); <span class="comment">//非法</span></span><br></pre></td></tr></table></figure><p>改善：将这个函数的形参定义为常量引用（对const的引用，并非指引用自身是常量，谨记引用不是对象，是对象的别名）</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">is_empty</span><span class="params">(<span class="type">const</span> string&amp; s)</span> </span>&#123; <span class="keyword">return</span> s.<span class="built_in">empty</span>(); &#125;</span><br></pre></td></tr></table></figure><h2 id="练习6-17"><a href="#练习6-17" class="headerlink" title="练习6.17"></a><a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/6_17.cpp">练习6.17</a></h2><blockquote><p>编写一个函数，判断string对象中是否含有大写字母。编写另一个函数，把string对象全部改写成小写形式。在这两个函数中你使用的形参类型相同吗？为什么？</p></blockquote><p>两个函数的形参不一样。第一个函数使用常量引用，第二个函数使用普通引用。</p><h2 id="练习6-18"><a href="#练习6-18" class="headerlink" title="练习6.18"></a>练习6.18</h2><blockquote><p>为下面的函数编写函数声明，从给定的名字中推测函数具备的功能。</p></blockquote><ul><li>(a) 名为 compare 的函数，返回布尔值，两个参数都是 matrix 类的引用。</li><li>(b) 名为 change_val 的函数，返回vector<int>的迭代器，有两个参数：一个是int，另一个是vector<int>的迭代器。</int></int></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(a) <span class="function"><span class="type">bool</span> <span class="title">compare</span><span class="params">(matrix &amp;m1, matrix &amp;m2)</span></span>;</span><br><span class="line">(b) vector&lt;<span class="type">int</span>&gt;::<span class="function">iterator <span class="title">change_val</span><span class="params">(<span class="type">int</span>, vector&lt;<span class="type">int</span>&gt;::iterator)</span></span>;</span><br></pre></td></tr></table></figure><h2 id="练习6-19"><a href="#练习6-19" class="headerlink" title="练习6.19"></a>练习6.19</h2><blockquote><p>假定有如下声明，判断哪个调用合法、哪个调用不合法。对于不合法的函数调用，说明原因。</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">double</span> <span class="title">calc</span><span class="params">(<span class="type">double</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">count</span><span class="params">(<span class="type">const</span> string &amp;, <span class="type">char</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sum</span><span class="params">(vector&lt;<span class="type">int</span>&gt;::iterator, vector&lt;<span class="type">int</span>&gt;::iterator, <span class="type">int</span>)</span></span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">vec</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">(a) <span class="built_in">calc</span>(<span class="number">23.4</span>, <span class="number">55.1</span>);</span><br><span class="line">(b) <span class="built_in">count</span>(<span class="string">&quot;abcda&quot;</span>,<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">(c) <span class="built_in">calc</span>(<span class="number">66</span>);</span><br><span class="line">(d) <span class="built_in">sum</span>(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>(), <span class="number">3.8</span>);</span><br></pre></td></tr></table></figure><ul><li>(a) 不合法。calc只有一个参数。</li><li>(b) 合法。</li><li>(c) 合法。</li><li>(d) 合法。</li></ul><h2 id="练习6-20"><a href="#练习6-20" class="headerlink" title="练习6.20"></a>练习6.20</h2><blockquote><p>引用形参什么时候应该是常量引用？如果形参应该是常量引用，而我们将其设为了普通引用，会发生什么情况？</p></blockquote><p>应该尽量将引用形参设为常量引用，除非有明确的目的是为了<strong>改变</strong>这个引用变量。如果形参应该是常量引用，而我们将其设为了普通引用，那么常量实参将无法作用于普通引用形参，会出现编译报错。</p><h2 id="练习6-21"><a href="#练习6-21" class="headerlink" title="练习6.21"></a><a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/6_21.cpp">练习6.21</a></h2><blockquote><p>编写一个函数，令其接受两个参数：一个是int型的数，另一个是int指针。函数比较int的值和指针所指的值，返回较大的那个。在该函数中指针的类型应该是什么？</p></blockquote><p>应该是 <code>const int *</code> 类型。</p><h2 id="练习6-22"><a href="#练习6-22" class="headerlink" title="练习6.22"></a><a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/6_22.cpp">练习6.22</a></h2><blockquote><p>编写一个函数，令其交换两个int指针。</p></blockquote><h2 id="练习6-23"><a href="#练习6-23" class="headerlink" title="练习6.23"></a><a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/6_23.cpp">练习6.23</a></h2><blockquote><p>参考本节介绍的几个print函数，根据理解编写你自己的版本。依次调用每个函数使其输入下面定义的i和j:</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> i = <span class="number">0</span>, j[<span class="number">2</span>] = &#123; <span class="number">0</span>, <span class="number">1</span> &#125;;</span><br></pre></td></tr></table></figure><h2 id="练习6-24"><a href="#练习6-24" class="headerlink" title="练习6.24"></a>练习6.24</h2><blockquote><p>描述下面这个函数的行为。如果代码中存在问题，请指出并改正。</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(<span class="type">const</span> <span class="type">int</span> ia[<span class="number">10</span>])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i != <span class="number">10</span>; ++i)</span><br><span class="line">        cout &lt;&lt; ia[i] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当数组作为实参的时候，会被自动转换为指向首元素的指针。因此函数形参接受的是一个指针。以上代码实际传递只是指针，会有一个隐患，因此无论是<code>const int ia[3]</code>或者<code>const int ia[255]</code>都没有区别，因为无法实际传递数组的大小。如果要让这个代码成功运行，可以将实参改为数组的引用。更多讨论可参阅<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/26530659/confused-about-array-parameters">Confused about array parameters</a>。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里的ia必须要有括号，这样才是声明为指向含有10个整数的数组的引用，没有括号就相当于引用的数组</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(<span class="type">const</span> <span class="type">int</span> (&amp;ia)[<span class="number">10</span>])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i != <span class="number">10</span>; ++i)</span><br><span class="line">        cout &lt;&lt; ia[i] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="练习6-25"><a href="#练习6-25" class="headerlink" title="练习6.25"></a><a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/6_25.cpp">练习6.25</a></h2><blockquote><p>编写一个main函数，令其接受两个实参。把实参的内容连接成一个string对象并输出出来。</p></blockquote><h2 id="练习6-26"><a href="#练习6-26" class="headerlink" title="练习6.26"></a><a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/6_25.cpp">练习6.26</a></h2><blockquote><p>编写一个程序，使其接受本节所示的选项；输出传递给main函数的实参的内容。</p></blockquote><h2 id="练习6-27"><a href="#练习6-27" class="headerlink" title="练习6.27"></a><a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/6_27.cpp">练习6.27</a></h2><blockquote><p>编写一个函数，它的参数是initializer_list&lt;int&gt;类型的对象，函数的功能是计算列表中所有元素的和。</p></blockquote><h2 id="练习6-28"><a href="#练习6-28" class="headerlink" title="练习6.28"></a>练习6.28</h2><blockquote><p>在error_msg函数的第二个版本中包含ErrCode类型的参数，其中循环内的elem是什么类型？</p></blockquote><p><code>elem</code> 是 <code>const string &amp;</code> 类型。</p><h2 id="练习6-29"><a href="#练习6-29" class="headerlink" title="练习6.29"></a>练习6.29</h2><blockquote><p>在范围for循环中使用initializer_list对象时，应该将循环控制变量声明成引用类型吗？为什么？</p></blockquote><p>应该使用<strong>常量引用</strong>类型。<code>initializer_list</code> 对象中的元素永远都是常量，我们无法修改<code>initializer_list</code> 对象中元素的值。</p><h2 id="练习6-30"><a href="#练习6-30" class="headerlink" title="练习6.30"></a><a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/6_30.cpp">练习6.30</a></h2><blockquote><p>编译第200页的str_subrange函数，看看你的编译器是如何处理函数中的错误的。</p></blockquote><p>错误信息（Visual Studio 2022 Developer Command Prompt v17.9.5）：</p><blockquote><p>“str_subrange”: 函数必须返回值 （cpp(C2561)）</p></blockquote><p>clang编译器应该还能提示，<a target="_blank" rel="noopener" href="https://github.com/Mooophy/Cpp-Primer/blob/master/ch06/README.md#exercise-630">参见</a>：</p><blockquote><p>Control may reach end of non-void function. &#x2F;&#x2F; error #2</p></blockquote><h2 id="练习6-31"><a href="#练习6-31" class="headerlink" title="练习6.31"></a>练习6.31</h2><blockquote><p>什么情况下返回的引用无效？什么情况下返回常量的引用无效？</p></blockquote><p>当返回的引用的对象是局部变量时，返回的引用无效；当我们希望返回的对象被修改时，返回常量的引用无效。</p><h2 id="练习6-32"><a href="#练习6-32" class="headerlink" title="练习6.32"></a>练习6.32</h2><blockquote><p>下面的函数合法吗？如果合法，说明其功能；如果不合法，修改其中的错误并解释原因。</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> &amp;<span class="title">get</span><span class="params">(<span class="type">int</span> *array, <span class="type">int</span> index)</span> </span>&#123; <span class="keyword">return</span> array[index]; &#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> ia[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i != <span class="number">10</span>; ++i)</span><br><span class="line">        <span class="built_in">get</span>(ia, i) = i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>合法。get 函数根据索引取得数组中的元素的引用。</p><h2 id="练习6-33"><a href="#练习6-33" class="headerlink" title="练习6.33"></a><a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/6_33.cpp">练习6.33</a></h2><blockquote><p>编写一个递归函数，输出vector对象的内容。</p></blockquote><h2 id="练习6-34"><a href="#练习6-34" class="headerlink" title="练习6.34"></a>练习6.34</h2><blockquote><p>如果factorial 函数的停止条件如下所示，将发生什么情况？</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (val != <span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>如果val为正数，从结果上来说没有区别（多乘了个 1）; 如果val为负数，那么递归永远不会结束。</p><p>通常而言，负数没有阶乘，但这里函数定义是int，可以输入负数。这里是问题所在。</p><h2 id="练习6-35"><a href="#练习6-35" class="headerlink" title="练习6.35"></a>练习6.35</h2><blockquote><p>在调用factorial 函数时，为什么我们传入的值是 val-1 而非 val--？</p></blockquote><p>如果传入的值是 val--，那么将会永远传入相同的值来调用该函数，递归将永远不会结束。</p><h2 id="练习6-36"><a href="#练习6-36" class="headerlink" title="练习6.36"></a>练习6.36</h2><blockquote><p>编写一个函数声明，使其返回数组的引用并且该数组包含10个string对象。不用使用尾置返回类型、decltype或者类型别名。</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> (&amp;<span class="built_in">fun</span>())[<span class="number">10</span>];</span><br></pre></td></tr></table></figure><h2 id="练习6-37"><a href="#练习6-37" class="headerlink" title="练习6.37"></a>练习6.37</h2><blockquote><p>为上一题的函数再写三个声明，一个使用类型别名，另一个使用尾置返回类型，最后一个使用decltype关键字。你觉得哪种形式最好？为什么？</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> string str_arr[<span class="number">10</span>];</span><br><span class="line"><span class="function">str_arr&amp; <span class="title">fun</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">fun</span><span class="params">()</span>-&gt;<span class="title">string</span><span class="params">(&amp;)</span>[10]</span>;</span><br><span class="line"></span><br><span class="line">string s[<span class="number">10</span>];</span><br><span class="line"><span class="keyword">decltype</span>(s)&amp; <span class="built_in">fun</span>();</span><br></pre></td></tr></table></figure><p>我觉得尾置返回类型最好。</p><h2 id="练习6-38"><a href="#练习6-38" class="headerlink" title="练习6.38"></a>练习6.38</h2><blockquote><p>修改arrPtr函数，使其返回数组的引用。</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">decltype</span>(odd)&amp; <span class="built_in">arrPtr</span>(<span class="type">int</span> i)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (i % <span class="number">2</span>) ? odd : even;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="练习6-39"><a href="#练习6-39" class="headerlink" title="练习6.39"></a>练习6.39</h2><blockquote><p>说明在下面的每组声明中第二条声明语句是何含义。如果有非法的声明，请指出来。</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(a) <span class="function"><span class="type">int</span> <span class="title">calc</span><span class="params">(<span class="type">int</span>, <span class="type">int</span>)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">calc</span><span class="params">(<span class="type">const</span> <span class="type">int</span>, <span class="type">const</span> <span class="type">int</span>)</span></span>;</span><br><span class="line">(b) <span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">get</span><span class="params">()</span></span>;</span><br><span class="line">(c) <span class="function"><span class="type">int</span> *<span class="title">reset</span><span class="params">(<span class="type">int</span> *)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">double</span> *<span class="title">reset</span><span class="params">(<span class="type">double</span> *)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>(a) 非法。因为顶层const 不影响传入函数的对象，所以第二个声明无法与第一个声明区分开来。</li><li>(b) 非法。对于重载的函数来说，它们应该只有形参的数量和形参的类型不同。返回值与重载无关。</li><li>(c) 合法。</li></ul><h2 id="练习6-40"><a href="#练习6-40" class="headerlink" title="练习6.40"></a>练习6.40</h2><blockquote><p>下面的哪个声明是错误的？为什么？</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(a) <span class="function"><span class="type">int</span> <span class="title">ff</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b = <span class="number">0</span>, <span class="type">int</span> c = <span class="number">0</span>)</span></span>;</span><br><span class="line">(b) <span class="function"><span class="type">char</span> *<span class="title">init</span><span class="params">(<span class="type">int</span> ht = <span class="number">24</span>, <span class="type">int</span> wd, <span class="type">char</span> bckgrnd)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>(a) 正确。</li><li>(b) 错误。因为一旦某个形参被赋予了默认值，那么它后面的所有形参都必须要有默认值。</li></ul><h2 id="练习6-41"><a href="#练习6-41" class="headerlink" title="练习6.41"></a>练习6.41</h2><blockquote><p>下面的哪个调用是非法的？为什么？哪个调用虽然合法但显然与程序员的初衷不符？为什么？</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">char</span> *<span class="title">init</span><span class="params">(<span class="type">int</span> ht, <span class="type">int</span> wd = <span class="number">80</span>, <span class="type">char</span> bckgrnd = <span class="string">&#x27; &#x27;</span>)</span></span>;</span><br><span class="line">(a) <span class="built_in">init</span>();</span><br><span class="line">(b) <span class="built_in">init</span>(<span class="number">24</span>,<span class="number">10</span>);</span><br><span class="line">(c) <span class="built_in">init</span>(<span class="number">14</span>,<span class="string">&#x27;*&#x27;</span>);</span><br></pre></td></tr></table></figure><ul><li>(a) 非法。第一个参数不是默认参数，最少需要一个实参。</li><li>(b) 合法。</li><li>(c) 合法，但与代码设计初衷不符。实参字符 <code>*</code> 被编译器隐式转换成 <code>int</code> 传入给第二个参数。而初衷是要传给第三个参数。</li></ul><h2 id="练习6-42"><a href="#练习6-42" class="headerlink" title="练习6.42"></a><a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/6_42.cpp">练习6.42</a></h2><blockquote><p>给make_plural函数（参见6.3.2节，第201页）的第二个形参赋予默认实参&#39;s&#39;, 利用新版本的函数输出单词success和failure的单数和复数形式。</p></blockquote><p>这里原书应该是写错了（英文原版写的也是second），正确应该为「给第三个形参赋予默认实参&#39;s&#39;」。</p><h2 id="练习6-43"><a href="#练习6-43" class="headerlink" title="练习6.43"></a>练习6.43</h2><blockquote><p>你会把下面的哪个声明和定义放在头文件中？哪个放在源文件中？为什么？</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(a) <span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">eq</span><span class="params">(<span class="type">const</span> BigInt&amp;, <span class="type">const</span> BigInt&amp;)</span> </span>&#123;...&#125;</span><br><span class="line">(b) <span class="function"><span class="type">void</span> <span class="title">putValues</span><span class="params">(<span class="type">int</span> *arr, <span class="type">int</span> size)</span></span>;</span><br></pre></td></tr></table></figure><p>全部都放在头文件。(a) 是内联函数，(b) 是声明。</p><h2 id="练习6-44"><a href="#练习6-44" class="headerlink" title="练习6.44"></a>练习6.44</h2><blockquote><p>将6.2.2节（第189页）的isShorter函数改写成内联函数。</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">isShorter</span><span class="params">(<span class="type">const</span> string &amp;s1, <span class="type">const</span> string &amp;s2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> s<span class="number">1.</span><span class="built_in">size</span>() &lt; s<span class="number">2.</span><span class="built_in">size</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="练习6-45"><a href="#练习6-45" class="headerlink" title="练习6.45"></a>练习6.45</h2><blockquote><p>回顾在前面的练习中你编写的那些函数，它们应该是内联函数吗？如果是，将它们改写成内联函数；如果不是，说明原因。</p></blockquote><p>一般来说，内联机制用于优化规模小、流程直接、频繁调用的函数。</p><p>例如，<a href="#%E7%BB%83%E4%B9%A06-38">练习6.38</a>的arrPtr函数和<a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/6_42.cpp">练习6.42</a>的make_plural函数应该定义为内联函数。其他函数若规模不小，且只有一次调用的话，即使定义为内联函数，编译器也很可能会选择忽略，并不会展开内联（内联说明只是向编译器发出的一个请求，实际是否展开内联要取决于编译器）。</p><h2 id="练习6-46"><a href="#练习6-46" class="headerlink" title="练习6.46"></a>练习6.46</h2><blockquote><p>能把isShorter函数定义成constexpr函数吗？如果能，将它改写成constexpr函数；如果不能，说明原因。</p></blockquote><p>不能。<code>constexpr</code>函数的返回值类型及所有形参都需要为字面值类型。<code>std::string::size()</code>不是常量函数，<code>s1.size() &lt; s2.size()</code>也不是常量表达式，它的运行结果虽然可以强制转换成常量类型，但由于<code>常量≠常量表达式</code>，即<code>const≠constexpr</code>，因为<code>constexpr</code>关键字不能进行强制类型转换，一个常量可能在运行时才能确定值，而常量表达式要求在编译阶段就确定值。</p><h2 id="练习6-47"><a href="#练习6-47" class="headerlink" title="练习6.47"></a><a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/6_47.cpp">练习6.47</a></h2><blockquote><p>改写6.3.2节（第205页）练习中使用递归输出vector内容的程序，使其有条件地输出与执行过程有关的信息。例如，每次调用时输出vector对象的大小。分别在打开和关闭调试器的情况下编译并执行这个程序。</p></blockquote><h2 id="练习6-48"><a href="#练习6-48" class="headerlink" title="练习6.48"></a>练习6.48</h2><blockquote><p>说明下面这个循环的含义，它对assert的使用合理吗？</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">string s;</span><br><span class="line"><span class="keyword">while</span> (cin &gt;&gt; s &amp;&amp; s != sought) &#123; &#125; <span class="comment">//空函数体</span></span><br><span class="line"><span class="built_in">assert</span>(cin);</span><br></pre></td></tr></table></figure><p>不合理。从这个程序的意图来看，应该用</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">assert</span>(s == sought);</span><br></pre></td></tr></table></figure><h2 id="练习6-49"><a href="#练习6-49" class="headerlink" title="练习6.49"></a>练习6.49</h2><blockquote><p>什么是候选函数？什么是可行函数？</p></blockquote><ul><li><strong>候选函数</strong>：与被调用函数同名，并且其声明在调用点可见。</li><li><strong>可行函数</strong>：形参与实参的数量相等，并且每个实参类型与对应的形参类型相同或者能转换成形参的类型。</li></ul><h2 id="练习6-50"><a href="#练习6-50" class="headerlink" title="练习6.50"></a>练习6.50</h2><blockquote><p>已知有第217页对函数 f 的声明，对于下面的每一个调用列出可行函数。其中哪个函数是最佳匹配？如果调用不合法，是因为没有可匹配的函数还是因为调用具有二义性？</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(a) <span class="built_in">f</span>(<span class="number">2.56</span>, <span class="number">42</span>)</span><br><span class="line">(b) <span class="built_in">f</span>(<span class="number">42</span>)</span><br><span class="line">(c) <span class="built_in">f</span>(<span class="number">42</span>, <span class="number">0</span>)</span><br><span class="line">(d) <span class="built_in">f</span>(<span class="number">2.56</span>, <span class="number">3.14</span>)</span><br></pre></td></tr></table></figure><ul><li>(a) <code>void f(int, int);</code> 和 <code>void f(double, double = 3.14);</code> 是可行函数。该调用具有二义性而不合法。</li><li>(b) <code>void f(int);</code> 和 <code>void f(double, double = 3.14);</code> 是可行函数。<code>void f(int);</code> 是最佳匹配。</li><li>(c) <code>void f(int, int);</code> 和 <code>void f(double, double = 3.14);</code> 是可行函数。<code>void f(int, int);</code> 是最佳匹配。</li><li>(d) <code>void f(int, int);</code> 和 <code>void f(double, double = 3.14);</code> 是可行函数。<code>void f(double, double = 3.14);</code> 是最佳匹配。</li></ul><h2 id="练习6-51"><a href="#练习6-51" class="headerlink" title="练习6.51"></a><a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/6_51.cpp">练习6.51</a></h2><blockquote><p>编写函数f的4版本，令其各输出一条可以区分的消息。验证上一个练习的答案，如果你的回答错了，反复研究本节内容直到你弄清自己错在何处。</p></blockquote><h2 id="练习6-52"><a href="#练习6-52" class="headerlink" title="练习6.52"></a>练习6.52</h2><blockquote><p>已知有如下声明：</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">manip</span><span class="params">(<span class="type">int</span> ,<span class="type">int</span>)</span></span>;</span><br><span class="line"><span class="type">double</span> dobj;</span><br></pre></td></tr></table></figure><p>请指出下列调用中每个类型转换的等级（参见6.6.1节，第219页）。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(a) <span class="built_in">manip</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;z&#x27;</span>);</span><br><span class="line">(b) <span class="built_in">manip</span>(<span class="number">55.4</span>, dobj);</span><br></pre></td></tr></table></figure><ul><li>(a) 第3级。类型提升实现的匹配。</li><li>(b) 第4级。算术类型转换实现的匹配。</li></ul><h2 id="练习6-53"><a href="#练习6-53" class="headerlink" title="练习6.53"></a>练习6.53</h2><blockquote><p>说明下列每组声明中的第二条语句会产生什么影响，并指出哪些不合法（如果有的话）。</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(a) <span class="function"><span class="type">int</span> <span class="title">calc</span><span class="params">(<span class="type">int</span>&amp;, <span class="type">int</span>&amp;)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">calc</span><span class="params">(<span class="type">const</span> <span class="type">int</span>&amp;, <span class="type">const</span> <span class="type">int</span>&amp;)</span></span>;</span><br><span class="line">(b) <span class="function"><span class="type">int</span> <span class="title">calc</span><span class="params">(<span class="type">char</span>*, <span class="type">char</span>*)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">calc</span><span class="params">(<span class="type">const</span> <span class="type">char</span>*, <span class="type">const</span> <span class="type">char</span>*)</span></span>;</span><br><span class="line">(c) <span class="function"><span class="type">int</span> <span class="title">calc</span><span class="params">(<span class="type">char</span>*, <span class="type">char</span>*)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">calc</span><span class="params">(<span class="type">char</span>* <span class="type">const</span>, <span class="type">char</span>* <span class="type">const</span>)</span></span>;</span><br></pre></td></tr></table></figure><p>(c) 不合法。顶层const不影响传入函数的对象。</p><h2 id="练习6-54"><a href="#练习6-54" class="headerlink" title="练习6.54"></a>练习6.54</h2><blockquote><p>编写函数的声明，令其接受两个int形参并返回类型也是int；然后声明一个vector对象，令其元素是指向该函数的指针。</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> pFunc1 = <span class="keyword">decltype</span>(func) *;</span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">decltype</span><span class="params">(func)</span> *pFunc2</span>;</span><br><span class="line"><span class="keyword">using</span> pFunc3 = <span class="built_in">int</span> (*)(<span class="type">int</span> a, <span class="type">int</span> b);</span><br><span class="line"><span class="keyword">using</span> pFunc4 = <span class="built_in">int</span>(<span class="type">int</span> a, <span class="type">int</span> b);</span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">int</span><span class="params">(*pFunc5)</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span>;</span><br><span class="line"><span class="keyword">using</span> pFunc6 = <span class="keyword">decltype</span>(func);</span><br><span class="line"></span><br><span class="line">std::vector&lt;pFunc1&gt; vec1;</span><br><span class="line">std::vector&lt;pFunc2&gt; vec2;</span><br><span class="line">std::vector&lt;pFunc3&gt; vec3;</span><br><span class="line">std::vector&lt;pFunc4*&gt; vec4;</span><br><span class="line">std::vector&lt;pFunc5&gt; vec5;</span><br><span class="line">std::vector&lt;pFunc6*&gt; vec6;</span><br></pre></td></tr></table></figure><h2 id="练习6-55"><a href="#练习6-55" class="headerlink" title="练习6.55"></a>练习6.55</h2><blockquote><p>编写4个函数，分别对两个int值执行加、减、乘、除运算；在上一题创建的vector对象中保存指向这些函数的指针。</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a + b; &#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">subtract</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a - b; &#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">multiply</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a * b; &#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">divide</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> b != <span class="number">0</span> ? a / b : <span class="number">0</span>; &#125;</span><br><span class="line"></span><br><span class="line">vec<span class="number">1.</span><span class="built_in">push_back</span>(add);</span><br><span class="line">vec<span class="number">1.</span><span class="built_in">push_back</span>(subtract);</span><br><span class="line">vec<span class="number">1.</span><span class="built_in">push_back</span>(multiply);</span><br><span class="line">vec<span class="number">1.</span><span class="built_in">push_back</span>(divide);</span><br></pre></td></tr></table></figure><h2 id="练习6-56"><a href="#练习6-56" class="headerlink" title="练习6.56"></a><a target="_blank" rel="noopener" href="https://github.com/Mister-Kin/CodeTraining/blob/master/cpp_primer_v5/chap6/6_55.cpp">练习6.56</a></h2><blockquote><p>调用上述vector对象中的每个元素并输出其结果。</p></blockquote></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><nav class="pagination"><a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/8/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/10/"><i class="fa fa-angle-right"></i></a></nav></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2018 – <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Mr. Kin</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span title="站点总字数">144k</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">8:45</span></span></div><div><span id="text"></span></div><script type="text/javascript">var text=function(r){function i(t){for(var e=document.createDocumentFragment(),r=0;r<t;r++){var i=document.createElement("span");i.textContent=String.fromCharCode(94*Math.random()+33),i.style.color=a[Math.floor(Math.random()*a.length)],e.appendChild(i)}return e}var n="I Love ",l=["Andriod","iOS","iPadOS","Linux","UNIX","Windows","macOS"].map(function(t){return t+"."}),a=["rgb(110,64,170)","rgb(150,61,179)","rgb(191,60,175)","rgb(228,65,157)","rgb(254,75,131)","rgb(255,94,99)","rgb(255,120,71)","rgb(251,150,51)","rgb(226,183,47)","rgb(198,214,60)","rgb(175,240,91)","rgb(127,246,88)","rgb(82,246,103)","rgb(48,239,130)","rgb(29,223,163)","rgb(26,199,194)","rgb(35,171,216)","rgb(54,140,225)","rgb(76,110,219)","rgb(96,84,200)"],o={text:"",prefixP:-5,skillI:0,skillP:0,direction:"forward",delay:2,step:1};!function t(){var e=l[o.skillI];o.step?o.step--:(o.step=1,o.prefixP<n.length?(0<=o.prefixP&&(o.text+=n[o.prefixP]),o.prefixP++):"forward"===o.direction?o.skillP<e.length?(o.text+=e[o.skillP],o.skillP++):o.delay?o.delay--:(o.direction="backward",o.delay=2):0<o.skillP?(o.text=o.text.slice(0,-1),o.skillP--):(o.skillI=(o.skillI+1)%l.length,o.direction="forward")),r.textContent=o.text,r.appendChild(i(o.prefixP<n.length?Math.min(5,5+o.prefixP):Math.min(5,e.length-o.skillP))),setTimeout(t,75)}()};text(document.getElementById("text"))</script><div><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span></div><script type="text/javascript">var now=new Date;function createtime(){var n=new Date("08/12/2018 12:00:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="本站勉强运行 "+dnum+" 天 ",document.getElementById("times").innerHTML=hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}setInterval("createtime()",250)</script></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><a href="https://github.com/mister-kin" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script class="next-config" data-name="giscus" type="application/json">{"enable":true,"repo":"Mister-Kin/Mister-Kin.github.io","repo_id":"MDEwOlJlcG9zaXRvcnkxOTg5Nzg5NDg=","category":"Announcements","category_id":"DIC_kwDOC9wthM4Clt2A","mapping":"pathname","strict":0,"reactions_enabled":1,"emit_metadata":1,"theme":"preferred_color_scheme","lang":"zh-CN","crossorigin":"anonymous","input_position":"top","loading":"lazy"}</script><script>document.addEventListener("page:loaded",()=>{CONFIG.page.comments&&NexT.utils.loadComments(".giscus-container").then(()=>NexT.utils.getScript("https://giscus.app/client.js",{attributes:{async:!0,crossOrigin:"anonymous","data-repo":CONFIG.giscus.repo,"data-repo-id":CONFIG.giscus.repo_id,"data-category":CONFIG.giscus.category,"data-category-id":CONFIG.giscus.category_id,"data-mapping":CONFIG.giscus.mapping,"data-strict":CONFIG.giscus.strict,"data-reactions-enabled":CONFIG.giscus.reactions_enabled,"data-emit-metadata":CONFIG.giscus.emit_metadata,"data-theme":CONFIG.giscus.theme,"data-lang":CONFIG.giscus.lang,"data-input-position":CONFIG.giscus.input_position,"data-loading":CONFIG.giscus.loading},parentNode:document.querySelector(".giscus-container")}))})</script><script type="text/javascript">(()=>{var d=["富强","民主","文明","和谐","自由","平等","公正","法治","爱国","敬业","诚信","友善"],r=Math.floor(Math.random()*d.length);document.body.addEventListener("click",function(t){var e,n,o,a,l,p;"A"!=t.target.tagName&&(e=t.pageX,t=t.pageY,(n=document.createElement("span")).textContent=d[r],r=(r+1)%d.length,n.style.cssText=["z-index: 9999999; position: absolute; font-size: 18px; font-weight: bold; color: #ff0000; top: ",t-20,"px; left: ",e,"px;"].join(""),document.body.appendChild(n),o=n,a=0,l=parseInt(o.style.top),p=setInterval(function(){180<a?(clearInterval(p),o.parentNode.removeChild(o)):(a+=2,o.style.top=l-a+"px",o.style.opacity=(180-a)/180)},16.7))})})()</script><div class="special_day_ribbon"><div class="black_ribbon_box"><i class="fas fa-ribbon fa-2x"></i></div><p id="mourning_text">R.I.P</p><p id="memorial_text"></p></div><style type="text/css">.special_day_ribbon{position:fixed;top:1em;left:0;border:20px solid #222;border-left:0;border-right:15px solid transparent;width:140px;z-index:999;display:none}.special_day_ribbon .black_ribbon_box{position:inherit;top:.7em;left:10px;background:#fff;width:50px;height:50px;border-radius:30px;box-shadow:0 0 0 2px #000,0 0 0 5px #fff;z-index:999}.special_day_ribbon i{position:relative;top:10px;left:12px;color:#222}#mourning_text{position:inherit;top:.5em;left:80px;color:#fff;font-size:x-large}#memorial_text{position:inherit;top:.5em;left:20px;color:#fc6423;font-size:x-large}</style><script type="text/javascript">for(var memorial_days=[[5,1],[10,1],[10,2],[10,3],[10,4],[10,5],[10,6],[10,7]],memorial_text=["劳动快乐","国庆快乐"],time=new Date,month=time.getMonth()+1,date=time.getDate(),i=0;i<memorial_days.length;i++){if(memorial_days[i][0]==month&&memorial_days[i][1]==date){date_flag=1,document.getElementsByClassName("special_day_ribbon")[0].style.display="inherit",document.getElementsByClassName("black_ribbon_box")[0].style.display="none",document.getElementById("mourning_text").style.display="none",i<=1?document.getElementById("memorial_text").appendChild(document.createTextNode(memorial_text[i])):document.getElementById("memorial_text").appendChild(document.createTextNode(memorial_text[1]));break}date_flag=0}if(date_flag){var canvas=document.createElement("canvas");canvas.height=window.innerHeight,canvas.width=window.innerWidth,canvas.setAttribute("style","position: fixed;left: 0;top: 0;pointer-events: none;z-index:-1;"),canvas.setAttribute("id","fireworks"),document.getElementsByTagName("body")[0].appendChild(canvas);let t=5,a=50,d=canvas.getContext("2d"),o=[];for(let e=0;e<t;e++){let t={sparks:[]};for(let e=0;e<a;e++){let e={vx:5*Math.random()+.5,vy:5*Math.random()+.5,weight:.3*Math.random()+.03,red:Math.floor(4*Math.random()),green:Math.floor(4*Math.random()),blue:Math.floor(4*Math.random())};.5<Math.random()&&(e.vx=-e.vx),.5<Math.random()&&(e.vy=-e.vy),t.sparks.push(e)}o.push(t),resetFirework(t)}function resetFirework(e){e.x=Math.floor(Math.random()*canvas.width),e.y=canvas.height,e.age=0,e.phase="fly"}function explode(){d.clearRect(0,0,canvas.width,canvas.height),o.forEach((l,t)=>{if("explode"==l.phase)l.sparks.forEach(t=>{for(let e=0;e<10;e++){var a=l.age+e,o=l.x+t.vx*a,a=l.y+t.vy*a+t.weight*a*t.weight*a,n=20*e+2*l.age,r=Math.floor(t.red*n),i=Math.floor(t.green*n),n=Math.floor(t.blue*n);d.beginPath(),d.fillStyle="rgba("+r+","+i+","+n+",1)",d.rect(o,a,4,4),d.fill()}}),l.age++,100<l.age&&Math.random()<.05&&resetFirework(l);else{l.y=l.y-10;for(let e=0;e<15;e++)d.beginPath(),d.fillStyle="rgba("+50*t+","+17*e+",0,1)",d.rect(l.x+Math.random()*e-e/2,l.y+4*e,4,4),d.fill();(Math.random()<.001||l.y<200)&&(l.phase="explode")}}),window.requestAnimationFrame(explode)}window.requestAnimationFrame(explode)}</script><script type="text/javascript">var time=new Date,month=time.getMonth(),date=time.getDate();12==month+1&&13==date&&(document.getElementsByTagName("html")[0].style.filter="grayscale(100%)",document.getElementsByClassName("special_day_ribbon")[0].style.display="inherit")</script><script type="text/javascript">var stop,staticx,img=new Image;function Sakura(A,i,t,g,B){this.x=A,this.y=i,this.s=t,this.r=g,this.fn=B}function getRandom(A){var i,t;switch(A){case"x":i=Math.random()*window.innerWidth;break;case"y":i=Math.random()*window.innerHeight;break;case"s":i=Math.random();break;case"r":i=6*Math.random();break;case"fnx":t=+Math.random()-.5,i=function(A,i){return A+.5*t-1.7};break;case"fny":t=1.5+.7*Math.random(),i=function(A,i){return i+t};break;case"fnr":t=.03*Math.random(),i=function(A){return A+t}}return i}function startSakura(){requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame;for(var A,i=document.createElement("canvas"),t=(staticx=!0,i.height=window.innerHeight,i.width=window.innerWidth,i.setAttribute("style","position: fixed;left: 0;top: 0;pointer-events: none;z-index:-1;"),i.setAttribute("id","canvas_sakura"),document.getElementsByTagName("body")[0].appendChild(i),A=i.getContext("2d"),new SakuraList),g=0;g<50;g++){var B=getRandom("x"),I=getRandom("y"),o=getRandom("r");(B=new Sakura(B,I,getRandom("s"),o,{x:getRandom("fnx"),y:getRandom("fny"),r:randomFnR=getRandom("fnr")})).draw(A),t.push(B)}stop=requestAnimationFrame(function(){A.clearRect(0,0,i.width,i.height),t.update(),t.draw(A),stop=requestAnimationFrame(arguments.callee)})}function stopp(){var A;staticx?((A=document.getElementById("canvas_sakura")).parentNode.removeChild(A),window.cancelAnimationFrame(stop),staticx=!1):startSakura()}img.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUgAAAEwCAYAAADVZeifAAAACXBIWXMAAACYAAAAmAGiyIKYAAAHG2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBSaWdodHM9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9yaWdodHMvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcFJpZ2h0czpNYXJrZWQ9IkZhbHNlIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NDFDMjQxQjYyNjIwNjgxMTgwODNEMjE2MDAzOTU1NDQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDozNDVjOWViOC04NDc4LTFkNDctOGRjMi0yZDkyOGNhYTYxZWQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6YjAzN2ZiMGItNTU5Mi0xYjRkLWJjZGQtOWU4NGExMDJiMGM2IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE4LTA1LTA5VDE0OjQ5OjM3KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0wNS0wOVQxNDo1MToyNSswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wNS0wOVQxNDo1MToyNSswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyMjVlZWE3LTEyY2QtMTY0NC04ZDAzLWFjOTE2ZTAxZDQ1YyIgc3RSZWY6ZG9jdW1lbnRJRD0idXVpZDoxRDIwNUFGNjZCRDlFNTExOUM5REMwMzg2RjlEQjFGNyIvPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphYmMzNjIzMy1hOWNkLWNiNDQtODViYi0zZTgyMjEwYmIxMjYiIHN0RXZ0OndoZW49IjIwMTgtMDUtMDlUMTQ6NTE6MjUrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE4IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YjAzN2ZiMGItNTU5Mi0xYjRkLWJjZGQtOWU4NGExMDJiMGM2IiBzdEV2dDp3aGVuPSIyMDE4LTA1LTA5VDE0OjUxOjI1KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2Vx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",Sakura.prototype.draw=function(A){A.save();this.s;A.translate(this.x,this.y),A.rotate(this.r),A.drawImage(img,0,0,40*this.s,40*this.s),A.restore()},Sakura.prototype.update=function(){this.x=this.fn.x(this.x,this.y),this.y=this.fn.y(this.y,this.y),this.r=this.fn.r(this.r),(this.x>window.innerWidth||this.x<0||this.y>window.innerHeight||this.y<0)&&(this.r=getRandom("fnr"),.4<Math.random()?(this.x=getRandom("x"),this.y=0):(this.x=window.innerWidth,this.y=getRandom("y")),this.s=getRandom("s"),this.r=getRandom("r"))},(SakuraList=function(){this.list=[]}).prototype.push=function(A){this.list.push(A)},SakuraList.prototype.update=function(){for(var A=0,i=this.list.length;A<i;A++)this.list[A].update()},SakuraList.prototype.draw=function(A){for(var i=0,t=this.list.length;i<t;i++)this.list[i].draw(A)},SakuraList.prototype.get=function(A){return this.list[A]},SakuraList.prototype.size=function(){return this.list.length},window.onresize=function(){document.getElementById("canvas_snow")},img.onload=function(){startSakura()}</script><script src="/live2dw/lib/L2Dwidget.min.js?caf790eca4d640f55ed0e6d1046103be"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{scale:1,hHeadPos:.5,vHeadPos:.618,jsonPath:"/live2dw/assets/umaru.model.json"},display:{superSample:2,width:250,height:400,position:"left",hOffset:-20,vOffset:-80},mobile:{show:!1,scale:.5},react:{opacityDefault:.7,opacityOnHover:.2},log:!1})</script></body></html>